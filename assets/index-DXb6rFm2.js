(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function np(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var El={exports:{}},pi={},Tl={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function rp(){if(xh)return be;xh=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.iterator;function T(S){return S===null||typeof S!="object"?null:(S=N&&S[N]||S["@@iterator"],typeof S=="function"?S:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,P={};function I(S,O,ye){this.props=S,this.context=O,this.refs=P,this.updater=ye||C}I.prototype.isReactComponent={},I.prototype.setState=function(S,O){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,O,"setState")},I.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function H(){}H.prototype=I.prototype;function K(S,O,ye){this.props=S,this.context=O,this.refs=P,this.updater=ye||C}var U=K.prototype=new H;U.constructor=K,j(U,I.prototype),U.isPureReactComponent=!0;var Y=Array.isArray,xe=Object.prototype.hasOwnProperty,re={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function Oe(S,O,ye){var fe,Ee={},Se=null,je=null;if(O!=null)for(fe in O.ref!==void 0&&(je=O.ref),O.key!==void 0&&(Se=""+O.key),O)xe.call(O,fe)&&!Q.hasOwnProperty(fe)&&(Ee[fe]=O[fe]);var Te=arguments.length-2;if(Te===1)Ee.children=ye;else if(1<Te){for(var Re=Array(Te),st=0;st<Te;st++)Re[st]=arguments[st+2];Ee.children=Re}if(S&&S.defaultProps)for(fe in Te=S.defaultProps,Te)Ee[fe]===void 0&&(Ee[fe]=Te[fe]);return{$$typeof:i,type:S,key:Se,ref:je,props:Ee,_owner:re.current}}function De(S,O){return{$$typeof:i,type:S.type,key:O,ref:S.ref,props:S.props,_owner:S._owner}}function jt(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function Pt(S){var O={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ye){return O[ye]})}var We=/\/+/g;function ge(S,O){return typeof S=="object"&&S!==null&&S.key!=null?Pt(""+S.key):O.toString(36)}function Ge(S,O,ye,fe,Ee){var Se=typeof S;(Se==="undefined"||Se==="boolean")&&(S=null);var je=!1;if(S===null)je=!0;else switch(Se){case"string":case"number":je=!0;break;case"object":switch(S.$$typeof){case i:case n:je=!0}}if(je)return je=S,Ee=Ee(je),S=fe===""?"."+ge(je,0):fe,Y(Ee)?(ye="",S!=null&&(ye=S.replace(We,"$&/")+"/"),Ge(Ee,O,ye,"",function(st){return st})):Ee!=null&&(jt(Ee)&&(Ee=De(Ee,ye+(!Ee.key||je&&je.key===Ee.key?"":(""+Ee.key).replace(We,"$&/")+"/")+S)),O.push(Ee)),1;if(je=0,fe=fe===""?".":fe+":",Y(S))for(var Te=0;Te<S.length;Te++){Se=S[Te];var Re=fe+ge(Se,Te);je+=Ge(Se,O,ye,Re,Ee)}else if(Re=T(S),typeof Re=="function")for(S=Re.call(S),Te=0;!(Se=S.next()).done;)Se=Se.value,Re=fe+ge(Se,Te++),je+=Ge(Se,O,ye,Re,Ee);else if(Se==="object")throw O=String(S),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return je}function lt(S,O,ye){if(S==null)return S;var fe=[],Ee=0;return Ge(S,fe,"","",function(Se){return O.call(ye,Se,Ee++)}),fe}function Je(S){if(S._status===-1){var O=S._result;O=O(),O.then(function(ye){(S._status===0||S._status===-1)&&(S._status=1,S._result=ye)},function(ye){(S._status===0||S._status===-1)&&(S._status=2,S._result=ye)}),S._status===-1&&(S._status=0,S._result=O)}if(S._status===1)return S._result.default;throw S._result}var Pe={current:null},B={transition:null},ie={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:B,ReactCurrentOwner:re};function q(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:lt,forEach:function(S,O,ye){lt(S,function(){O.apply(this,arguments)},ye)},count:function(S){var O=0;return lt(S,function(){O++}),O},toArray:function(S){return lt(S,function(O){return O})||[]},only:function(S){if(!jt(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},be.Component=I,be.Fragment=s,be.Profiler=u,be.PureComponent=K,be.StrictMode=a,be.Suspense=m,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,be.act=q,be.cloneElement=function(S,O,ye){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var fe=j({},S.props),Ee=S.key,Se=S.ref,je=S._owner;if(O!=null){if(O.ref!==void 0&&(Se=O.ref,je=re.current),O.key!==void 0&&(Ee=""+O.key),S.type&&S.type.defaultProps)var Te=S.type.defaultProps;for(Re in O)xe.call(O,Re)&&!Q.hasOwnProperty(Re)&&(fe[Re]=O[Re]===void 0&&Te!==void 0?Te[Re]:O[Re])}var Re=arguments.length-2;if(Re===1)fe.children=ye;else if(1<Re){Te=Array(Re);for(var st=0;st<Re;st++)Te[st]=arguments[st+2];fe.children=Te}return{$$typeof:i,type:S.type,key:Ee,ref:Se,props:fe,_owner:je}},be.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:c,_context:S},S.Consumer=S},be.createElement=Oe,be.createFactory=function(S){var O=Oe.bind(null,S);return O.type=S,O},be.createRef=function(){return{current:null}},be.forwardRef=function(S){return{$$typeof:p,render:S}},be.isValidElement=jt,be.lazy=function(S){return{$$typeof:x,_payload:{_status:-1,_result:S},_init:Je}},be.memo=function(S,O){return{$$typeof:y,type:S,compare:O===void 0?null:O}},be.startTransition=function(S){var O=B.transition;B.transition={};try{S()}finally{B.transition=O}},be.unstable_act=q,be.useCallback=function(S,O){return Pe.current.useCallback(S,O)},be.useContext=function(S){return Pe.current.useContext(S)},be.useDebugValue=function(){},be.useDeferredValue=function(S){return Pe.current.useDeferredValue(S)},be.useEffect=function(S,O){return Pe.current.useEffect(S,O)},be.useId=function(){return Pe.current.useId()},be.useImperativeHandle=function(S,O,ye){return Pe.current.useImperativeHandle(S,O,ye)},be.useInsertionEffect=function(S,O){return Pe.current.useInsertionEffect(S,O)},be.useLayoutEffect=function(S,O){return Pe.current.useLayoutEffect(S,O)},be.useMemo=function(S,O){return Pe.current.useMemo(S,O)},be.useReducer=function(S,O,ye){return Pe.current.useReducer(S,O,ye)},be.useRef=function(S){return Pe.current.useRef(S)},be.useState=function(S){return Pe.current.useState(S)},be.useSyncExternalStore=function(S,O,ye){return Pe.current.useSyncExternalStore(S,O,ye)},be.useTransition=function(){return Pe.current.useTransition()},be.version="18.3.1",be}var Sh;function Xl(){return Sh||(Sh=1,Tl.exports=rp()),Tl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function sp(){if(bh)return pi;bh=1;var i=Xl(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,y){var x,N={},T=null,C=null;y!==void 0&&(T=""+y),m.key!==void 0&&(T=""+m.key),m.ref!==void 0&&(C=m.ref);for(x in m)a.call(m,x)&&!c.hasOwnProperty(x)&&(N[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)N[x]===void 0&&(N[x]=m[x]);return{$$typeof:n,type:p,key:T,ref:C,props:N,_owner:u.current}}return pi.Fragment=s,pi.jsx=d,pi.jsxs=d,pi}var kh;function ip(){return kh||(kh=1,El.exports=sp()),El.exports}var g=ip(),ue=Xl();const op=np(ue);var Ao={},Cl={exports:{}},Nt={},Nl={exports:{}},jl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh;function ap(){return Eh||(Eh=1,(function(i){function n(B,ie){var q=B.length;B.push(ie);e:for(;0<q;){var S=q-1>>>1,O=B[S];if(0<u(O,ie))B[S]=ie,B[q]=O,q=S;else break e}}function s(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var ie=B[0],q=B.pop();if(q!==ie){B[0]=q;e:for(var S=0,O=B.length,ye=O>>>1;S<ye;){var fe=2*(S+1)-1,Ee=B[fe],Se=fe+1,je=B[Se];if(0>u(Ee,q))Se<O&&0>u(je,Ee)?(B[S]=je,B[Se]=q,S=Se):(B[S]=Ee,B[fe]=q,S=fe);else if(Se<O&&0>u(je,q))B[S]=je,B[Se]=q,S=Se;else break e}}return ie}function u(B,ie){var q=B.sortIndex-ie.sortIndex;return q!==0?q:B.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var m=[],y=[],x=1,N=null,T=3,C=!1,j=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(B){for(var ie=s(y);ie!==null;){if(ie.callback===null)a(y);else if(ie.startTime<=B)a(y),ie.sortIndex=ie.expirationTime,n(m,ie);else break;ie=s(y)}}function Y(B){if(P=!1,U(B),!j)if(s(m)!==null)j=!0,Je(xe);else{var ie=s(y);ie!==null&&Pe(Y,ie.startTime-B)}}function xe(B,ie){j=!1,P&&(P=!1,H(Oe),Oe=-1),C=!0;var q=T;try{for(U(ie),N=s(m);N!==null&&(!(N.expirationTime>ie)||B&&!Pt());){var S=N.callback;if(typeof S=="function"){N.callback=null,T=N.priorityLevel;var O=S(N.expirationTime<=ie);ie=i.unstable_now(),typeof O=="function"?N.callback=O:N===s(m)&&a(m),U(ie)}else a(m);N=s(m)}if(N!==null)var ye=!0;else{var fe=s(y);fe!==null&&Pe(Y,fe.startTime-ie),ye=!1}return ye}finally{N=null,T=q,C=!1}}var re=!1,Q=null,Oe=-1,De=5,jt=-1;function Pt(){return!(i.unstable_now()-jt<De)}function We(){if(Q!==null){var B=i.unstable_now();jt=B;var ie=!0;try{ie=Q(!0,B)}finally{ie?ge():(re=!1,Q=null)}}else re=!1}var ge;if(typeof K=="function")ge=function(){K(We)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,lt=Ge.port2;Ge.port1.onmessage=We,ge=function(){lt.postMessage(null)}}else ge=function(){I(We,0)};function Je(B){Q=B,re||(re=!0,ge())}function Pe(B,ie){Oe=I(function(){B(i.unstable_now())},ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){j||C||(j=!0,Je(xe))},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_getFirstCallbackNode=function(){return s(m)},i.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ie=3;break;default:ie=T}var q=T;T=ie;try{return B()}finally{T=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=T;T=B;try{return ie()}finally{T=q}},i.unstable_scheduleCallback=function(B,ie,q){var S=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?S+q:S):q=S,B){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=q+O,B={id:x++,callback:ie,priorityLevel:B,startTime:q,expirationTime:O,sortIndex:-1},q>S?(B.sortIndex=q,n(y,B),s(m)===null&&B===s(y)&&(P?(H(Oe),Oe=-1):P=!0,Pe(Y,q-S))):(B.sortIndex=O,n(m,B),j||C||(j=!0,Je(xe))),B},i.unstable_shouldYield=Pt,i.unstable_wrapCallback=function(B){var ie=T;return function(){var q=T;T=ie;try{return B.apply(this,arguments)}finally{T=q}}}})(jl)),jl}var Th;function lp(){return Th||(Th=1,Nl.exports=ap()),Nl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function up(){if(Ch)return Nt;Ch=1;var i=Xl(),n=lp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},N={};function T(e){return m.call(N,e)?!0:m.call(x,e)?!1:y.test(e)?N[e]=!0:(x[e]=!0,!1)}function C(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,t,r,o){if(t===null||typeof t>"u"||C(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,r,o,l,h,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=f}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function K(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H,K);I[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H,K);I[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H,K);I[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function U(e,t,r,o){var l=I.hasOwnProperty(t)?I[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j(t,r,l,o)&&(r=null),o||l===null?T(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),re=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),Oe=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),jt=Symbol.for("react.provider"),Pt=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),Je=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),B=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var q=Object.assign,S;function O(e){if(S===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var ye=!1;function fe(e,t){if(!e||ye)return"";ye=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var o=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){o=E}e.call(t.prototype)}else{try{throw Error()}catch(E){o=E}e()}}catch(E){if(E&&o&&typeof E.stack=="string"){for(var l=E.stack.split(`
`),h=o.stack.split(`
`),f=l.length-1,v=h.length-1;1<=f&&0<=v&&l[f]!==h[v];)v--;for(;1<=f&&0<=v;f--,v--)if(l[f]!==h[v]){if(f!==1||v!==1)do if(f--,v--,0>v||l[f]!==h[v]){var w=`
`+l[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=v);break}}}finally{ye=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?O(e):""}function Ee(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=fe(e.type,!1),e;case 11:return e=fe(e.type.render,!1),e;case 1:return e=fe(e.type,!0),e;default:return""}}function Se(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case re:return"Portal";case De:return"Profiler";case Oe:return"StrictMode";case ge:return"Suspense";case Ge:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pt:return(e.displayName||"Context")+".Consumer";case jt:return(e._context.displayName||"Context")+".Provider";case We:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lt:return t=e.displayName||null,t!==null?t:Se(e.type)||"Memo";case Je:t=e._payload,e=e._init;try{return Se(e(t))}catch{}}return null}function je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(t);case 8:return t===Oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Te(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Re(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function st(e){var t=Re(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){o=""+f,h.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(f){o=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wn(e){e._valueTracker||(e._valueTracker=st(e))}function Bn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Re(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function _n(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xe(e,t){var r=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xn(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Te(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zn(e,t){t=t.checked,t!=null&&U(e,"checked",t,!1)}function ve(e,t){zn(e,t);var r=Te(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ke(e,t.type,r):t.hasOwnProperty("defaultValue")&&ke(e,t.type,Te(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ft(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ke(e,t,r){(t!=="number"||_n(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wt=Array.isArray;function Mt(e,t,r,o){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Te(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function xt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ln(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Wt(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Te(r)}}function un(e,t){var r=Te(t.value),o=Te(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function fr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zr(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sn,mr=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sn=Sn||document.createElement("div"),Sn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gr=["Webkit","ms","Moz","O"];Object.keys(cn).forEach(function(e){gr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cn[t]=cn[e]})});function Hn(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cn.hasOwnProperty(e)&&cn[e]?(""+t).trim():t+"px"}function hn(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=Hn(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,l):e[r]=l}}var Hr=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(e,t){if(t){if(Hr[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function pt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kn=null;function En(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gt=null,Jt=null,fn=null;function Ps(e){if(e=Zs(e)){if(typeof Gt!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Wi(t),Gt(e.stateNode,e.type,t))}}function Tn(e){Jt?fn?fn.push(e):fn=[e]:Jt=e}function Kr(){if(Jt){var e=Jt,t=fn;if(fn=Jt=null,Ps(e),t)for(e=0;e<t.length;e++)Ps(t[e])}}function Fr(e,t){return e(t)}function Os(){}var yr=!1;function Rs(e,t,r){if(yr)return e(t,r);yr=!0;try{return Fr(e,t,r)}finally{yr=!1,(Jt!==null||fn!==null)&&(Os(),Kr())}}function Cn(e,t){var r=e.stateNode;if(r===null)return null;var o=Wi(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var vr=!1;if(p)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){vr=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{vr=!1}function wr(e,t,r,o,l,h,f,v,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(A){this.onError(A)}}var _r=!1,Vr=null,qr=!1,As=null,Is={onError:function(e){_r=!0,Vr=e}};function Ls(e,t,r,o,l,h,f,v,w){_r=!1,Vr=null,wr.apply(Is,arguments)}function Fo(e,t,r,o,l,h,f,v,w){if(Ls.apply(this,arguments),_r){if(_r){var E=Vr;_r=!1,Vr=null}else throw Error(s(198));qr||(qr=!0,As=E)}}function Nn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Wr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ti(e){if(Nn(e)!==e)throw Error(s(188))}function Vo(e){var t=e.alternate;if(!t){if(t=Nn(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,o=t;;){var l=r.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===r)return Ti(l),e;if(h===o)return Ti(l),t;h=h.sibling}throw Error(s(188))}if(r.return!==o.return)r=l,o=h;else{for(var f=!1,v=l.child;v;){if(v===r){f=!0,r=l,o=h;break}if(v===o){f=!0,o=l,r=h;break}v=v.sibling}if(!f){for(v=h.child;v;){if(v===r){f=!0,r=h,o=l;break}if(v===o){f=!0,o=h,r=l;break}v=v.sibling}if(!f)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function Ci(e){return e=Vo(e),e!==null?Ni(e):null}function Ni(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ni(e);if(t!==null)return t;e=e.sibling}return null}var ji=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,qo=n.unstable_shouldYield,Wo=n.unstable_requestPaint,Le=n.unstable_now,Gr=n.unstable_getCurrentPriorityLevel,$s=n.unstable_ImmediatePriority,Pi=n.unstable_UserBlockingPriority,jn=n.unstable_NormalPriority,Go=n.unstable_LowPriority,Oi=n.unstable_IdlePriority,Fn=null,Bt=null;function Jo(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Fn,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:$,Qo=Math.log,M=Math.LN2;function $(e){return e>>>=0,e===0?32:31-(Qo(e)/M|0)|0}var F=64,X=4194304;function ee(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oe(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,f=r&268435455;if(f!==0){var v=f&~l;v!==0?o=ee(v):(h&=f,h!==0&&(o=ee(h)))}else f=r&~l,f!==0?o=ee(f):h!==0&&(o=ee(h));if(o===0)return 0;if(t!==0&&t!==o&&(t&l)===0&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((o&4)!==0&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-St(t),l=1<<r,o|=e[r],t&=~l;return o}function we(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var f=31-St(h),v=1<<f,w=l[f];w===-1?((v&r)===0||(v&o)!==0)&&(l[f]=we(v,t)):w<=t&&(e.expiredLanes|=v),h&=~v}}function W(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function G(){var e=F;return F<<=1,(F&4194240)===0&&(F=64),e}function z(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pe(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=r}function Ke(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-St(r),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,r&=~h}}function Ze(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-St(r),l=1<<o;l&t|e[o]&t&&(e[o]|=t),r&=~l}}var _e=0;function Ot(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Sr,Jr,et,Qt,Ri,Qr=!1,Vn=[],qn=null,Wn=null,Gn=null,Us=new Map,Ds=new Map,Jn=[],bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(e,t){switch(e){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(t.pointerId)}}function Ms(e,t,r,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Zs(t),t!==null&&Jr(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function kd(e,t,r,o,l){switch(t){case"focusin":return qn=Ms(qn,e,t,r,o,l),!0;case"dragenter":return Wn=Ms(Wn,e,t,r,o,l),!0;case"mouseover":return Gn=Ms(Gn,e,t,r,o,l),!0;case"pointerover":var h=l.pointerId;return Us.set(h,Ms(Us.get(h)||null,e,t,r,o,l)),!0;case"gotpointercapture":return h=l.pointerId,Ds.set(h,Ms(Ds.get(h)||null,e,t,r,o,l)),!0}return!1}function iu(e){var t=br(e.target);if(t!==null){var r=Nn(t);if(r!==null){if(t=r.tag,t===13){if(t=Wr(r),t!==null){e.blockedOn=t,Ri(e.priority,function(){et(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);kn=o,r.target.dispatchEvent(o),kn=null}else return t=Zs(r),t!==null&&Jr(t),e.blockedOn=r,!1;t.shift()}return!0}function ou(e,t,r){Ai(e)&&r.delete(t)}function Ed(){Qr=!1,qn!==null&&Ai(qn)&&(qn=null),Wn!==null&&Ai(Wn)&&(Wn=null),Gn!==null&&Ai(Gn)&&(Gn=null),Us.forEach(ou),Ds.forEach(ou)}function Bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Qr||(Qr=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ed)))}function zs(e){function t(l){return Bs(l,e)}if(0<Vn.length){Bs(Vn[0],e);for(var r=1;r<Vn.length;r++){var o=Vn[r];o.blockedOn===e&&(o.blockedOn=null)}}for(qn!==null&&Bs(qn,e),Wn!==null&&Bs(Wn,e),Gn!==null&&Bs(Gn,e),Us.forEach(t),Ds.forEach(t),r=0;r<Jn.length;r++)o=Jn[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<Jn.length&&(r=Jn[0],r.blockedOn===null);)iu(r),r.blockedOn===null&&Jn.shift()}var Yr=Y.ReactCurrentBatchConfig,Ii=!0;function Td(e,t,r,o){var l=_e,h=Yr.transition;Yr.transition=null;try{_e=1,Yo(e,t,r,o)}finally{_e=l,Yr.transition=h}}function Cd(e,t,r,o){var l=_e,h=Yr.transition;Yr.transition=null;try{_e=4,Yo(e,t,r,o)}finally{_e=l,Yr.transition=h}}function Yo(e,t,r,o){if(Ii){var l=Xo(e,t,r,o);if(l===null)ma(e,t,o,Li,r),su(e,o);else if(kd(l,e,t,r,o))o.stopPropagation();else if(su(e,o),t&4&&-1<bd.indexOf(e)){for(;l!==null;){var h=Zs(l);if(h!==null&&Sr(h),h=Xo(e,t,r,o),h===null&&ma(e,t,o,Li,r),h===l)break;l=h}l!==null&&o.stopPropagation()}else ma(e,t,o,null,r)}}var Li=null;function Xo(e,t,r,o){if(Li=null,e=En(o),e=br(e),e!==null)if(t=Nn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Wr(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Li=e,null}function au(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gr()){case $s:return 1;case Pi:return 4;case jn:case Go:return 16;case Oi:return 536870912;default:return 16}default:return 16}}var Qn=null,Zo=null,$i=null;function lu(){if($i)return $i;var e,t=Zo,r=t.length,o,l="value"in Qn?Qn.value:Qn.textContent,h=l.length;for(e=0;e<r&&t[e]===l[e];e++);var f=r-e;for(o=1;o<=f&&t[r-o]===l[h-o];o++);return $i=l.slice(e,1<o?1-o:void 0)}function Ui(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Di(){return!0}function uu(){return!1}function Rt(e){function t(r,o,l,h,f){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(r=e[v],this[v]=r?r(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Di:uu,this.isPropagationStopped=uu,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=Rt(Xr),Hs=q({},Xr,{view:0,detail:0}),Nd=Rt(Hs),ta,na,Ks,Mi=q({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ks&&(Ks&&e.type==="mousemove"?(ta=e.screenX-Ks.screenX,na=e.screenY-Ks.screenY):na=ta=0,Ks=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:na}}),cu=Rt(Mi),jd=q({},Mi,{dataTransfer:0}),Pd=Rt(jd),Od=q({},Hs,{relatedTarget:0}),ra=Rt(Od),Rd=q({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ad=Rt(Rd),Id=q({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ld=Rt(Id),$d=q({},Xr,{data:0}),hu=Rt($d),Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Md[e])?!!t[e]:!1}function sa(){return Bd}var zd=q({},Hs,{key:function(e){if(e.key){var t=Ud[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(e){return e.type==="keypress"?Ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hd=Rt(zd),Kd=q({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),du=Rt(Kd),Fd=q({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),Vd=Rt(Fd),qd=q({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wd=Rt(qd),Gd=q({},Mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jd=Rt(Gd),Qd=[9,13,27,32],ia=p&&"CompositionEvent"in window,Fs=null;p&&"documentMode"in document&&(Fs=document.documentMode);var Yd=p&&"TextEvent"in window&&!Fs,fu=p&&(!ia||Fs&&8<Fs&&11>=Fs),pu=" ",mu=!1;function gu(e,t){switch(e){case"keyup":return Qd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function Xd(e,t){switch(e){case"compositionend":return yu(t);case"keypress":return t.which!==32?null:(mu=!0,pu);case"textInput":return e=t.data,e===pu&&mu?null:e;default:return null}}function Zd(e,t){if(Zr)return e==="compositionend"||!ia&&gu(e,t)?(e=lu(),$i=Zo=Qn=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fu&&t.locale!=="ko"?null:t.data;default:return null}}var ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ef[e.type]:t==="textarea"}function wu(e,t,r,o){Tn(o),t=Fi(t,"onChange"),0<t.length&&(r=new ea("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Vs=null,qs=null;function tf(e){Uu(e,0)}function Bi(e){var t=ss(e);if(Bn(t))return e}function nf(e,t){if(e==="change")return t}var _u=!1;if(p){var oa;if(p){var aa="oninput"in document;if(!aa){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),aa=typeof xu.oninput=="function"}oa=aa}else oa=!1;_u=oa&&(!document.documentMode||9<document.documentMode)}function Su(){Vs&&(Vs.detachEvent("onpropertychange",bu),qs=Vs=null)}function bu(e){if(e.propertyName==="value"&&Bi(qs)){var t=[];wu(t,qs,e,En(e)),Rs(tf,t)}}function rf(e,t,r){e==="focusin"?(Su(),Vs=t,qs=r,Vs.attachEvent("onpropertychange",bu)):e==="focusout"&&Su()}function sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bi(qs)}function of(e,t){if(e==="click")return Bi(t)}function af(e,t){if(e==="input"||e==="change")return Bi(t)}function lf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:lf;function Ws(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!m.call(t,l)||!Yt(e[l],t[l]))return!1}return!0}function ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eu(e,t){var r=ku(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ku(r)}}function Tu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cu(){for(var e=window,t=_n();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_n(e.document)}return t}function la(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function uf(e){var t=Cu(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Tu(r.ownerDocument.documentElement,r)){if(o!==null&&la(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=Eu(r,h);var f=Eu(r,o);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cf=p&&"documentMode"in document&&11>=document.documentMode,es=null,ua=null,Gs=null,ca=!1;function Nu(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ca||es==null||es!==_n(o)||(o=es,"selectionStart"in o&&la(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Gs&&Ws(Gs,o)||(Gs=o,o=Fi(ua,"onSelect"),0<o.length&&(t=new ea("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=es)))}function zi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ts={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},ha={},ju={};p&&(ju=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Hi(e){if(ha[e])return ha[e];if(!ts[e])return e;var t=ts[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ju)return ha[e]=t[r];return e}var Pu=Hi("animationend"),Ou=Hi("animationiteration"),Ru=Hi("animationstart"),Au=Hi("transitionend"),Iu=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(e,t){Iu.set(e,t),c(t,[e])}for(var da=0;da<Lu.length;da++){var fa=Lu[da],hf=fa.toLowerCase(),df=fa[0].toUpperCase()+fa.slice(1);Yn(hf,"on"+df)}Yn(Pu,"onAnimationEnd"),Yn(Ou,"onAnimationIteration"),Yn(Ru,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Au,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ff=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function $u(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,Fo(o,t,void 0,e),e.currentTarget=null}function Uu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var f=o.length-1;0<=f;f--){var v=o[f],w=v.instance,E=v.currentTarget;if(v=v.listener,w!==h&&l.isPropagationStopped())break e;$u(l,v,E),h=w}else for(f=0;f<o.length;f++){if(v=o[f],w=v.instance,E=v.currentTarget,v=v.listener,w!==h&&l.isPropagationStopped())break e;$u(l,v,E),h=w}}}if(qr)throw e=As,qr=!1,As=null,e}function $e(e,t){var r=t[xa];r===void 0&&(r=t[xa]=new Set);var o=e+"__bubble";r.has(o)||(Du(t,e,2,!1),r.add(o))}function pa(e,t,r){var o=0;t&&(o|=4),Du(r,e,o,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function Qs(e){if(!e[Ki]){e[Ki]=!0,a.forEach(function(r){r!=="selectionchange"&&(ff.has(r)||pa(r,!1,e),pa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ki]||(t[Ki]=!0,pa("selectionchange",!1,t))}}function Du(e,t,r,o){switch(au(t)){case 1:var l=Td;break;case 4:l=Cd;break;default:l=Yo}r=l.bind(null,t,r,e),l=void 0,!vr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function ma(e,t,r,o,l){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var v=o.stateNode.containerInfo;if(v===l||v.nodeType===8&&v.parentNode===l)break;if(f===4)for(f=o.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===l||w.nodeType===8&&w.parentNode===l))return;f=f.return}for(;v!==null;){if(f=br(v),f===null)return;if(w=f.tag,w===5||w===6){o=h=f;continue e}v=v.parentNode}}o=o.return}Rs(function(){var E=h,A=En(r),L=[];e:{var R=Iu.get(e);if(R!==void 0){var V=ea,Z=e;switch(e){case"keypress":if(Ui(r)===0)break e;case"keydown":case"keyup":V=Hd;break;case"focusin":Z="focus",V=ra;break;case"focusout":Z="blur",V=ra;break;case"beforeblur":case"afterblur":V=ra;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Vd;break;case Pu:case Ou:case Ru:V=Ad;break;case Au:V=Wd;break;case"scroll":V=Nd;break;case"wheel":V=Jd;break;case"copy":case"cut":case"paste":V=Ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=du}var te=(t&4)!==0,qe=!te&&e==="scroll",b=te?R!==null?R+"Capture":null:R;te=[];for(var _=E,k;_!==null;){k=_;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,b!==null&&(D=Cn(_,b),D!=null&&te.push(Ys(_,D,k)))),qe)break;_=_.return}0<te.length&&(R=new V(R,Z,null,r,A),L.push({event:R,listeners:te}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",R&&r!==kn&&(Z=r.relatedTarget||r.fromElement)&&(br(Z)||Z[Pn]))break e;if((V||R)&&(R=A.window===A?A:(R=A.ownerDocument)?R.defaultView||R.parentWindow:window,V?(Z=r.relatedTarget||r.toElement,V=E,Z=Z?br(Z):null,Z!==null&&(qe=Nn(Z),Z!==qe||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(V=null,Z=E),V!==Z)){if(te=cu,D="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(te=du,D="onPointerLeave",b="onPointerEnter",_="pointer"),qe=V==null?R:ss(V),k=Z==null?R:ss(Z),R=new te(D,_+"leave",V,r,A),R.target=qe,R.relatedTarget=k,D=null,br(A)===E&&(te=new te(b,_+"enter",Z,r,A),te.target=k,te.relatedTarget=qe,D=te),qe=D,V&&Z)t:{for(te=V,b=Z,_=0,k=te;k;k=ns(k))_++;for(k=0,D=b;D;D=ns(D))k++;for(;0<_-k;)te=ns(te),_--;for(;0<k-_;)b=ns(b),k--;for(;_--;){if(te===b||b!==null&&te===b.alternate)break t;te=ns(te),b=ns(b)}te=null}else te=null;V!==null&&Mu(L,R,V,te,!1),Z!==null&&qe!==null&&Mu(L,qe,Z,te,!0)}}e:{if(R=E?ss(E):window,V=R.nodeName&&R.nodeName.toLowerCase(),V==="select"||V==="input"&&R.type==="file")var ne=nf;else if(vu(R))if(_u)ne=af;else{ne=sf;var ae=rf}else(V=R.nodeName)&&V.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(ne=of);if(ne&&(ne=ne(e,E))){wu(L,ne,r,A);break e}ae&&ae(e,R,E),e==="focusout"&&(ae=R._wrapperState)&&ae.controlled&&R.type==="number"&&ke(R,"number",R.value)}switch(ae=E?ss(E):window,e){case"focusin":(vu(ae)||ae.contentEditable==="true")&&(es=ae,ua=E,Gs=null);break;case"focusout":Gs=ua=es=null;break;case"mousedown":ca=!0;break;case"contextmenu":case"mouseup":case"dragend":ca=!1,Nu(L,r,A);break;case"selectionchange":if(cf)break;case"keydown":case"keyup":Nu(L,r,A)}var le;if(ia)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Zr?gu(e,r)&&(me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(me="onCompositionStart");me&&(fu&&r.locale!=="ko"&&(Zr||me!=="onCompositionStart"?me==="onCompositionEnd"&&Zr&&(le=lu()):(Qn=A,Zo="value"in Qn?Qn.value:Qn.textContent,Zr=!0)),ae=Fi(E,me),0<ae.length&&(me=new hu(me,e,null,r,A),L.push({event:me,listeners:ae}),le?me.data=le:(le=yu(r),le!==null&&(me.data=le)))),(le=Yd?Xd(e,r):Zd(e,r))&&(E=Fi(E,"onBeforeInput"),0<E.length&&(A=new hu("onBeforeInput","beforeinput",null,r,A),L.push({event:A,listeners:E}),A.data=le))}Uu(L,t)})}function Ys(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fi(e,t){for(var r=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Cn(e,r),h!=null&&o.unshift(Ys(e,h,l)),h=Cn(e,t),h!=null&&o.push(Ys(e,h,l))),e=e.return}return o}function ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mu(e,t,r,o,l){for(var h=t._reactName,f=[];r!==null&&r!==o;){var v=r,w=v.alternate,E=v.stateNode;if(w!==null&&w===o)break;v.tag===5&&E!==null&&(v=E,l?(w=Cn(r,h),w!=null&&f.unshift(Ys(r,w,v))):l||(w=Cn(r,h),w!=null&&f.push(Ys(r,w,v)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var pf=/\r\n?/g,mf=/\u0000|\uFFFD/g;function Bu(e){return(typeof e=="string"?e:""+e).replace(pf,`
`).replace(mf,"")}function Vi(e,t,r){if(t=Bu(t),Bu(e)!==t&&r)throw Error(s(425))}function qi(){}var ga=null,ya=null;function va(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wa=typeof setTimeout=="function"?setTimeout:void 0,gf=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,yf=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(e){return zu.resolve(null).then(e).catch(vf)}:wa;function vf(e){setTimeout(function(){throw e})}function _a(e,t){var r=t,o=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){e.removeChild(l),zs(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);zs(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rs=Math.random().toString(36).slice(2),pn="__reactFiber$"+rs,Xs="__reactProps$"+rs,Pn="__reactContainer$"+rs,xa="__reactEvents$"+rs,wf="__reactListeners$"+rs,_f="__reactHandles$"+rs;function br(e){var t=e[pn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pn]||r[pn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hu(e);e!==null;){if(r=e[pn])return r;e=Hu(e)}return t}e=r,r=e.parentNode}return null}function Zs(e){return e=e[pn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ss(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Wi(e){return e[Xs]||null}var Sa=[],is=-1;function Zn(e){return{current:e}}function Ue(e){0>is||(e.current=Sa[is],Sa[is]=null,is--)}function Ae(e,t){is++,Sa[is]=e.current,e.current=t}var er={},mt=Zn(er),bt=Zn(!1),kr=er;function os(e,t){var r=e.type.contextTypes;if(!r)return er;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in r)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function kt(e){return e=e.childContextTypes,e!=null}function Gi(){Ue(bt),Ue(mt)}function Ku(e,t,r){if(mt.current!==er)throw Error(s(168));Ae(mt,t),Ae(bt,r)}function Fu(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(s(108,je(e)||"Unknown",l));return q({},r,o)}function Ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,kr=mt.current,Ae(mt,e),Ae(bt,bt.current),!0}function Vu(e,t,r){var o=e.stateNode;if(!o)throw Error(s(169));r?(e=Fu(e,t,kr),o.__reactInternalMemoizedMergedChildContext=e,Ue(bt),Ue(mt),Ae(mt,e)):Ue(bt),Ae(bt,r)}var On=null,Qi=!1,ba=!1;function qu(e){On===null?On=[e]:On.push(e)}function xf(e){Qi=!0,qu(e)}function tr(){if(!ba&&On!==null){ba=!0;var e=0,t=_e;try{var r=On;for(_e=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}On=null,Qi=!1}catch(l){throw On!==null&&(On=On.slice(e+1)),ji($s,tr),l}finally{_e=t,ba=!1}}return null}var as=[],ls=0,Yi=null,Xi=0,zt=[],Ht=0,Er=null,Rn=1,An="";function Tr(e,t){as[ls++]=Xi,as[ls++]=Yi,Yi=e,Xi=t}function Wu(e,t,r){zt[Ht++]=Rn,zt[Ht++]=An,zt[Ht++]=Er,Er=e;var o=Rn;e=An;var l=32-St(o)-1;o&=~(1<<l),r+=1;var h=32-St(t)+l;if(30<h){var f=l-l%5;h=(o&(1<<f)-1).toString(32),o>>=f,l-=f,Rn=1<<32-St(t)+l|r<<l|o,An=h+e}else Rn=1<<h|r<<l|o,An=e}function ka(e){e.return!==null&&(Tr(e,1),Wu(e,1,0))}function Ea(e){for(;e===Yi;)Yi=as[--ls],as[ls]=null,Xi=as[--ls],as[ls]=null;for(;e===Er;)Er=zt[--Ht],zt[Ht]=null,An=zt[--Ht],zt[Ht]=null,Rn=zt[--Ht],zt[Ht]=null}var At=null,It=null,Me=!1,Xt=null;function Gu(e,t){var r=qt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ju(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,It=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Er!==null?{id:Rn,overflow:An}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,At=e,It=null,!0):!1;default:return!1}}function Ta(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ca(e){if(Me){var t=It;if(t){var r=t;if(!Ju(e,t)){if(Ta(e))throw Error(s(418));t=Xn(r.nextSibling);var o=At;t&&Ju(e,t)?Gu(o,r):(e.flags=e.flags&-4097|2,Me=!1,At=e)}}else{if(Ta(e))throw Error(s(418));e.flags=e.flags&-4097|2,Me=!1,At=e}}}function Qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function Zi(e){if(e!==At)return!1;if(!Me)return Qu(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!va(e.type,e.memoizedProps)),t&&(t=It)){if(Ta(e))throw Yu(),Error(s(418));for(;t;)Gu(e,t),t=Xn(t.nextSibling)}if(Qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){It=Xn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}It=null}}else It=At?Xn(e.stateNode.nextSibling):null;return!0}function Yu(){for(var e=It;e;)e=Xn(e.nextSibling)}function us(){It=At=null,Me=!1}function Na(e){Xt===null?Xt=[e]:Xt.push(e)}var Sf=Y.ReactCurrentBatchConfig;function ei(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var o=r.stateNode}if(!o)throw Error(s(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(f){var v=l.refs;f===null?delete v[h]:v[h]=f},t._stringRef=h,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function eo(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xu(e){var t=e._init;return t(e._payload)}function Zu(e){function t(b,_){if(e){var k=b.deletions;k===null?(b.deletions=[_],b.flags|=16):k.push(_)}}function r(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function o(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function l(b,_){return b=ur(b,_),b.index=0,b.sibling=null,b}function h(b,_,k){return b.index=k,e?(k=b.alternate,k!==null?(k=k.index,k<_?(b.flags|=2,_):k):(b.flags|=2,_)):(b.flags|=1048576,_)}function f(b){return e&&b.alternate===null&&(b.flags|=2),b}function v(b,_,k,D){return _===null||_.tag!==6?(_=wl(k,b.mode,D),_.return=b,_):(_=l(_,k),_.return=b,_)}function w(b,_,k,D){var ne=k.type;return ne===Q?A(b,_,k.props.children,D,k.key):_!==null&&(_.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Je&&Xu(ne)===_.type)?(D=l(_,k.props),D.ref=ei(b,_,k),D.return=b,D):(D=Eo(k.type,k.key,k.props,null,b.mode,D),D.ref=ei(b,_,k),D.return=b,D)}function E(b,_,k,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=_l(k,b.mode,D),_.return=b,_):(_=l(_,k.children||[]),_.return=b,_)}function A(b,_,k,D,ne){return _===null||_.tag!==7?(_=Ir(k,b.mode,D,ne),_.return=b,_):(_=l(_,k),_.return=b,_)}function L(b,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=wl(""+_,b.mode,k),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xe:return k=Eo(_.type,_.key,_.props,null,b.mode,k),k.ref=ei(b,null,_),k.return=b,k;case re:return _=_l(_,b.mode,k),_.return=b,_;case Je:var D=_._init;return L(b,D(_._payload),k)}if(Wt(_)||ie(_))return _=Ir(_,b.mode,k,null),_.return=b,_;eo(b,_)}return null}function R(b,_,k,D){var ne=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return ne!==null?null:v(b,_,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xe:return k.key===ne?w(b,_,k,D):null;case re:return k.key===ne?E(b,_,k,D):null;case Je:return ne=k._init,R(b,_,ne(k._payload),D)}if(Wt(k)||ie(k))return ne!==null?null:A(b,_,k,D,null);eo(b,k)}return null}function V(b,_,k,D,ne){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(k)||null,v(_,b,""+D,ne);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case xe:return b=b.get(D.key===null?k:D.key)||null,w(_,b,D,ne);case re:return b=b.get(D.key===null?k:D.key)||null,E(_,b,D,ne);case Je:var ae=D._init;return V(b,_,k,ae(D._payload),ne)}if(Wt(D)||ie(D))return b=b.get(k)||null,A(_,b,D,ne,null);eo(_,D)}return null}function Z(b,_,k,D){for(var ne=null,ae=null,le=_,me=_=0,at=null;le!==null&&me<k.length;me++){le.index>me?(at=le,le=null):at=le.sibling;var Ne=R(b,le,k[me],D);if(Ne===null){le===null&&(le=at);break}e&&le&&Ne.alternate===null&&t(b,le),_=h(Ne,_,me),ae===null?ne=Ne:ae.sibling=Ne,ae=Ne,le=at}if(me===k.length)return r(b,le),Me&&Tr(b,me),ne;if(le===null){for(;me<k.length;me++)le=L(b,k[me],D),le!==null&&(_=h(le,_,me),ae===null?ne=le:ae.sibling=le,ae=le);return Me&&Tr(b,me),ne}for(le=o(b,le);me<k.length;me++)at=V(le,b,me,k[me],D),at!==null&&(e&&at.alternate!==null&&le.delete(at.key===null?me:at.key),_=h(at,_,me),ae===null?ne=at:ae.sibling=at,ae=at);return e&&le.forEach(function(cr){return t(b,cr)}),Me&&Tr(b,me),ne}function te(b,_,k,D){var ne=ie(k);if(typeof ne!="function")throw Error(s(150));if(k=ne.call(k),k==null)throw Error(s(151));for(var ae=ne=null,le=_,me=_=0,at=null,Ne=k.next();le!==null&&!Ne.done;me++,Ne=k.next()){le.index>me?(at=le,le=null):at=le.sibling;var cr=R(b,le,Ne.value,D);if(cr===null){le===null&&(le=at);break}e&&le&&cr.alternate===null&&t(b,le),_=h(cr,_,me),ae===null?ne=cr:ae.sibling=cr,ae=cr,le=at}if(Ne.done)return r(b,le),Me&&Tr(b,me),ne;if(le===null){for(;!Ne.done;me++,Ne=k.next())Ne=L(b,Ne.value,D),Ne!==null&&(_=h(Ne,_,me),ae===null?ne=Ne:ae.sibling=Ne,ae=Ne);return Me&&Tr(b,me),ne}for(le=o(b,le);!Ne.done;me++,Ne=k.next())Ne=V(le,b,me,Ne.value,D),Ne!==null&&(e&&Ne.alternate!==null&&le.delete(Ne.key===null?me:Ne.key),_=h(Ne,_,me),ae===null?ne=Ne:ae.sibling=Ne,ae=Ne);return e&&le.forEach(function(tp){return t(b,tp)}),Me&&Tr(b,me),ne}function qe(b,_,k,D){if(typeof k=="object"&&k!==null&&k.type===Q&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case xe:e:{for(var ne=k.key,ae=_;ae!==null;){if(ae.key===ne){if(ne=k.type,ne===Q){if(ae.tag===7){r(b,ae.sibling),_=l(ae,k.props.children),_.return=b,b=_;break e}}else if(ae.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Je&&Xu(ne)===ae.type){r(b,ae.sibling),_=l(ae,k.props),_.ref=ei(b,ae,k),_.return=b,b=_;break e}r(b,ae);break}else t(b,ae);ae=ae.sibling}k.type===Q?(_=Ir(k.props.children,b.mode,D,k.key),_.return=b,b=_):(D=Eo(k.type,k.key,k.props,null,b.mode,D),D.ref=ei(b,_,k),D.return=b,b=D)}return f(b);case re:e:{for(ae=k.key;_!==null;){if(_.key===ae)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){r(b,_.sibling),_=l(_,k.children||[]),_.return=b,b=_;break e}else{r(b,_);break}else t(b,_);_=_.sibling}_=_l(k,b.mode,D),_.return=b,b=_}return f(b);case Je:return ae=k._init,qe(b,_,ae(k._payload),D)}if(Wt(k))return Z(b,_,k,D);if(ie(k))return te(b,_,k,D);eo(b,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(r(b,_.sibling),_=l(_,k),_.return=b,b=_):(r(b,_),_=wl(k,b.mode,D),_.return=b,b=_),f(b)):r(b,_)}return qe}var cs=Zu(!0),ec=Zu(!1),to=Zn(null),no=null,hs=null,ja=null;function Pa(){ja=hs=no=null}function Oa(e){var t=to.current;Ue(to),e._currentValue=t}function Ra(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function ds(e,t){no=e,ja=hs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Et=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(ja!==e)if(e={context:e,memoizedValue:t,next:null},hs===null){if(no===null)throw Error(s(308));hs=e,no.dependencies={lanes:0,firstContext:e}}else hs=hs.next=e;return t}var Cr=null;function Aa(e){Cr===null?Cr=[e]:Cr.push(e)}function tc(e,t,r,o){var l=t.interleaved;return l===null?(r.next=r,Aa(t)):(r.next=l.next,l.next=r),t.interleaved=r,In(e,o)}function In(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nr=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ce&2)!==0){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,In(e,r)}return l=o.interleaved,l===null?(t.next=t,Aa(o)):(t.next=l.next,l.next=t),o.interleaved=t,In(e,r)}function ro(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Ze(e,r)}}function rc(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?l=h=f:h=h.next=f,r=r.next}while(r!==null);h===null?l=h=t:h=h.next=t}else l=h=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function so(e,t,r,o){var l=e.updateQueue;nr=!1;var h=l.firstBaseUpdate,f=l.lastBaseUpdate,v=l.shared.pending;if(v!==null){l.shared.pending=null;var w=v,E=w.next;w.next=null,f===null?h=E:f.next=E,f=w;var A=e.alternate;A!==null&&(A=A.updateQueue,v=A.lastBaseUpdate,v!==f&&(v===null?A.firstBaseUpdate=E:v.next=E,A.lastBaseUpdate=w))}if(h!==null){var L=l.baseState;f=0,A=E=w=null,v=h;do{var R=v.lane,V=v.eventTime;if((o&R)===R){A!==null&&(A=A.next={eventTime:V,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var Z=e,te=v;switch(R=t,V=r,te.tag){case 1:if(Z=te.payload,typeof Z=="function"){L=Z.call(V,L,R);break e}L=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=te.payload,R=typeof Z=="function"?Z.call(V,L,R):Z,R==null)break e;L=q({},L,R);break e;case 2:nr=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,R=l.effects,R===null?l.effects=[v]:R.push(v))}else V={eventTime:V,lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},A===null?(E=A=V,w=L):A=A.next=V,f|=R;if(v=v.next,v===null){if(v=l.shared.pending,v===null)break;R=v,v=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);if(A===null&&(w=L),l.baseState=w,l.firstBaseUpdate=E,l.lastBaseUpdate=A,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);Pr|=f,e.lanes=f,e.memoizedState=L}}function sc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(s(191,l));l.call(o)}}}var ti={},mn=Zn(ti),ni=Zn(ti),ri=Zn(ti);function Nr(e){if(e===ti)throw Error(s(174));return e}function La(e,t){switch(Ae(ri,t),Ae(ni,e),Ae(mn,ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pr(t,e)}Ue(mn),Ae(mn,t)}function fs(){Ue(mn),Ue(ni),Ue(ri)}function ic(e){Nr(ri.current);var t=Nr(mn.current),r=pr(t,e.type);t!==r&&(Ae(ni,e),Ae(mn,r))}function $a(e){ni.current===e&&(Ue(mn),Ue(ni))}var Be=Zn(0);function io(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=[];function Da(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var oo=Y.ReactCurrentDispatcher,Ma=Y.ReactCurrentBatchConfig,jr=0,ze=null,tt=null,it=null,ao=!1,si=!1,ii=0,bf=0;function gt(){throw Error(s(321))}function Ba(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yt(e[r],t[r]))return!1;return!0}function za(e,t,r,o,l,h){if(jr=h,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oo.current=e===null||e.memoizedState===null?Cf:Nf,e=r(o,l),si){h=0;do{if(si=!1,ii=0,25<=h)throw Error(s(301));h+=1,it=tt=null,t.updateQueue=null,oo.current=jf,e=r(o,l)}while(si)}if(oo.current=co,t=tt!==null&&tt.next!==null,jr=0,it=tt=ze=null,ao=!1,t)throw Error(s(300));return e}function Ha(){var e=ii!==0;return ii=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ze.memoizedState=it=e:it=it.next=e,it}function Ft(){if(tt===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=it===null?ze.memoizedState:it.next;if(t!==null)it=t,tt=e;else{if(e===null)throw Error(s(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},it===null?ze.memoizedState=it=e:it=it.next=e}return it}function oi(e,t){return typeof t=="function"?t(e):t}function Ka(e){var t=Ft(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=tt,l=o.baseQueue,h=r.pending;if(h!==null){if(l!==null){var f=l.next;l.next=h.next,h.next=f}o.baseQueue=l=h,r.pending=null}if(l!==null){h=l.next,o=o.baseState;var v=f=null,w=null,E=h;do{var A=E.lane;if((jr&A)===A)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),o=E.hasEagerState?E.eagerState:e(o,E.action);else{var L={lane:A,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(v=w=L,f=o):w=w.next=L,ze.lanes|=A,Pr|=A}E=E.next}while(E!==null&&E!==h);w===null?f=o:w.next=v,Yt(o,t.memoizedState)||(Et=!0),t.memoizedState=o,t.baseState=f,t.baseQueue=w,r.lastRenderedState=o}if(e=r.interleaved,e!==null){l=e;do h=l.lane,ze.lanes|=h,Pr|=h,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Fa(e){var t=Ft(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,l=r.pending,h=t.memoizedState;if(l!==null){r.pending=null;var f=l=l.next;do h=e(h,f.action),f=f.next;while(f!==l);Yt(h,t.memoizedState)||(Et=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,o]}function oc(){}function ac(e,t){var r=ze,o=Ft(),l=t(),h=!Yt(o.memoizedState,l);if(h&&(o.memoizedState=l,Et=!0),o=o.queue,Va(cc.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||it!==null&&it.memoizedState.tag&1){if(r.flags|=2048,ai(9,uc.bind(null,r,o,l,t),void 0,null),ot===null)throw Error(s(349));(jr&30)!==0||lc(r,t,l)}return l}function lc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function uc(e,t,r,o){t.value=r,t.getSnapshot=o,hc(t)&&dc(e)}function cc(e,t,r){return r(function(){hc(t)&&dc(e)})}function hc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yt(e,r)}catch{return!0}}function dc(e){var t=In(e,1);t!==null&&nn(t,e,1,-1)}function fc(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t.queue=e,e=e.dispatch=Tf.bind(null,ze,e),[t.memoizedState,e]}function ai(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function pc(){return Ft().memoizedState}function lo(e,t,r,o){var l=gn();ze.flags|=e,l.memoizedState=ai(1|t,r,void 0,o===void 0?null:o)}function uo(e,t,r,o){var l=Ft();o=o===void 0?null:o;var h=void 0;if(tt!==null){var f=tt.memoizedState;if(h=f.destroy,o!==null&&Ba(o,f.deps)){l.memoizedState=ai(t,r,h,o);return}}ze.flags|=e,l.memoizedState=ai(1|t,r,h,o)}function mc(e,t){return lo(8390656,8,e,t)}function Va(e,t){return uo(2048,8,e,t)}function gc(e,t){return uo(4,2,e,t)}function yc(e,t){return uo(4,4,e,t)}function vc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wc(e,t,r){return r=r!=null?r.concat([e]):null,uo(4,4,vc.bind(null,t,e),r)}function qa(){}function _c(e,t){var r=Ft();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Ba(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function xc(e,t){var r=Ft();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Ba(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function Sc(e,t,r){return(jr&21)===0?(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=r):(Yt(r,t)||(r=G(),ze.lanes|=r,Pr|=r,e.baseState=!0),t)}function kf(e,t){var r=_e;_e=r!==0&&4>r?r:4,e(!0);var o=Ma.transition;Ma.transition={};try{e(!1),t()}finally{_e=r,Ma.transition=o}}function bc(){return Ft().memoizedState}function Ef(e,t,r){var o=ar(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},kc(e))Ec(t,r);else if(r=tc(e,t,r,o),r!==null){var l=_t();nn(r,e,o,l),Tc(r,t,o)}}function Tf(e,t,r){var o=ar(e),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(kc(e))Ec(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var f=t.lastRenderedState,v=h(f,r);if(l.hasEagerState=!0,l.eagerState=v,Yt(v,f)){var w=t.interleaved;w===null?(l.next=l,Aa(t)):(l.next=w.next,w.next=l),t.interleaved=l;return}}catch{}finally{}r=tc(e,t,l,o),r!==null&&(l=_t(),nn(r,e,o,l),Tc(r,t,o))}}function kc(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Ec(e,t){si=ao=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Tc(e,t,r){if((r&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Ze(e,r)}}var co={readContext:Kt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Cf={readContext:Kt,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:mc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,lo(4194308,4,vc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var r=gn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=gn();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Ef.bind(null,ze,e),[o.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:fc,useDebugValue:qa,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=fc(!1),t=e[0];return e=kf.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=ze,l=gn();if(Me){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),ot===null)throw Error(s(349));(jr&30)!==0||lc(o,t,r)}l.memoizedState=r;var h={value:r,getSnapshot:t};return l.queue=h,mc(cc.bind(null,o,h,e),[e]),o.flags|=2048,ai(9,uc.bind(null,o,h,r,t),void 0,null),r},useId:function(){var e=gn(),t=ot.identifierPrefix;if(Me){var r=An,o=Rn;r=(o&~(1<<32-St(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=ii++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=bf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nf={readContext:Kt,useCallback:_c,useContext:Kt,useEffect:Va,useImperativeHandle:wc,useInsertionEffect:gc,useLayoutEffect:yc,useMemo:xc,useReducer:Ka,useRef:pc,useState:function(){return Ka(oi)},useDebugValue:qa,useDeferredValue:function(e){var t=Ft();return Sc(t,tt.memoizedState,e)},useTransition:function(){var e=Ka(oi)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:oc,useSyncExternalStore:ac,useId:bc,unstable_isNewReconciler:!1},jf={readContext:Kt,useCallback:_c,useContext:Kt,useEffect:Va,useImperativeHandle:wc,useInsertionEffect:gc,useLayoutEffect:yc,useMemo:xc,useReducer:Fa,useRef:pc,useState:function(){return Fa(oi)},useDebugValue:qa,useDeferredValue:function(e){var t=Ft();return tt===null?t.memoizedState=e:Sc(t,tt.memoizedState,e)},useTransition:function(){var e=Fa(oi)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:oc,useSyncExternalStore:ac,useId:bc,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=q({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wa(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:q({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ho={isMounted:function(e){return(e=e._reactInternals)?Nn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=_t(),l=ar(e),h=Ln(o,l);h.payload=t,r!=null&&(h.callback=r),t=rr(e,h,l),t!==null&&(nn(t,e,l,o),ro(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=_t(),l=ar(e),h=Ln(o,l);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=rr(e,h,l),t!==null&&(nn(t,e,l,o),ro(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_t(),o=ar(e),l=Ln(r,o);l.tag=2,t!=null&&(l.callback=t),t=rr(e,l,o),t!==null&&(nn(t,e,o,r),ro(t,e,o))}};function Cc(e,t,r,o,l,h,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,f):t.prototype&&t.prototype.isPureReactComponent?!Ws(r,o)||!Ws(l,h):!0}function Nc(e,t,r){var o=!1,l=er,h=t.contextType;return typeof h=="object"&&h!==null?h=Kt(h):(l=kt(t)?kr:mt.current,o=t.contextTypes,h=(o=o!=null)?os(e,l):er),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ho,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function jc(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&ho.enqueueReplaceState(t,t.state,null)}function Ga(e,t,r,o){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Ia(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Kt(h):(h=kt(t)?kr:mt.current,l.context=os(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Wa(e,t,h,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ho.enqueueReplaceState(l,l.state,null),so(e,r,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var r="",o=t;do r+=Ee(o),o=o.return;while(o);var l=r}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function Ja(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Pf=typeof WeakMap=="function"?WeakMap:Map;function Pc(e,t,r){r=Ln(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){wo||(wo=!0,hl=o),Qa(e,t)},r}function Oc(e,t,r){r=Ln(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){Qa(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Qa(e,t),typeof o!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function Rc(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Pf;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),e=Ff.bind(null,e,t,r),t.then(e,e))}function Ac(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ic(e,t,r,o,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ln(-1,1),t.tag=2,rr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Of=Y.ReactCurrentOwner,Et=!1;function wt(e,t,r,o){t.child=e===null?ec(t,null,r,o):cs(t,e.child,r,o)}function Lc(e,t,r,o,l){r=r.render;var h=t.ref;return ds(t,l),o=za(e,t,r,o,h,l),r=Ha(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,$n(e,t,l)):(Me&&r&&ka(t),t.flags|=1,wt(e,t,o,l),t.child)}function $c(e,t,r,o,l){if(e===null){var h=r.type;return typeof h=="function"&&!vl(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,Uc(e,t,h,o,l)):(e=Eo(r.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var f=h.memoizedProps;if(r=r.compare,r=r!==null?r:Ws,r(f,o)&&e.ref===t.ref)return $n(e,t,l)}return t.flags|=1,e=ur(h,o),e.ref=t.ref,e.return=t,t.child=e}function Uc(e,t,r,o,l){if(e!==null){var h=e.memoizedProps;if(Ws(h,o)&&e.ref===t.ref)if(Et=!1,t.pendingProps=o=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,$n(e,t,l)}return Ya(e,t,r,o,l)}function Dc(e,t,r){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(gs,Lt),Lt|=r;else{if((r&1073741824)===0)return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(gs,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:r,Ae(gs,Lt),Lt|=o}else h!==null?(o=h.baseLanes|r,t.memoizedState=null):o=r,Ae(gs,Lt),Lt|=o;return wt(e,t,l,r),t.child}function Mc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ya(e,t,r,o,l){var h=kt(r)?kr:mt.current;return h=os(t,h),ds(t,l),r=za(e,t,r,o,h,l),o=Ha(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,$n(e,t,l)):(Me&&o&&ka(t),t.flags|=1,wt(e,t,r,l),t.child)}function Bc(e,t,r,o,l){if(kt(r)){var h=!0;Ji(t)}else h=!1;if(ds(t,l),t.stateNode===null)po(e,t),Nc(t,r,o),Ga(t,r,o,l),o=!0;else if(e===null){var f=t.stateNode,v=t.memoizedProps;f.props=v;var w=f.context,E=r.contextType;typeof E=="object"&&E!==null?E=Kt(E):(E=kt(r)?kr:mt.current,E=os(t,E));var A=r.getDerivedStateFromProps,L=typeof A=="function"||typeof f.getSnapshotBeforeUpdate=="function";L||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==o||w!==E)&&jc(t,f,o,E),nr=!1;var R=t.memoizedState;f.state=R,so(t,o,f,l),w=t.memoizedState,v!==o||R!==w||bt.current||nr?(typeof A=="function"&&(Wa(t,r,A,o),w=t.memoizedState),(v=nr||Cc(t,r,v,o,R,w,E))?(L||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),f.props=o,f.state=w,f.context=E,o=v):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,nc(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:Zt(t.type,v),f.props=E,L=t.pendingProps,R=f.context,w=r.contextType,typeof w=="object"&&w!==null?w=Kt(w):(w=kt(r)?kr:mt.current,w=os(t,w));var V=r.getDerivedStateFromProps;(A=typeof V=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==L||R!==w)&&jc(t,f,o,w),nr=!1,R=t.memoizedState,f.state=R,so(t,o,f,l);var Z=t.memoizedState;v!==L||R!==Z||bt.current||nr?(typeof V=="function"&&(Wa(t,r,V,o),Z=t.memoizedState),(E=nr||Cc(t,r,E,o,R,Z,w)||!1)?(A||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,Z,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,Z,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Z),f.props=o,f.state=Z,f.context=w,o=E):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),o=!1)}return Xa(e,t,r,o,h,l)}function Xa(e,t,r,o,l,h){Mc(e,t);var f=(t.flags&128)!==0;if(!o&&!f)return l&&Vu(t,r,!1),$n(e,t,h);o=t.stateNode,Of.current=t;var v=f&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&f?(t.child=cs(t,e.child,null,h),t.child=cs(t,null,v,h)):wt(e,t,v,h),t.memoizedState=o.state,l&&Vu(t,r,!0),t.child}function zc(e){var t=e.stateNode;t.pendingContext?Ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ku(e,t.context,!1),La(e,t.containerInfo)}function Hc(e,t,r,o,l){return us(),Na(l),t.flags|=256,wt(e,t,r,o),t.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function el(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kc(e,t,r){var o=t.pendingProps,l=Be.current,h=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(l&2)!==0),v?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ae(Be,l&1),e===null)return Ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(f=o.children,e=o.fallback,h?(o=t.mode,h=t.child,f={mode:"hidden",children:f},(o&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=f):h=To(f,o,0,null),e=Ir(e,o,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=el(r),t.memoizedState=Za,e):tl(t,f));if(l=e.memoizedState,l!==null&&(v=l.dehydrated,v!==null))return Rf(e,t,f,o,v,l,r);if(h){h=o.fallback,f=t.mode,l=e.child,v=l.sibling;var w={mode:"hidden",children:o.children};return(f&1)===0&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=w,t.deletions=null):(o=ur(l,w),o.subtreeFlags=l.subtreeFlags&14680064),v!==null?h=ur(v,h):(h=Ir(h,f,r,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,f=e.child.memoizedState,f=f===null?el(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},h.memoizedState=f,h.childLanes=e.childLanes&~r,t.memoizedState=Za,o}return h=e.child,e=h.sibling,o=ur(h,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function tl(e,t){return t=To({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fo(e,t,r,o){return o!==null&&Na(o),cs(t,e.child,null,r),e=tl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rf(e,t,r,o,l,h,f){if(r)return t.flags&256?(t.flags&=-257,o=Ja(Error(s(422))),fo(e,t,f,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=To({mode:"visible",children:o.children},l,0,null),h=Ir(h,l,f,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,(t.mode&1)!==0&&cs(t,e.child,null,f),t.child.memoizedState=el(f),t.memoizedState=Za,h);if((t.mode&1)===0)return fo(e,t,f,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var v=o.dgst;return o=v,h=Error(s(419)),o=Ja(h,o,void 0),fo(e,t,f,o)}if(v=(f&e.childLanes)!==0,Et||v){if(o=ot,o!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(o.suspendedLanes|f))!==0?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,In(e,l),nn(o,e,l,-1))}return yl(),o=Ja(Error(s(421))),fo(e,t,f,o)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Vf.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,It=Xn(l.nextSibling),At=t,Me=!0,Xt=null,e!==null&&(zt[Ht++]=Rn,zt[Ht++]=An,zt[Ht++]=Er,Rn=e.id,An=e.overflow,Er=t),t=tl(t,o.children),t.flags|=4096,t)}function Fc(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ra(e.return,t,r)}function nl(e,t,r,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=r,h.tailMode=l)}function Vc(e,t,r){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(wt(e,t,o.children,r),o=Be.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fc(e,r,t);else if(e.tag===19)Fc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ae(Be,o),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&io(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),nl(t,!1,l,r,h);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&io(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}nl(t,!0,r,null,h);break;case"together":nl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function po(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $n(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=ur(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ur(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Af(e,t,r){switch(t.tag){case 3:zc(t),us();break;case 5:ic(t);break;case 1:kt(t.type)&&Ji(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Ae(to,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Ae(Be,Be.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Kc(e,t,r):(Ae(Be,Be.current&1),e=$n(e,t,r),e!==null?e.sibling:null);Ae(Be,Be.current&1);break;case 19:if(o=(r&t.childLanes)!==0,(e.flags&128)!==0){if(o)return Vc(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ae(Be,Be.current),o)break;return null;case 22:case 23:return t.lanes=0,Dc(e,t,r)}return $n(e,t,r)}var qc,rl,Wc,Gc;qc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},rl=function(){},Wc=function(e,t,r,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,Nr(mn.current);var h=null;switch(r){case"input":l=Xe(e,l),o=Xe(e,o),h=[];break;case"select":l=q({},l,{value:void 0}),o=q({},o,{value:void 0}),h=[];break;case"textarea":l=xt(e,l),o=xt(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=qi)}dn(r,o);var f;r=null;for(E in l)if(!o.hasOwnProperty(E)&&l.hasOwnProperty(E)&&l[E]!=null)if(E==="style"){var v=l[E];for(f in v)v.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(u.hasOwnProperty(E)?h||(h=[]):(h=h||[]).push(E,null));for(E in o){var w=o[E];if(v=l!=null?l[E]:void 0,o.hasOwnProperty(E)&&w!==v&&(w!=null||v!=null))if(E==="style")if(v){for(f in v)!v.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in w)w.hasOwnProperty(f)&&v[f]!==w[f]&&(r||(r={}),r[f]=w[f])}else r||(h||(h=[]),h.push(E,r)),r=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,v=v?v.__html:void 0,w!=null&&v!==w&&(h=h||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(u.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&$e("scroll",e),h||v===w||(h=[])):(h=h||[]).push(E,w))}r&&(h=h||[]).push("style",r);var E=h;(t.updateQueue=E)&&(t.flags|=4)}},Gc=function(e,t,r,o){r!==o&&(t.flags|=4)};function li(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function If(e,t,r){var o=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return kt(t.type)&&Gi(),yt(t),null;case 3:return o=t.stateNode,fs(),Ue(bt),Ue(mt),Da(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Zi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Xt!==null&&(pl(Xt),Xt=null))),rl(e,t),yt(t),null;case 5:$a(t);var l=Nr(ri.current);if(r=t.type,e!==null&&t.stateNode!=null)Wc(e,t,r,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return yt(t),null}if(e=Nr(mn.current),Zi(t)){o=t.stateNode,r=t.type;var h=t.memoizedProps;switch(o[pn]=t,o[Xs]=h,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(l=0;l<Js.length;l++)$e(Js[l],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":xn(o,h),$e("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},$e("invalid",o);break;case"textarea":ln(o,h),$e("invalid",o)}dn(r,h),l=null;for(var f in h)if(h.hasOwnProperty(f)){var v=h[f];f==="children"?typeof v=="string"?o.textContent!==v&&(h.suppressHydrationWarning!==!0&&Vi(o.textContent,v,e),l=["children",v]):typeof v=="number"&&o.textContent!==""+v&&(h.suppressHydrationWarning!==!0&&Vi(o.textContent,v,e),l=["children",""+v]):u.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&$e("scroll",o)}switch(r){case"input":wn(o),ft(o,h,!0);break;case"textarea":wn(o),fr(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=qi)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zr(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=f.createElement(r,{is:o.is}):(e=f.createElement(r),r==="select"&&(f=e,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):e=f.createElementNS(e,r),e[pn]=t,e[Xs]=o,qc(e,t,!1,!1),t.stateNode=e;e:{switch(f=pt(r,o),r){case"dialog":$e("cancel",e),$e("close",e),l=o;break;case"iframe":case"object":case"embed":$e("load",e),l=o;break;case"video":case"audio":for(l=0;l<Js.length;l++)$e(Js[l],e);l=o;break;case"source":$e("error",e),l=o;break;case"img":case"image":case"link":$e("error",e),$e("load",e),l=o;break;case"details":$e("toggle",e),l=o;break;case"input":xn(e,o),l=Xe(e,o),$e("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=q({},o,{value:void 0}),$e("invalid",e);break;case"textarea":ln(e,o),l=xt(e,o),$e("invalid",e);break;default:l=o}dn(r,l),v=l;for(h in v)if(v.hasOwnProperty(h)){var w=v[h];h==="style"?hn(e,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&mr(e,w)):h==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&bn(e,w):typeof w=="number"&&bn(e,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?w!=null&&h==="onScroll"&&$e("scroll",e):w!=null&&U(e,h,w,f))}switch(r){case"input":wn(e),ft(e,o,!1);break;case"textarea":wn(e),fr(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Te(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?Mt(e,!!o.multiple,h,!1):o.defaultValue!=null&&Mt(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=qi)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)Gc(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(r=Nr(ri.current),Nr(mn.current),Zi(t)){if(o=t.stateNode,r=t.memoizedProps,o[pn]=t,(h=o.nodeValue!==r)&&(e=At,e!==null))switch(e.tag){case 3:Vi(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vi(o.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[pn]=t,t.stateNode=o}return yt(t),null;case 13:if(Ue(Be),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&It!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Yu(),us(),t.flags|=98560,h=!1;else if(h=Zi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[pn]=t}else us(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),h=!1}else Xt!==null&&(pl(Xt),Xt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?nt===0&&(nt=3):yl())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return fs(),rl(e,t),e===null&&Qs(t.stateNode.containerInfo),yt(t),null;case 10:return Oa(t.type._context),yt(t),null;case 17:return kt(t.type)&&Gi(),yt(t),null;case 19:if(Ue(Be),h=t.memoizedState,h===null)return yt(t),null;if(o=(t.flags&128)!==0,f=h.rendering,f===null)if(o)li(h,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=io(e),f!==null){for(t.flags|=128,li(h,!1),o=f.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)h=r,e=o,h.flags&=14680066,f=h.alternate,f===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=f.childLanes,h.lanes=f.lanes,h.child=f.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=f.memoizedProps,h.memoizedState=f.memoizedState,h.updateQueue=f.updateQueue,h.type=f.type,e=f.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ae(Be,Be.current&1|2),t.child}e=e.sibling}h.tail!==null&&Le()>ys&&(t.flags|=128,o=!0,li(h,!1),t.lanes=4194304)}else{if(!o)if(e=io(f),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),li(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Me)return yt(t),null}else 2*Le()-h.renderingStartTime>ys&&r!==1073741824&&(t.flags|=128,o=!0,li(h,!1),t.lanes=4194304);h.isBackwards?(f.sibling=t.child,t.child=f):(r=h.last,r!==null?r.sibling=f:t.child=f,h.last=f)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Le(),t.sibling=null,r=Be.current,Ae(Be,o?r&1|2:r&1),t):(yt(t),null);case 22:case 23:return gl(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(Lt&1073741824)!==0&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Lf(e,t){switch(Ea(t),t.tag){case 1:return kt(t.type)&&Gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),Ue(bt),Ue(mt),Da(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return $a(t),null;case 13:if(Ue(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Be),null;case 4:return fs(),null;case 10:return Oa(t.type._context),null;case 22:case 23:return gl(),null;case 24:return null;default:return null}}var mo=!1,vt=!1,$f=typeof WeakSet=="function"?WeakSet:Set,J=null;function ms(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Fe(e,t,o)}else r.current=null}function sl(e,t,r){try{r()}catch(o){Fe(e,t,o)}}var Jc=!1;function Uf(e,t){if(ga=Ii,e=Cu(),la(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var f=0,v=-1,w=-1,E=0,A=0,L=e,R=null;t:for(;;){for(var V;L!==r||l!==0&&L.nodeType!==3||(v=f+l),L!==h||o!==0&&L.nodeType!==3||(w=f+o),L.nodeType===3&&(f+=L.nodeValue.length),(V=L.firstChild)!==null;)R=L,L=V;for(;;){if(L===e)break t;if(R===r&&++E===l&&(v=f),R===h&&++A===o&&(w=f),(V=L.nextSibling)!==null)break;L=R,R=L.parentNode}L=V}r=v===-1||w===-1?null:{start:v,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(ya={focusedElem:e,selectionRange:r},Ii=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var te=Z.memoizedProps,qe=Z.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?te:Zt(t.type,te),qe);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(D){Fe(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return Z=Jc,Jc=!1,Z}function ui(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&sl(t,r,h)}l=l.next}while(l!==o)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Qc(e){var t=e.alternate;t!==null&&(e.alternate=null,Qc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[Xs],delete t[xa],delete t[wf],delete t[_f])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yc(e){return e.tag===5||e.tag===3||e.tag===4}function Xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ol(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=qi));else if(o!==4&&(e=e.child,e!==null))for(ol(e,t,r),e=e.sibling;e!==null;)ol(e,t,r),e=e.sibling}function al(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(al(e,t,r),e=e.sibling;e!==null;)al(e,t,r),e=e.sibling}var ut=null,en=!1;function sr(e,t,r){for(r=r.child;r!==null;)Zc(e,t,r),r=r.sibling}function Zc(e,t,r){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Fn,r)}catch{}switch(r.tag){case 5:vt||ms(r,t);case 6:var o=ut,l=en;ut=null,sr(e,t,r),ut=o,en=l,ut!==null&&(en?(e=ut,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ut.removeChild(r.stateNode));break;case 18:ut!==null&&(en?(e=ut,r=r.stateNode,e.nodeType===8?_a(e.parentNode,r):e.nodeType===1&&_a(e,r),zs(e)):_a(ut,r.stateNode));break;case 4:o=ut,l=en,ut=r.stateNode.containerInfo,en=!0,sr(e,t,r),ut=o,en=l;break;case 0:case 11:case 14:case 15:if(!vt&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,f=h.destroy;h=h.tag,f!==void 0&&((h&2)!==0||(h&4)!==0)&&sl(r,t,f),l=l.next}while(l!==o)}sr(e,t,r);break;case 1:if(!vt&&(ms(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(v){Fe(r,t,v)}sr(e,t,r);break;case 21:sr(e,t,r);break;case 22:r.mode&1?(vt=(o=vt)||r.memoizedState!==null,sr(e,t,r),vt=o):sr(e,t,r);break;default:sr(e,t,r)}}function eh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new $f),t.forEach(function(o){var l=qf.bind(null,e,o);r.has(o)||(r.add(o),o.then(l,l))})}}function tn(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var h=e,f=t,v=f;e:for(;v!==null;){switch(v.tag){case 5:ut=v.stateNode,en=!1;break e;case 3:ut=v.stateNode.containerInfo,en=!0;break e;case 4:ut=v.stateNode.containerInfo,en=!0;break e}v=v.return}if(ut===null)throw Error(s(160));Zc(h,f,l),ut=null,en=!1;var w=l.alternate;w!==null&&(w.return=null),l.return=null}catch(E){Fe(l,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)th(t,e),t=t.sibling}function th(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(t,e),yn(e),o&4){try{ui(3,e,e.return),go(3,e)}catch(te){Fe(e,e.return,te)}try{ui(5,e,e.return)}catch(te){Fe(e,e.return,te)}}break;case 1:tn(t,e),yn(e),o&512&&r!==null&&ms(r,r.return);break;case 5:if(tn(t,e),yn(e),o&512&&r!==null&&ms(r,r.return),e.flags&32){var l=e.stateNode;try{bn(l,"")}catch(te){Fe(e,e.return,te)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,f=r!==null?r.memoizedProps:h,v=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{v==="input"&&h.type==="radio"&&h.name!=null&&zn(l,h),pt(v,f);var E=pt(v,h);for(f=0;f<w.length;f+=2){var A=w[f],L=w[f+1];A==="style"?hn(l,L):A==="dangerouslySetInnerHTML"?mr(l,L):A==="children"?bn(l,L):U(l,A,L,E)}switch(v){case"input":ve(l,h);break;case"textarea":un(l,h);break;case"select":var R=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var V=h.value;V!=null?Mt(l,!!h.multiple,V,!1):R!==!!h.multiple&&(h.defaultValue!=null?Mt(l,!!h.multiple,h.defaultValue,!0):Mt(l,!!h.multiple,h.multiple?[]:"",!1))}l[Xs]=h}catch(te){Fe(e,e.return,te)}}break;case 6:if(tn(t,e),yn(e),o&4){if(e.stateNode===null)throw Error(s(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(te){Fe(e,e.return,te)}}break;case 3:if(tn(t,e),yn(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{zs(t.containerInfo)}catch(te){Fe(e,e.return,te)}break;case 4:tn(t,e),yn(e);break;case 13:tn(t,e),yn(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(cl=Le())),o&4&&eh(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(vt=(E=vt)||A,tn(t,e),vt=E):tn(t,e),yn(e),o&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!A&&(e.mode&1)!==0)for(J=e,A=e.child;A!==null;){for(L=J=A;J!==null;){switch(R=J,V=R.child,R.tag){case 0:case 11:case 14:case 15:ui(4,R,R.return);break;case 1:ms(R,R.return);var Z=R.stateNode;if(typeof Z.componentWillUnmount=="function"){o=R,r=R.return;try{t=o,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch(te){Fe(o,r,te)}}break;case 5:ms(R,R.return);break;case 22:if(R.memoizedState!==null){sh(L);continue}}V!==null?(V.return=R,J=V):sh(L)}A=A.sibling}e:for(A=null,L=e;;){if(L.tag===5){if(A===null){A=L;try{l=L.stateNode,E?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(v=L.stateNode,w=L.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,v.style.display=Hn("display",f))}catch(te){Fe(e,e.return,te)}}}else if(L.tag===6){if(A===null)try{L.stateNode.nodeValue=E?"":L.memoizedProps}catch(te){Fe(e,e.return,te)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;A===L&&(A=null),L=L.return}A===L&&(A=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:tn(t,e),yn(e),o&4&&eh(e);break;case 21:break;default:tn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Yc(r)){var o=r;break e}r=r.return}throw Error(s(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(bn(l,""),o.flags&=-33);var h=Xc(e);al(e,h,l);break;case 3:case 4:var f=o.stateNode.containerInfo,v=Xc(e);ol(e,v,f);break;default:throw Error(s(161))}}catch(w){Fe(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Df(e,t,r){J=e,nh(e)}function nh(e,t,r){for(var o=(e.mode&1)!==0;J!==null;){var l=J,h=l.child;if(l.tag===22&&o){var f=l.memoizedState!==null||mo;if(!f){var v=l.alternate,w=v!==null&&v.memoizedState!==null||vt;v=mo;var E=vt;if(mo=f,(vt=w)&&!E)for(J=l;J!==null;)f=J,w=f.child,f.tag===22&&f.memoizedState!==null?ih(l):w!==null?(w.return=f,J=w):ih(l);for(;h!==null;)J=h,nh(h),h=h.sibling;J=l,mo=v,vt=E}rh(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,J=h):rh(e)}}function rh(e){for(;J!==null;){var t=J;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:vt||go(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!vt)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Zt(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&sc(t,h,o);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sc(t,f,r)}break;case 5:var v=t.stateNode;if(r===null&&t.flags&4){r=v;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var A=E.memoizedState;if(A!==null){var L=A.dehydrated;L!==null&&zs(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}vt||t.flags&512&&il(t)}catch(R){Fe(t,t.return,R)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function sh(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function ih(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{go(4,t)}catch(w){Fe(t,r,w)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(w){Fe(t,l,w)}}var h=t.return;try{il(t)}catch(w){Fe(t,h,w)}break;case 5:var f=t.return;try{il(t)}catch(w){Fe(t,f,w)}}}catch(w){Fe(t,t.return,w)}if(t===e){J=null;break}var v=t.sibling;if(v!==null){v.return=t.return,J=v;break}J=t.return}}var Mf=Math.ceil,yo=Y.ReactCurrentDispatcher,ll=Y.ReactCurrentOwner,Vt=Y.ReactCurrentBatchConfig,Ce=0,ot=null,Qe=null,ct=0,Lt=0,gs=Zn(0),nt=0,ci=null,Pr=0,vo=0,ul=0,hi=null,Tt=null,cl=0,ys=1/0,Un=null,wo=!1,hl=null,ir=null,_o=!1,or=null,xo=0,di=0,dl=null,So=-1,bo=0;function _t(){return(Ce&6)!==0?Le():So!==-1?So:So=Le()}function ar(e){return(e.mode&1)===0?1:(Ce&2)!==0&&ct!==0?ct&-ct:Sf.transition!==null?(bo===0&&(bo=G()),bo):(e=_e,e!==0||(e=window.event,e=e===void 0?16:au(e.type)),e)}function nn(e,t,r,o){if(50<di)throw di=0,dl=null,Error(s(185));pe(e,r,o),((Ce&2)===0||e!==ot)&&(e===ot&&((Ce&2)===0&&(vo|=r),nt===4&&lr(e,ct)),Ct(e,o),r===1&&Ce===0&&(t.mode&1)===0&&(ys=Le()+500,Qi&&tr()))}function Ct(e,t){var r=e.callbackNode;de(e,t);var o=oe(e,e===ot?ct:0);if(o===0)r!==null&&xr(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&xr(r),t===1)e.tag===0?xf(ah.bind(null,e)):qu(ah.bind(null,e)),yf(function(){(Ce&6)===0&&tr()}),r=null;else{switch(Ot(o)){case 1:r=$s;break;case 4:r=Pi;break;case 16:r=jn;break;case 536870912:r=Oi;break;default:r=jn}r=mh(r,oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oh(e,t){if(So=-1,bo=0,(Ce&6)!==0)throw Error(s(327));var r=e.callbackNode;if(vs()&&e.callbackNode!==r)return null;var o=oe(e,e===ot?ct:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=ko(e,o);else{t=o;var l=Ce;Ce|=2;var h=uh();(ot!==e||ct!==t)&&(Un=null,ys=Le()+500,Rr(e,t));do try{Hf();break}catch(v){lh(e,v)}while(!0);Pa(),yo.current=h,Ce=l,Qe!==null?t=0:(ot=null,ct=0,t=nt)}if(t!==0){if(t===2&&(l=W(e),l!==0&&(o=l,t=fl(e,l))),t===1)throw r=ci,Rr(e,0),lr(e,o),Ct(e,Le()),r;if(t===6)lr(e,o);else{if(l=e.current.alternate,(o&30)===0&&!Bf(l)&&(t=ko(e,o),t===2&&(h=W(e),h!==0&&(o=h,t=fl(e,h))),t===1))throw r=ci,Rr(e,0),lr(e,o),Ct(e,Le()),r;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:Ar(e,Tt,Un);break;case 3:if(lr(e,o),(o&130023424)===o&&(t=cl+500-Le(),10<t)){if(oe(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){_t(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=wa(Ar.bind(null,e,Tt,Un),t);break}Ar(e,Tt,Un);break;case 4:if(lr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var f=31-St(o);h=1<<f,f=t[f],f>l&&(l=f),o&=~h}if(o=l,o=Le()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Mf(o/1960))-o,10<o){e.timeoutHandle=wa(Ar.bind(null,e,Tt,Un),o);break}Ar(e,Tt,Un);break;case 5:Ar(e,Tt,Un);break;default:throw Error(s(329))}}}return Ct(e,Le()),e.callbackNode===r?oh.bind(null,e):null}function fl(e,t){var r=hi;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=ko(e,t),e!==2&&(t=Tt,Tt=r,t!==null&&pl(t)),e}function pl(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function Bf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],h=l.getSnapshot;l=l.value;try{if(!Yt(h(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lr(e,t){for(t&=~ul,t&=~vo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-St(t),o=1<<r;e[r]=-1,t&=~o}}function ah(e){if((Ce&6)!==0)throw Error(s(327));vs();var t=oe(e,0);if((t&1)===0)return Ct(e,Le()),null;var r=ko(e,t);if(e.tag!==0&&r===2){var o=W(e);o!==0&&(t=o,r=fl(e,o))}if(r===1)throw r=ci,Rr(e,0),lr(e,t),Ct(e,Le()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ar(e,Tt,Un),Ct(e,Le()),null}function ml(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(ys=Le()+500,Qi&&tr())}}function Or(e){or!==null&&or.tag===0&&(Ce&6)===0&&vs();var t=Ce;Ce|=1;var r=Vt.transition,o=_e;try{if(Vt.transition=null,_e=1,e)return e()}finally{_e=o,Vt.transition=r,Ce=t,(Ce&6)===0&&tr()}}function gl(){Lt=gs.current,Ue(gs)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,gf(r)),Qe!==null)for(r=Qe.return;r!==null;){var o=r;switch(Ea(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Gi();break;case 3:fs(),Ue(bt),Ue(mt),Da();break;case 5:$a(o);break;case 4:fs();break;case 13:Ue(Be);break;case 19:Ue(Be);break;case 10:Oa(o.type._context);break;case 22:case 23:gl()}r=r.return}if(ot=e,Qe=e=ur(e.current,null),ct=Lt=t,nt=0,ci=null,ul=vo=Pr=0,Tt=hi=null,Cr!==null){for(t=0;t<Cr.length;t++)if(r=Cr[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,h=r.pending;if(h!==null){var f=h.next;h.next=l,o.next=f}r.pending=o}Cr=null}return e}function lh(e,t){do{var r=Qe;try{if(Pa(),oo.current=co,ao){for(var o=ze.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}ao=!1}if(jr=0,it=tt=ze=null,si=!1,ii=0,ll.current=null,r===null||r.return===null){nt=1,ci=t,Qe=null;break}e:{var h=e,f=r.return,v=r,w=t;if(t=ct,v.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,A=v,L=A.tag;if((A.mode&1)===0&&(L===0||L===11||L===15)){var R=A.alternate;R?(A.updateQueue=R.updateQueue,A.memoizedState=R.memoizedState,A.lanes=R.lanes):(A.updateQueue=null,A.memoizedState=null)}var V=Ac(f);if(V!==null){V.flags&=-257,Ic(V,f,v,h,t),V.mode&1&&Rc(h,E,t),t=V,w=E;var Z=t.updateQueue;if(Z===null){var te=new Set;te.add(w),t.updateQueue=te}else Z.add(w);break e}else{if((t&1)===0){Rc(h,E,t),yl();break e}w=Error(s(426))}}else if(Me&&v.mode&1){var qe=Ac(f);if(qe!==null){(qe.flags&65536)===0&&(qe.flags|=256),Ic(qe,f,v,h,t),Na(ps(w,v));break e}}h=w=ps(w,v),nt!==4&&(nt=2),hi===null?hi=[h]:hi.push(h),h=f;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var b=Pc(h,w,t);rc(h,b);break e;case 1:v=w;var _=h.type,k=h.stateNode;if((h.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ir===null||!ir.has(k)))){h.flags|=65536,t&=-t,h.lanes|=t;var D=Oc(h,v,t);rc(h,D);break e}}h=h.return}while(h!==null)}hh(r)}catch(ne){t=ne,Qe===r&&r!==null&&(Qe=r=r.return);continue}break}while(!0)}function uh(){var e=yo.current;return yo.current=co,e===null?co:e}function yl(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||(Pr&268435455)===0&&(vo&268435455)===0||lr(ot,ct)}function ko(e,t){var r=Ce;Ce|=2;var o=uh();(ot!==e||ct!==t)&&(Un=null,Rr(e,t));do try{zf();break}catch(l){lh(e,l)}while(!0);if(Pa(),Ce=r,yo.current=o,Qe!==null)throw Error(s(261));return ot=null,ct=0,nt}function zf(){for(;Qe!==null;)ch(Qe)}function Hf(){for(;Qe!==null&&!qo();)ch(Qe)}function ch(e){var t=ph(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?hh(e):Qe=t,ll.current=null}function hh(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=If(r,t,Lt),r!==null){Qe=r;return}}else{if(r=Lf(r,t),r!==null){r.flags&=32767,Qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,Qe=null;return}}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);nt===0&&(nt=5)}function Ar(e,t,r){var o=_e,l=Vt.transition;try{Vt.transition=null,_e=1,Kf(e,t,r,o)}finally{Vt.transition=l,_e=o}return null}function Kf(e,t,r,o){do vs();while(or!==null);if((Ce&6)!==0)throw Error(s(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(Ke(e,h),e===ot&&(Qe=ot=null,ct=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||_o||(_o=!0,mh(jn,function(){return vs(),null})),h=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||h){h=Vt.transition,Vt.transition=null;var f=_e;_e=1;var v=Ce;Ce|=4,ll.current=null,Uf(e,r),th(r,e),uf(ya),Ii=!!ga,ya=ga=null,e.current=r,Df(r),Wo(),Ce=v,_e=f,Vt.transition=h}else e.current=r;if(_o&&(_o=!1,or=e,xo=l),h=e.pendingLanes,h===0&&(ir=null),Jo(r.stateNode),Ct(e,Le()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],o(l.value,{componentStack:l.stack,digest:l.digest});if(wo)throw wo=!1,e=hl,hl=null,e;return(xo&1)!==0&&e.tag!==0&&vs(),h=e.pendingLanes,(h&1)!==0?e===dl?di++:(di=0,dl=e):di=0,tr(),null}function vs(){if(or!==null){var e=Ot(xo),t=Vt.transition,r=_e;try{if(Vt.transition=null,_e=16>e?16:e,or===null)var o=!1;else{if(e=or,or=null,xo=0,(Ce&6)!==0)throw Error(s(331));var l=Ce;for(Ce|=4,J=e.current;J!==null;){var h=J,f=h.child;if((J.flags&16)!==0){var v=h.deletions;if(v!==null){for(var w=0;w<v.length;w++){var E=v[w];for(J=E;J!==null;){var A=J;switch(A.tag){case 0:case 11:case 15:ui(8,A,h)}var L=A.child;if(L!==null)L.return=A,J=L;else for(;J!==null;){A=J;var R=A.sibling,V=A.return;if(Qc(A),A===E){J=null;break}if(R!==null){R.return=V,J=R;break}J=V}}}var Z=h.alternate;if(Z!==null){var te=Z.child;if(te!==null){Z.child=null;do{var qe=te.sibling;te.sibling=null,te=qe}while(te!==null)}}J=h}}if((h.subtreeFlags&2064)!==0&&f!==null)f.return=h,J=f;else e:for(;J!==null;){if(h=J,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ui(9,h,h.return)}var b=h.sibling;if(b!==null){b.return=h.return,J=b;break e}J=h.return}}var _=e.current;for(J=_;J!==null;){f=J;var k=f.child;if((f.subtreeFlags&2064)!==0&&k!==null)k.return=f,J=k;else e:for(f=_;J!==null;){if(v=J,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:go(9,v)}}catch(ne){Fe(v,v.return,ne)}if(v===f){J=null;break e}var D=v.sibling;if(D!==null){D.return=v.return,J=D;break e}J=v.return}}if(Ce=l,tr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Fn,e)}catch{}o=!0}return o}finally{_e=r,Vt.transition=t}}return!1}function dh(e,t,r){t=ps(r,t),t=Pc(e,t,1),e=rr(e,t,1),t=_t(),e!==null&&(pe(e,1,t),Ct(e,t))}function Fe(e,t,r){if(e.tag===3)dh(e,e,r);else for(;t!==null;){if(t.tag===3){dh(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ir===null||!ir.has(o))){e=ps(r,e),e=Oc(t,e,1),t=rr(t,e,1),e=_t(),t!==null&&(pe(t,1,e),Ct(t,e));break}}t=t.return}}function Ff(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&r,ot===e&&(ct&r)===r&&(nt===4||nt===3&&(ct&130023424)===ct&&500>Le()-cl?Rr(e,0):ul|=r),Ct(e,t)}function fh(e,t){t===0&&((e.mode&1)===0?t=1:(t=X,X<<=1,(X&130023424)===0&&(X=4194304)));var r=_t();e=In(e,t),e!==null&&(pe(e,t,r),Ct(e,r))}function Vf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fh(e,r)}function qf(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),fh(e,r)}var ph;ph=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)Et=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Et=!1,Af(e,t,r);Et=(e.flags&131072)!==0}else Et=!1,Me&&(t.flags&1048576)!==0&&Wu(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;po(e,t),e=t.pendingProps;var l=os(t,mt.current);ds(t,r),l=za(null,t,o,e,l,r);var h=Ha();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(o)?(h=!0,Ji(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ia(t),l.updater=ho,t.stateNode=l,l._reactInternals=t,Ga(t,o,e,r),t=Xa(null,t,o,!0,h,r)):(t.tag=0,Me&&h&&ka(t),wt(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(po(e,t),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=Gf(o),e=Zt(o,e),l){case 0:t=Ya(null,t,o,e,r);break e;case 1:t=Bc(null,t,o,e,r);break e;case 11:t=Lc(null,t,o,e,r);break e;case 14:t=$c(null,t,o,Zt(o.type,e),r);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Zt(o,l),Ya(e,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Zt(o,l),Bc(e,t,o,l,r);case 3:e:{if(zc(t),e===null)throw Error(s(387));o=t.pendingProps,h=t.memoizedState,l=h.element,nc(e,t),so(t,o,null,r);var f=t.memoizedState;if(o=f.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=ps(Error(s(423)),t),t=Hc(e,t,o,r,l);break e}else if(o!==l){l=ps(Error(s(424)),t),t=Hc(e,t,o,r,l);break e}else for(It=Xn(t.stateNode.containerInfo.firstChild),At=t,Me=!0,Xt=null,r=ec(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(us(),o===l){t=$n(e,t,r);break e}wt(e,t,o,r)}t=t.child}return t;case 5:return ic(t),e===null&&Ca(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,f=l.children,va(o,l)?f=null:h!==null&&va(o,h)&&(t.flags|=32),Mc(e,t),wt(e,t,f,r),t.child;case 6:return e===null&&Ca(t),null;case 13:return Kc(e,t,r);case 4:return La(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=cs(t,null,o,r):wt(e,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Zt(o,l),Lc(e,t,o,l,r);case 7:return wt(e,t,t.pendingProps,r),t.child;case 8:return wt(e,t,t.pendingProps.children,r),t.child;case 12:return wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,f=l.value,Ae(to,o._currentValue),o._currentValue=f,h!==null)if(Yt(h.value,f)){if(h.children===l.children&&!bt.current){t=$n(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var v=h.dependencies;if(v!==null){f=h.child;for(var w=v.firstContext;w!==null;){if(w.context===o){if(h.tag===1){w=Ln(-1,r&-r),w.tag=2;var E=h.updateQueue;if(E!==null){E=E.shared;var A=E.pending;A===null?w.next=w:(w.next=A.next,A.next=w),E.pending=w}}h.lanes|=r,w=h.alternate,w!==null&&(w.lanes|=r),Ra(h.return,r,t),v.lanes|=r;break}w=w.next}}else if(h.tag===10)f=h.type===t.type?null:h.child;else if(h.tag===18){if(f=h.return,f===null)throw Error(s(341));f.lanes|=r,v=f.alternate,v!==null&&(v.lanes|=r),Ra(f,r,t),f=h.sibling}else f=h.child;if(f!==null)f.return=h;else for(f=h;f!==null;){if(f===t){f=null;break}if(h=f.sibling,h!==null){h.return=f.return,f=h;break}f=f.return}h=f}wt(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,ds(t,r),l=Kt(l),o=o(l),t.flags|=1,wt(e,t,o,r),t.child;case 14:return o=t.type,l=Zt(o,t.pendingProps),l=Zt(o.type,l),$c(e,t,o,l,r);case 15:return Uc(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Zt(o,l),po(e,t),t.tag=1,kt(o)?(e=!0,Ji(t)):e=!1,ds(t,r),Nc(t,o,l),Ga(t,o,l,r),Xa(null,t,o,!0,e,r);case 19:return Vc(e,t,r);case 22:return Dc(e,t,r)}throw Error(s(156,t.tag))};function mh(e,t){return ji(e,t)}function Wf(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,r,o){return new Wf(e,t,r,o)}function vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gf(e){if(typeof e=="function")return vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===We)return 11;if(e===lt)return 14}return 2}function ur(e,t){var r=e.alternate;return r===null?(r=qt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Eo(e,t,r,o,l,h){var f=2;if(o=e,typeof e=="function")vl(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Q:return Ir(r.children,l,h,t);case Oe:f=8,l|=8;break;case De:return e=qt(12,r,t,l|2),e.elementType=De,e.lanes=h,e;case ge:return e=qt(13,r,t,l),e.elementType=ge,e.lanes=h,e;case Ge:return e=qt(19,r,t,l),e.elementType=Ge,e.lanes=h,e;case Pe:return To(r,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jt:f=10;break e;case Pt:f=9;break e;case We:f=11;break e;case lt:f=14;break e;case Je:f=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=qt(f,r,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function Ir(e,t,r,o){return e=qt(7,e,o,t),e.lanes=r,e}function To(e,t,r,o){return e=qt(22,e,o,t),e.elementType=Pe,e.lanes=r,e.stateNode={isHidden:!1},e}function wl(e,t,r){return e=qt(6,e,null,t),e.lanes=r,e}function _l(e,t,r){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jf(e,t,r,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z(0),this.expirationTimes=z(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function xl(e,t,r,o,l,h,f,v,w){return e=new Jf(e,t,r,v,w),t===1?(t=1,h===!0&&(t|=8)):t=0,h=qt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(h),e}function Qf(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function gh(e){if(!e)return er;e=e._reactInternals;e:{if(Nn(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(kt(r))return Fu(e,r,t)}return t}function yh(e,t,r,o,l,h,f,v,w){return e=xl(r,o,!0,e,l,h,f,v,w),e.context=gh(null),r=e.current,o=_t(),l=ar(r),h=Ln(o,l),h.callback=t??null,rr(r,h,l),e.current.lanes=l,pe(e,l,o),Ct(e,o),e}function Co(e,t,r,o){var l=t.current,h=_t(),f=ar(l);return r=gh(r),t.context===null?t.context=r:t.pendingContext=r,t=Ln(h,f),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=rr(l,t,f),e!==null&&(nn(e,l,f,h),ro(e,l,f)),f}function No(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Sl(e,t){vh(e,t),(e=e.alternate)&&vh(e,t)}function Yf(){return null}var wh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bl(e){this._internalRoot=e}jo.prototype.render=bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Co(e,t,null,null)},jo.prototype.unmount=bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Or(function(){Co(null,e,null,null)}),t[Pn]=null}};function jo(e){this._internalRoot=e}jo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jn.length&&t!==0&&t<Jn[r].priority;r++);Jn.splice(r,0,e),r===0&&iu(e)}};function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _h(){}function Xf(e,t,r,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var E=No(f);h.call(E)}}var f=yh(t,o,e,0,null,!1,!1,"",_h);return e._reactRootContainer=f,e[Pn]=f.current,Qs(e.nodeType===8?e.parentNode:e),Or(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var v=o;o=function(){var E=No(w);v.call(E)}}var w=xl(e,0,!1,null,null,!1,!1,"",_h);return e._reactRootContainer=w,e[Pn]=w.current,Qs(e.nodeType===8?e.parentNode:e),Or(function(){Co(t,w,r,o)}),w}function Oo(e,t,r,o,l){var h=r._reactRootContainer;if(h){var f=h;if(typeof l=="function"){var v=l;l=function(){var w=No(f);v.call(w)}}Co(t,f,e,l)}else f=Xf(r,t,e,l,o);return No(f)}Sr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ee(t.pendingLanes);r!==0&&(Ze(t,r|1),Ct(t,Le()),(Ce&6)===0&&(ys=Le()+500,tr()))}break;case 13:Or(function(){var o=In(e,1);if(o!==null){var l=_t();nn(o,e,1,l)}}),Sl(e,1)}},Jr=function(e){if(e.tag===13){var t=In(e,134217728);if(t!==null){var r=_t();nn(t,e,134217728,r)}Sl(e,134217728)}},et=function(e){if(e.tag===13){var t=ar(e),r=In(e,t);if(r!==null){var o=_t();nn(r,e,t,o)}Sl(e,t)}},Qt=function(){return _e},Ri=function(e,t){var r=_e;try{return _e=e,t()}finally{_e=r}},Gt=function(e,t,r){switch(t){case"input":if(ve(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var l=Wi(o);if(!l)throw Error(s(90));Bn(o),ve(o,l)}}}break;case"textarea":un(e,r);break;case"select":t=r.value,t!=null&&Mt(e,!!r.multiple,t,!1)}},Fr=ml,Os=Or;var Zf={usingClientEntryPoint:!1,Events:[Zs,ss,Wi,Tn,Kr,ml]},fi={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ep={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ci(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Yf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{Fn=Ro.inject(ep),Bt=Ro}catch{}}return Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zf,Nt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kl(t))throw Error(s(200));return Qf(e,t,null,r)},Nt.createRoot=function(e,t){if(!kl(e))throw Error(s(299));var r=!1,o="",l=wh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=xl(e,1,!1,null,null,r,!1,o,l),e[Pn]=t.current,Qs(e.nodeType===8?e.parentNode:e),new bl(t)},Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Ci(t),e=e===null?null:e.stateNode,e},Nt.flushSync=function(e){return Or(e)},Nt.hydrate=function(e,t,r){if(!Po(t))throw Error(s(200));return Oo(null,e,t,!0,r)},Nt.hydrateRoot=function(e,t,r){if(!kl(e))throw Error(s(405));var o=r!=null&&r.hydratedSources||null,l=!1,h="",f=wh;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=yh(t,null,e,1,r??null,l,!1,h,f),e[Pn]=t.current,Qs(e),o)for(e=0;e<o.length;e++)r=o[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new jo(t)},Nt.render=function(e,t,r){if(!Po(t))throw Error(s(200));return Oo(null,e,t,!1,r)},Nt.unmountComponentAtNode=function(e){if(!Po(e))throw Error(s(40));return e._reactRootContainer?(Or(function(){Oo(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1},Nt.unstable_batchedUpdates=ml,Nt.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Po(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Oo(e,t,r,!1,o)},Nt.version="18.3.1-next-f1338f8080-20240426",Nt}var Nh;function cp(){if(Nh)return Cl.exports;Nh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Cl.exports=up(),Cl.exports}var jh;function hp(){if(jh)return Ao;jh=1;var i=cp();return Ao.createRoot=i.createRoot,Ao.hydrateRoot=i.hydrateRoot,Ao}var dp=hp();function zo(i,n){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&n.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(i);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(i,a[u])&&(s[a[u]]=i[a[u]]);return s}function fp(i,n,s,a){function u(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function p(x){try{y(a.next(x))}catch(N){d(N)}}function m(x){try{y(a.throw(x))}catch(N){d(N)}}function y(x){x.done?c(x.value):u(x.value).then(p,m)}y((a=a.apply(i,n||[])).next())})}const pp=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class Zl extends Error{constructor(n,s="FunctionsError",a){super(n),this.name=s,this.context=a}}class mp extends Zl{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Ph extends Zl{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Oh extends Zl{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Bl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Bl||(Bl={}));class gp{constructor(n,{headers:s={},customFetch:a,region:u=Bl.Any}={}){this.url=n,this.headers=s,this.region=u,this.fetch=pp(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return fp(this,arguments,void 0,function*(s,a={}){var u;let c,d;try{const{headers:p,method:m,body:y,signal:x,timeout:N}=a;let T={},{region:C}=a;C||(C=this.region);const j=new URL(`${this.url}/${s}`);C&&C!=="any"&&(T["x-region"]=C,j.searchParams.set("forceFunctionRegion",C));let P;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",P=y):typeof y=="string"?(T["Content-Type"]="text/plain",P=y):typeof FormData<"u"&&y instanceof FormData?P=y:(T["Content-Type"]="application/json",P=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?P=JSON.stringify(y):P=y;let I=x;N&&(d=new AbortController,c=setTimeout(()=>d.abort(),N),x?(I=d.signal,x.addEventListener("abort",()=>d.abort())):I=d.signal);const H=yield this.fetch(j.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),p),body:P,signal:I}).catch(xe=>{throw new mp(xe)}),K=H.headers.get("x-relay-error");if(K&&K==="true")throw new Ph(H);if(!H.ok)throw new Oh(H);let U=((u=H.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),Y;return U==="application/json"?Y=yield H.json():U==="application/octet-stream"||U==="application/pdf"?Y=yield H.blob():U==="text/event-stream"?Y=H:U==="multipart/form-data"?Y=yield H.formData():Y=yield H.text(),{data:Y,error:null,response:H}}catch(p){return{data:null,error:p,response:p instanceof Oh||p instanceof Ph?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var yp=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},vp=class{constructor(i){var n,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let d=null,p=null,m=null,y=c.status,x=c.statusText;if(c.ok){var N,T;if(s.method!=="HEAD"){var C;const H=await c.text();H===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((C=s.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?p=H:p=JSON.parse(H))}const P=(N=s.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),I=(T=c.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");P&&I&&I.length>1&&(m=parseInt(I[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(p)&&(p.length>1?(d={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,y=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var j;const P=await c.text();try{d=JSON.parse(P),Array.isArray(d)&&c.status===404&&(p=[],d=null,y=200,x="OK")}catch{c.status===404&&P===""?(y=204,x="No Content"):d={message:P}}if(d&&s.isMaybeSingle&&(!(d==null||(j=d.details)===null||j===void 0)&&j.includes("0 rows"))&&(d=null,y=200,x="OK"),d&&s.shouldThrowOnError)throw new yp(d)}return{error:d,data:p,count:m,status:y,statusText:x}});return this.shouldThrowOnError||(u=u.catch(c=>{var d;let p="";const m=c==null?void 0:c.cause;if(m){var y,x,N,T;const j=(y=m==null?void 0:m.message)!==null&&y!==void 0?y:"",P=(x=m==null?void 0:m.code)!==null&&x!==void 0?x:"";p=`${(N=c==null?void 0:c.name)!==null&&N!==void 0?N:"FetchError"}: ${c==null?void 0:c.message}`,p+=`

Caused by: ${(T=m==null?void 0:m.name)!==null&&T!==void 0?T:"Error"}: ${j}`,P&&(p+=` (${P})`),m!=null&&m.stack&&(p+=`
${m.stack}`)}else{var C;p=(C=c==null?void 0:c.stack)!==null&&C!==void 0?C:""}return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(i,n)}returns(){return this}overrideTypes(){return this}},wp=class extends vp{select(i){let n=!1;const s=(i??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:s,foreignTable:a,referencedTable:u=a}={}){const c=u?`${u}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,n,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(c,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:s=!1,buffers:a=!1,wal:u=!1,format:c="text"}={}){var d;const p=[i?"analyze":null,n?"verbose":null,s?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const Rh=new RegExp("[,()]");var Es=class extends wp{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&Rh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${s})`),this}notIn(i,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&Rh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`not.in.(${s})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:s,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(i,`${u}fts${c}.${n}`),this}match(i){return Object.entries(i).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(i,n,s){return this.url.searchParams.append(i,`not.${n}.${s}`),this}or(i,{foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,n,s){return this.url.searchParams.append(i,`${n}.${s}`),this}},_p=class{constructor(i,{headers:n={},schema:s,fetch:a}){this.url=i,this.headers=new Headers(n),this.schema=s,this.fetch=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:s=!1,count:a}=n??{},u=s?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(y=>/\s/.test(y)&&!c?"":(y==='"'&&(c=!c),y)).join(""),{url:p,headers:m}=this.cloneRequestState();return p.searchParams.set("select",d),a&&m.append("Prefer",`count=${a}`),new Es({method:u,url:p,headers:m,schema:this.schema,fetch:this.fetch})}insert(i,{count:n,defaultToNull:s=!0}={}){var a;const u="POST",{url:c,headers:d}=this.cloneRequestState();if(n&&d.append("Prefer",`count=${n}`),s||d.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);c.searchParams.set("columns",m.join(","))}}return new Es({method:u,url:c,headers:d,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:n,ignoreDuplicates:s=!1,count:a,defaultToNull:u=!0}={}){var c;const d="POST",{url:p,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),a&&m.append("Prefer",`count=${a}`),u||m.append("Prefer","missing=default"),Array.isArray(i)){const y=i.reduce((x,N)=>x.concat(Object.keys(N)),[]);if(y.length>0){const x=[...new Set(y)].map(N=>`"${N}"`);p.searchParams.set("columns",x.join(","))}}return new Es({method:d,url:p,headers:m,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:n}={}){var s;const a="PATCH",{url:u,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Es({method:a,url:u,headers:c,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var n;const s="DELETE",{url:a,headers:u}=this.cloneRequestState();return i&&u.append("Prefer",`count=${i}`),new Es({method:s,url:a,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},xp=class sd{constructor(n,{headers:s={},schema:a,fetch:u}={}){this.url=n,this.headers=new Headers(s),this.schemaName=a,this.fetch=u}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _p(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new sd(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,s={},{head:a=!1,get:u=!1,count:c}={}){var d;let p;const m=new URL(`${this.url}/rpc/${n}`);let y;const x=C=>C!==null&&typeof C=="object"&&(!Array.isArray(C)||C.some(x)),N=a&&Object.values(s).some(x);N?(p="POST",y=s):a||u?(p=a?"HEAD":"GET",Object.entries(s).filter(([C,j])=>j!==void 0).map(([C,j])=>[C,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([C,j])=>{m.searchParams.append(C,j)})):(p="POST",y=s);const T=new Headers(this.headers);return N?T.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&T.set("Prefer",`count=${c}`),new Es({method:p,url:m,headers:T,schema:this.schemaName,body:y,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class Sp{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const u=a.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const a=this.getWebSocketConstructor();return new a(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const bp="2.90.1",kp=`realtime-js/${bp}`,id="1.0.0",Ep="2.0.0",Ah=id,zl=1e4,Tp=1e3,Cp=100;var hr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(hr||(hr={}));var rt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(rt||(rt={}));var on;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(on||(on={}));var Hl;(function(i){i.websocket="websocket"})(Hl||(Hl={}));var Dr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Dr||(Dr={}));class Np{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,s){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(n));let a=[n.join_ref,n.ref,n.topic,n.event,n.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(n){var s;return this._isArrayBuffer((s=n.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var s,a;const u=(a=(s=n.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var s,a;const u=(a=(s=n.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},d=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(n,s,a){var u,c;const d=n.topic,p=(u=n.ref)!==null&&u!==void 0?u:"",m=(c=n.join_ref)!==null&&c!==void 0?c:"",y=n.payload.event,x=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},N=Object.keys(x).length===0?"":JSON.stringify(x);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+y.length+N.length,C=new ArrayBuffer(this.HEADER_LENGTH+T);let j=new DataView(C),P=0;j.setUint8(P++,this.KINDS.userBroadcastPush),j.setUint8(P++,m.length),j.setUint8(P++,p.length),j.setUint8(P++,d.length),j.setUint8(P++,y.length),j.setUint8(P++,N.length),j.setUint8(P++,s),Array.from(m,H=>j.setUint8(P++,H.charCodeAt(0))),Array.from(p,H=>j.setUint8(P++,H.charCodeAt(0))),Array.from(d,H=>j.setUint8(P++,H.charCodeAt(0))),Array.from(y,H=>j.setUint8(P++,H.charCodeAt(0))),Array.from(N,H=>j.setUint8(P++,H.charCodeAt(0)));var I=new Uint8Array(C.byteLength+a.byteLength);return I.set(new Uint8Array(C),0),I.set(new Uint8Array(a),C.byteLength),I.buffer}decode(n,s){if(this._isArrayBuffer(n)){let a=this._binaryDecode(n);return s(a)}if(typeof n=="string"){const a=JSON.parse(n),[u,c,d,p,m]=a;return s({join_ref:u,ref:c,topic:d,event:p,payload:m})}return s({})}_binaryDecode(n){const s=new DataView(n),a=s.getUint8(0),u=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,s,u)}}_decodeUserBroadcast(n,s,a){const u=s.getUint8(1),c=s.getUint8(2),d=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const y=a.decode(n.slice(m,m+u));m=m+u;const x=a.decode(n.slice(m,m+c));m=m+c;const N=a.decode(n.slice(m,m+d));m=m+d;const T=n.slice(m,n.byteLength),C=p===this.JSON_ENCODING?JSON.parse(a.decode(T)):T,j={type:this.BROADCAST_EVENT,event:x,payload:C};return d>0&&(j.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(n){var s;return n instanceof ArrayBuffer||((s=n==null?void 0:n.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(n,s){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([a])=>s.includes(a)))}}class od{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ie||(Ie={}));const Ih=(i,n,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return n?Object.keys(n).reduce((c,d)=>(c[d]=jp(d,i,n,u),c),{}):{}},jp=(i,n,s,a)=>{const u=n.find(p=>p.name===i),c=u==null?void 0:u.type,d=s[i];return c&&!a.includes(c)?ad(c,d):Kl(d)},ad=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return Ap(n,s)}switch(i){case Ie.bool:return Pp(n);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return Op(n);case Ie.json:case Ie.jsonb:return Rp(n);case Ie.timestamp:return Ip(n);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return Kl(n);default:return Kl(n)}},Kl=i=>i,Pp=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Op=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},Rp=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},Ap=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,a=i[s];if(i[0]==="{"&&a==="}"){let c;const d=i.slice(1,s);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(p=>ad(n,p))}return i},Ip=i=>typeof i=="string"?i.replace(" ","T"):i,ld=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Pl{constructor(n,s,a={},u=zl){this.channel=n,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var a;return this._hasReceived(n)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Lh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Lh||(Lh={}));class yi{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:c,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yi.syncState(this.state,u,c,d),this.pendingDiffs.forEach(m=>{this.state=yi.syncDiff(this.state,m,c,d)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},u=>{const{onJoin:c,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=yi.syncDiff(this.state,u,c,d),p())}),this.onJoin((u,c,d)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:d})}),this.onLeave((u,c,d)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,a,u){const c=this.cloneDeep(n),d=this.transformState(s),p={},m={};return this.map(c,(y,x)=>{d[y]||(m[y]=x)}),this.map(d,(y,x)=>{const N=c[y];if(N){const T=x.map(I=>I.presence_ref),C=N.map(I=>I.presence_ref),j=x.filter(I=>C.indexOf(I.presence_ref)<0),P=N.filter(I=>T.indexOf(I.presence_ref)<0);j.length>0&&(p[y]=j),P.length>0&&(m[y]=P)}else p[y]=x}),this.syncDiff(c,{joins:p,leaves:m},a,u)}static syncDiff(n,s,a,u){const{joins:c,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(c,(p,m)=>{var y;const x=(y=n[p])!==null&&y!==void 0?y:[];if(n[p]=this.cloneDeep(m),x.length>0){const N=n[p].map(C=>C.presence_ref),T=x.filter(C=>N.indexOf(C.presence_ref)<0);n[p].unshift(...T)}a(p,x,m)}),this.map(d,(p,m)=>{let y=n[p];if(!y)return;const x=m.map(N=>N.presence_ref);y=y.filter(N=>x.indexOf(N.presence_ref)<0),n[p]=y,u(p,y,m),y.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(a=>s(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,a)=>{const u=n[a];return"metas"in u?s[a]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=u,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $h;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})($h||($h={}));var vi;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(vi||(vi={}));var Dn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Ns{constructor(n,s={config:{}},a){var u,c;if(this.topic=n,this.params=s,this.socket=a,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Pl(this,on.join,this.params,this.timeout),this.rejoinTimer=new od(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(on.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new yi(this),this.broadcastEndpointURL=ld(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var a,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==rt.closed){const{config:{broadcast:d,presence:p,private:m}}=this.params,y=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(C=>C.filter))!==null&&u!==void 0?u:[],x=!!this.bindings[vi.PRESENCE]&&this.bindings[vi.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,N={},T={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(C=>n==null?void 0:n(Dn.CHANNEL_ERROR,C)),this._onClose(()=>n==null?void 0:n(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:T},N)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:C})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){n==null||n(Dn.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,I=(j=P==null?void 0:P.length)!==null&&j!==void 0?j:0,H=[];for(let K=0;K<I;K++){const U=P[K],{filter:{event:Y,schema:xe,table:re,filter:Q}}=U,Oe=C&&C[K];if(Oe&&Oe.event===Y&&Ns.isFilterValueEqual(Oe.schema,xe)&&Ns.isFilterValueEqual(Oe.table,re)&&Ns.isFilterValueEqual(Oe.filter,Q))H.push(Object.assign(Object.assign({},U),{id:Oe.id}));else{this.unsubscribe(),this.state=rt.errored,n==null||n(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,n&&n(Dn.SUBSCRIBED);return}}).receive("error",C=>{this.state=rt.errored,n==null||n(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,a){return this.state===rt.joined&&n===vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,s,a)}async httpSend(n,s,a={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const y=await p.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(n,s={}){var a,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,p,m;const y=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=rt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(on.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new Pl(this,on.leave,{},n),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rt.closed,this.bindings={}}async _fetchWithTimeout(n,s,a){const u=new AbortController,c=setTimeout(()=>u.abort(),a),d=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),d}_push(n,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Pl(this,n,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Cp){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,a){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,a){var u,c;const d=n.toLocaleLowerCase(),{close:p,error:m,leave:y,join:x}=on;if(a&&[p,m,y,x].indexOf(d)>=0&&a!==this._joinRef())return;let T=this._onMessage(d,s,a);if(s&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(C=>{var j,P,I;return((j=C.filter)===null||j===void 0?void 0:j.event)==="*"||((I=(P=C.filter)===null||P===void 0?void 0:P.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===d}).map(C=>C.callback(T,a)):(c=this.bindings[d])===null||c===void 0||c.filter(C=>{var j,P,I,H,K,U,Y,xe;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in C){const re=C.id,Q=(j=C.filter)===null||j===void 0?void 0:j.event;return re&&((P=s.ids)===null||P===void 0?void 0:P.includes(re))&&(Q==="*"||(Q==null?void 0:Q.toLocaleLowerCase())===((I=s.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))&&(!(!((H=C.filter)===null||H===void 0)&&H.table)||C.filter.table===((K=s.data)===null||K===void 0?void 0:K.table))}else{const re=(Y=(U=C==null?void 0:C.filter)===null||U===void 0?void 0:U.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return re==="*"||re===((xe=s==null?void 0:s.event)===null||xe===void 0?void 0:xe.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===d}).map(C=>{if(typeof T=="object"&&"ids"in T){const j=T.data,{schema:P,table:I,commit_timestamp:H,type:K,errors:U}=j;T=Object.assign(Object.assign({},{schema:P,table:I,commit_timestamp:H,eventType:K,new:{},old:{},errors:U}),this._getPayloadRecords(j))}C.callback(T,a)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,a){const u=n.toLocaleLowerCase(),c={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(n,s){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Ns.isEqual(u.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const a in n)if(n[a]!==s[a])return!1;return!0}static isFilterValueEqual(n,s){return(n??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(on.close,{},n)}_onError(n){this._on(on.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Ih(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Ih(n.columns,n.old_record)),s}}const Ol=()=>{},Io={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lp=[1e3,2e3,5e3,1e4],$p=1e4,Up=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dp{constructor(n,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=Io.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ol,this.ref=0,this.reconnectTimer=null,this.vsn=Ah,this.logger=Ol,this.conn=null,this.sendBuffer=[],this.serializer=new Np,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${Hl.websocket}`,this.httpEndpoint=ld(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,a){this.logger(n,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case hr.connecting:return Dr.Connecting;case hr.open:return Dr.Open;case hr.closing:return Dr.Closing;default:return Dr.Closed}}isConnected(){return this.connectionState()===Dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const a=`realtime:${n}`,u=this.getChannels().find(c=>c.topic===a);if(u)return u;{const c=new Ns(`realtime:${n}`,s,this);return this.channels.push(c),c}}push(n){const{topic:s,event:a,payload:u,ref:c}=n,d=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${a} (${c})`,u),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Tp,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Io.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",y)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:c,ref:d}=s,p=d?`(${d})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${u} ${p}`.trim(),c),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(u,c,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===hr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===hr.open||this.conn.readyState===hr.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(on.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const a=n.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${n}${a}${u}`}_workerObjectUrl(n){let s;if(n)s=n;else{const a=new Blob([Up],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s,a=!1;if(n)s=n,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const c={access_token:s,version:kp};s&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(on.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new od(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Io.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,a,u,c,d,p,m,y,x,N,T,C;switch(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(a=n==null?void 0:n.timeout)!==null&&a!==void 0?a:zl,this.heartbeatIntervalMs=(u=n==null?void 0:n.heartbeatIntervalMs)!==null&&u!==void 0?u:Io.HEARTBEAT_INTERVAL,this.worker=(c=n==null?void 0:n.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=n==null?void 0:n.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=n==null?void 0:n.heartbeatCallback)!==null&&p!==void 0?p:Ol,this.vsn=(m=n==null?void 0:n.vsn)!==null&&m!==void 0?m:Ah,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n==null?void 0:n.reconnectAfterMs)!==null&&y!==void 0?y:(j=>Lp[j-1]||$p),this.vsn){case id:this.encode=(x=n==null?void 0:n.encode)!==null&&x!==void 0?x:((j,P)=>P(JSON.stringify(j))),this.decode=(N=n==null?void 0:n.decode)!==null&&N!==void 0?N:((j,P)=>P(JSON.parse(j)));break;case Ep:this.encode=(T=n==null?void 0:n.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(C=n==null?void 0:n.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var wi=class extends Error{constructor(i,n){var s;super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((s=n.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Mp(i,n,s){const a=new URL(n,i);if(s)for(const[u,c]of Object.entries(s))c!==void 0&&a.searchParams.set(u,c);return a.toString()}async function Bp(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function zp(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:u,body:c,headers:d}){const p=Mp(i.baseUrl,a,u),m=await Bp(i.auth),y=await n(p,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...m,...d},body:c?JSON.stringify(c):void 0}),x=await y.text(),N=(y.headers.get("content-type")||"").includes("application/json"),T=N&&x?JSON.parse(x):x;if(!y.ok){const C=N?T:void 0,j=C==null?void 0:C.error;throw new wi((j==null?void 0:j.message)??`Request failed with status ${y.status}`,{status:y.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:C})}return{status:y.status,headers:y.headers,data:T}}}}function Lo(i){return i.join("")}var Hp=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:Lo(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(i,n){const s={namespace:i.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lo(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lo(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lo(i.namespace)}`}),!0}catch(n){if(n instanceof wi&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(s){if(s instanceof wi&&s.status===409)return;throw s}}};function ws(i){return i.join("")}var Kp=class{constructor(i,n="",s){this.client=i,this.prefix=n,this.accessDelegation=s}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables`,body:n,headers:s})).data.metadata}async updateTable(i,n){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ws(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(s){if(s instanceof wi&&s.status===404)return!1;throw s}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(s){if(s instanceof wi&&s.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw s}}},Fp=class{constructor(i){var a;let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const s=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=zp({baseUrl:s,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(a=i.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new Hp(this.client,n),this.tableOps=new Kp(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},Ho=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function He(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Vp=class extends Ho{constructor(i,n,s){super(i),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Fl=class extends Ho{constructor(i,n){super(i),this.name="StorageUnknownError",this.originalError=n}};const eu=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),qp=()=>Response,Vl=i=>{if(Array.isArray(i))return i.map(s=>Vl(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[u]=Vl(a)}),n},Wp=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Gp=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function _i(i){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_i(i)}function Jp(i,n){if(_i(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var a=s.call(i,n);if(_i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Qp(i){var n=Jp(i,"string");return _i(n)=="symbol"?n:n+""}function Yp(i,n,s){return(n=Qp(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function Uh(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,a)}return s}function he(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Uh(Object(s),!0).forEach(function(a){Yp(i,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Uh(Object(s)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(s,a))})}return i}const Rl=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},Xp=async(i,n,s)=>{i instanceof await qp()&&!(s!=null&&s.noResolveJson)?i.json().then(a=>{const u=i.status||500,c=(a==null?void 0:a.statusCode)||u+"";n(new Vp(Rl(a),u,c))}).catch(a=>{n(new Fl(Rl(a),a))}):n(new Fl(Rl(i),i))},Zp=(i,n,s,a)=>{const u={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"||!a?u:(Wp(a)?(u.headers=he({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(a)):u.body=a,n!=null&&n.duplex&&(u.duplex=n.duplex),he(he({},u),s))};async function Ei(i,n,s,a,u,c){return new Promise((d,p)=>{i(s,Zp(n,a,u,c)).then(m=>{if(!m.ok)throw m;return a!=null&&a.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>Xp(m,p,a))})}async function xi(i,n,s,a){return Ei(i,"GET",n,s,a)}async function sn(i,n,s,a,u){return Ei(i,"POST",n,a,u,s)}async function ql(i,n,s,a,u){return Ei(i,"PUT",n,a,u,s)}async function em(i,n,s,a){return Ei(i,"HEAD",n,he(he({},s),{},{noResolveJson:!0}),a)}async function tu(i,n,s,a,u){return Ei(i,"DELETE",n,a,u,s)}var tm=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(He(n))return{data:null,error:n};throw n}}};let ud;ud=Symbol.toStringTag;var nm=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[ud]="BlobDownloadBuilder",this.promise=null}asStream(){return new tm(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(He(n))return{data:null,error:n};throw n}}};const rm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var sm=class{constructor(i,n={},s,a){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.bucketId=s,this.fetch=eu(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,n,s,a){var u=this;try{let c;const d=he(he({},Dh),a);let p=he(he({},u.headers),i==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),m&&c.append("metadata",u.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),m&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(m))):(c=s,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),a!=null&&a.headers&&(p=he(he({},p),a.headers));const y=u._removeEmptyFolders(n),x=u._getFinalPath(y),N=await(i=="PUT"?ql:sn)(u.fetch,`${u.url}/object/${x}`,c,he({headers:p},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:N.Id,fullPath:N.Key},error:null}}catch(c){if(u.shouldThrowOnError)throw c;if(He(c))return{data:null,error:c};throw c}}async upload(i,n,s){return this.uploadOrUpdate("POST",i,n,s)}async uploadToSignedUrl(i,n,s,a){var u=this;const c=u._removeEmptyFolders(i),d=u._getFinalPath(c),p=new URL(u.url+`/object/upload/sign/${d}`);p.searchParams.set("token",n);try{let m;const y=he({upsert:Dh.upsert},a),x=he(he({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",y.cacheControl)):(m=s,x["cache-control"]=`max-age=${y.cacheControl}`,x["content-type"]=y.contentType),{data:{path:c,fullPath:(await ql(u.fetch,p.toString(),m,{headers:x})).Key},error:null}}catch(m){if(u.shouldThrowOnError)throw m;if(He(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(i,n){var s=this;try{let a=s._getFinalPath(i);const u=he({},s.headers);n!=null&&n.upsert&&(u["x-upsert"]="true");const c=await sn(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:u}),d=new URL(s.url+c.url),p=d.searchParams.get("token");if(!p)throw new Ho("No token returned by API");return{data:{signedUrl:d.toString(),path:i,token:p},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async update(i,n,s){return this.uploadOrUpdate("PUT",i,n,s)}async move(i,n,s){var a=this;try{return{data:await sn(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:i,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:a.headers}),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(He(u))return{data:null,error:u};throw u}}async copy(i,n,s){var a=this;try{return{data:{path:(await sn(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:i,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:a.headers})).Key},error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(He(u))return{data:null,error:u};throw u}}async createSignedUrl(i,n,s){var a=this;try{let u=a._getFinalPath(i),c=await sn(a.fetch,`${a.url}/object/sign/${u}`,he({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:a.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${a.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(He(u))return{data:null,error:u};throw u}}async createSignedUrls(i,n,s){var a=this;try{const u=await sn(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:n,paths:i},{headers:a.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:u.map(d=>he(he({},d),{},{signedUrl:d.signedURL?encodeURI(`${a.url}${d.signedURL}${c}`):null})),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(He(u))return{data:null,error:u};throw u}}download(i,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"",c=this._getFinalPath(i),d=()=>xi(this.fetch,`${this.url}/${s}/${c}${u}`,{headers:this.headers,noResolveJson:!0});return new nm(d,this.shouldThrowOnError)}async info(i){var n=this;const s=n._getFinalPath(i);try{return{data:Vl(await xi(n.fetch,`${n.url}/object/info/${s}`,{headers:n.headers})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async exists(i){var n=this;const s=n._getFinalPath(i);try{return await em(n.fetch,`${n.url}/object/${s}`,{headers:n.headers}),{data:!0,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(He(a)&&a instanceof Fl){const u=a.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:a}}throw a}}getPublicUrl(i,n){const s=this._getFinalPath(i),a=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&a.push(u);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${p}`)}}}async remove(i){var n=this;try{return{data:await tu(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async list(i,n,s){var a=this;try{const u=he(he(he({},rm),n),{},{prefix:i||""});return{data:await sn(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},s),error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(He(u))return{data:null,error:u};throw u}}async listV2(i,n){var s=this;try{const a=he({},i);return{data:await sn(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},n),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const cd="2.90.1",hd={"X-Client-Info":`storage-js/${cd}`};var im=class{constructor(i,n={},s,a){this.shouldThrowOnError=!1;const u=new URL(i);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=he(he({},hd),n),this.fetch=eu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var n=this;try{const s=n.listBucketOptionsToQueryString(i);return{data:await xi(n.fetch,`${n.url}/bucket${s}`,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async getBucket(i){var n=this;try{return{data:await xi(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async createBucket(i,n={public:!1}){var s=this;try{return{data:await sn(s.fetch,`${s.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async updateBucket(i,n){var s=this;try{return{data:await ql(s.fetch,`${s.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(He(a))return{data:null,error:a};throw a}}async emptyBucket(i){var n=this;try{return{data:await sn(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async deleteBucket(i){var n=this;try{return{data:await tu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},om=class{constructor(i,n={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=he(he({},hd),n),this.fetch=eu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await sn(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async listBuckets(i){var n=this;try{const s=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&s.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&s.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&s.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&s.set("sortOrder",i.sortOrder),i!=null&&i.search&&s.set("search",i.search);const a=s.toString(),u=a?`${n.url}/bucket?${a}`:`${n.url}/bucket`;return{data:await xi(n.fetch,u,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}async deleteBucket(i){var n=this;try{return{data:await tu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}}from(i){var n=this;if(!Gp(i))throw new Ho("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Fp({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(u,c){const d=u[c];return typeof d!="function"?d:async(...p)=>{try{return{data:await d.apply(u,p),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}};const nu={"X-Client-Info":`storage-js/${cd}`,"Content-Type":"application/json"};var dd=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ut(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Al=class extends dd{constructor(i,n,s){super(i),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},am=class extends dd{constructor(i,n){super(i),this.name="StorageVectorsUnknownError",this.originalError=n}};const ru=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),lm=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Mh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),um=async(i,n,s)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(s!=null&&s.noResolveJson)){const a=i.status||500,u=i;if(typeof u.json=="function")u.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";n(new Al(Mh(c),a,d))}).catch(()=>{const c=a+"";n(new Al(u.statusText||`HTTP ${a} error`,a,c))});else{const c=a+"";n(new Al(u.statusText||`HTTP ${a} error`,a,c))}}else n(new am(Mh(i),i))},cm=(i,n,s,a)=>{const u={method:i,headers:(n==null?void 0:n.headers)||{}};return a?(lm(a)?(u.headers=he({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(a)):u.body=a,he(he({},u),s)):u};async function hm(i,n,s,a,u,c){return new Promise((d,p)=>{i(s,cm(n,a,u,c)).then(m=>{if(!m.ok)throw m;if(a!=null&&a.noResolveJson)return m;const y=m.headers.get("content-type");return!y||!y.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>um(m,p,a))})}async function Dt(i,n,s,a,u){return hm(i,"POST",n,a,u,s)}var dm=class{constructor(i,n={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=he(he({},nu),n),this.fetch=ru(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getIndex(i,n){var s=this;try{return{data:await Dt(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async listIndexes(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteIndex(i,n){var s=this;try{return{data:await Dt(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:s.headers})||{},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}},fm=class{constructor(i,n={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=he(he({},nu),n),this.fetch=ru(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var n=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Dt(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getVectors(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async listVectors(i){var n=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await Dt(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async queryVectors(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteVectors(i){var n=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Dt(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}},pm=class{constructor(i,n={},s){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=he(he({},nu),n),this.fetch=ru(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getBucket(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async listBuckets(i={}){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteBucket(i){var n=this;try{return{data:await Dt(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}},mm=class extends pm{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new gm(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,s=this;return n().call(s,i)}async getBucket(i){var n=()=>super.getBucket,s=this;return n().call(s,i)}async listBuckets(i={}){var n=()=>super.listBuckets,s=this;return n().call(s,i)}async deleteBucket(i){var n=()=>super.deleteBucket,s=this;return n().call(s,i)}},gm=class extends dm{constructor(i,n,s,a){super(i,n,a),this.vectorBucketName=s}async createIndex(i){var n=()=>super.createIndex,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,s=this;return n().call(s,s.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,s=this;return n().call(s,s.vectorBucketName,i)}index(i){return new ym(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},ym=class extends fm{constructor(i,n,s,a,u){super(i,n,u),this.vectorBucketName=s,this.indexName=a}async putVectors(i){var n=()=>super.putVectors,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(i){var n=()=>super.getVectors,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,s=this;return n().call(s,he(he({},i),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},vm=class extends im{constructor(i,n={},s,a){super(i,n,s,a)}from(i){return new sm(this.url,this.headers,i,this.fetch)}get vectors(){return new mm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new om(this.url+"/iceberg",this.headers,this.fetch)}};const fd="2.90.1",Ts=30*1e3,Wl=3,Il=Wl*Ts,wm="http://localhost:9999",_m="supabase.auth.token",xm={"X-Client-Info":`gotrue-js/${fd}`},Gl="X-Supabase-Api-Version",pd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bm=600*1e3;class Si extends Error{constructor(n,s,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function se(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class km extends Si{constructor(n,s,a){super(n,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function Em(i){return se(i)&&i.name==="AuthApiError"}class Mr extends Si{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Mn extends Si{constructor(n,s,a,u){super(n,a,u),this.name=s,this.status=a}}class $t extends Mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tm(i){return se(i)&&i.name==="AuthSessionMissingError"}class _s extends Mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $o extends Mn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Uo extends Mn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cm(i){return se(i)&&i.name==="AuthImplicitGrantRedirectError"}class Bh extends Mn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nm extends Mn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jl extends Mn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Ll(i){return se(i)&&i.name==="AuthRetryableFetchError"}class zh extends Mn{constructor(n,s,a){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class Ql extends Mn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Do="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hh=` 	
\r=`.split(""),jm=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Hh.length;n+=1)i[Hh[n].charCodeAt(0)]=-2;for(let n=0;n<Do.length;n+=1)i[Do[n].charCodeAt(0)]=n;return i})();function Kh(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(Do[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(Do[a]),n.queuedBits-=6}}function md(i,n,s){const a=jm[i];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Fh(i){const n=[],s=d=>{n.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=d=>{Rm(d,a,s)};for(let d=0;d<i.length;d+=1)md(i.charCodeAt(d),u,c);return n.join("")}function Pm(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Om(i,n){for(let s=0;s<i.length;s+=1){let a=i.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(i.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}Pm(a,n)}}function Rm(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let a=1;a<6;a+=1)if((i>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function js(i){const n=[],s={queue:0,queuedBits:0},a=u=>{n.push(u)};for(let u=0;u<i.length;u+=1)md(i.charCodeAt(u),s,a);return new Uint8Array(n)}function Am(i){const n=[];return Om(i,s=>n.push(s)),new Uint8Array(n)}function Br(i){const n=[],s={queue:0,queuedBits:0},a=u=>{n.push(u)};return i.forEach(u=>Kh(u,s,a)),Kh(null,s,a),n.join("")}function Im(i){return Math.round(Date.now()/1e3)+i}function Lm(){return Symbol("auth-callback")}const dt=()=>typeof window<"u"&&typeof document<"u",Lr={tested:!1,writable:!1},gd=()=>{if(!dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lr.tested)return Lr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Lr.tested=!0,Lr.writable=!0}catch{Lr.tested=!0,Lr.writable=!1}return Lr.writable};function $m(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{n[c]=u})}catch{}return s.searchParams.forEach((a,u)=>{n[u]=a}),n}const yd=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Um=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Cs=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},$r=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ht=async(i,n)=>{await i.removeItem(n)};class Ko{constructor(){this.promise=new Ko.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Ko.promiseConstructor=Promise;function $l(i){const n=i.split(".");if(n.length!==3)throw new Ql("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!Sm.test(n[a]))throw new Ql("JWT not in base64url format");return{header:JSON.parse(Fh(n[0])),payload:JSON.parse(Fh(n[1])),signature:js(n[2]),raw:{header:n[0],payload:n[1]}}}async function Dm(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function Mm(i,n){return new Promise((a,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await i(c);if(!n(c,null,d)){a(d);return}}catch(d){if(!n(c,d)){u(d);return}}})()})}function Bm(i){return("0"+i.toString(16)).substr(-2)}function zm(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(n),Array.from(n,Bm).join("")}async function Hm(i){const s=new TextEncoder().encode(i),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function Km(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Hm(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xs(i,n,s=!1){const a=zm();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await Cs(i,`${n}-code-verifier`,u);const c=await Km(a);return[c,a===c?"plain":"s256"]}const Fm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vm(i){const n=i.headers.get(Gl);if(!n||!n.match(Fm))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function qm(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Wm(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ss(i){if(!Gm.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ul(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jm(i,n){return new Proxy(i,{get:(s,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,u)}return!n.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,a,u)}})}function Vh(i){return JSON.parse(JSON.stringify(i))}const Ur=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Qm=[502,503,504];async function qh(i){var n;if(!Um(i))throw new Jl(Ur(i),0);if(Qm.includes(i.status))throw new Jl(Ur(i),i.status);let s;try{s=await i.json()}catch(c){throw new Mr(Ur(c),c)}let a;const u=Vm(i);if(u&&u.getTime()>=pd["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new zh(Ur(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new $t}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new zh(Ur(s),i.status,s.weak_password.reasons);throw new km(Ur(s),i.status||500,a)}const Ym=(i,n,s,a)=>{const u={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function ce(i,n,s,a){var u;const c=Object.assign({},a==null?void 0:a.headers);c[Gl]||(c[Gl]=pd["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(u=a==null?void 0:a.query)!==null&&u!==void 0?u:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await Xm(i,n,s+p,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(m):{data:Object.assign({},m),error:null}}async function Xm(i,n,s,a,u,c){const d=Ym(n,a,u,c);let p;try{p=await i(s,Object.assign({},d))}catch(m){throw console.error(m),new Jl(Ur(m),0)}if(p.ok||await qh(p),a!=null&&a.noResolveJson)return p;try{return await p.json()}catch(m){await qh(m)}}function rn(i){var n;let s=null;tg(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=Im(i.expires_in)));const a=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:a},error:null}}function Wh(i){const n=rn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(n.data.weak_password=i.weak_password),n}function dr(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Zm(i){return{data:i,error:null}}function eg(i){const{action_link:n,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c}=i,d=zo(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function Gh(i){return i}function tg(i){return i.access_token&&i.refresh_token&&i.expires_in}const Dl=["global","local","others"];class ng{constructor({url:n="",headers:s={},fetch:a}){this.url=n,this.headers=s,this.fetch=yd(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=Dl[0]){if(Dl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dl.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(se(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,s={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:dr})}catch(a){if(se(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:s}=n,a=zo(n,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a==null?void 0:a.newEmail,delete u.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:eg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(se(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:dr})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,a,u,c,d,p,m;try{const y={nextPage:null,lastPage:0,total:0},x=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Gh});if(x.error)throw x.error;const N=await x.json(),T=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return C.length>0&&(C.forEach(j=>{const P=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(j.split(";")[1].split("=")[1]);y[`${I}Page`]=P}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},N),y),error:null}}catch(y){if(se(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Ss(n);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:dr})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Ss(n);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:dr})}catch(a){if(se(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,s=!1){Ss(n);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:dr})}catch(a){if(se(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Ss(n.userId);try{const{data:s,error:a}=await ce(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Ss(n.userId),Ss(n.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,a,u,c,d,p,m;try{const y={nextPage:null,lastPage:0,total:0},x=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Gh});if(x.error)throw x.error;const N=await x.json(),T=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return C.length>0&&(C.forEach(j=>{const P=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(j.split(";")[1].split("=")[1]);y[`${I}Page`]=P}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},N),y),error:null}}catch(y){if(se(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(se(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(n){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}}function Jh(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}const bs={debug:!!(globalThis&&gd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vd extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class rg extends vd{}async function sg(i,n,s){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,u.name);try{return await s()}finally{bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,u.name)}}else{if(n===0)throw bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new rg(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(bs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function ig(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wd(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function og(i){return parseInt(i,16)}function ag(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,a=>a.toString(16).padStart(2,"0")).join("")}function lg(i){var n;const{chainId:s,domain:a,expirationTime:u,issuedAt:c=new Date,nonce:d,notBefore:p,requestId:m,resources:y,scheme:x,uri:N,version:T}=i;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const C=wd(i.address),j=x?`${x}://${a}`:a,P=i.statement?`${i.statement}
`:"",I=`${j} wants you to sign in with your Ethereum account:
${C}

${P}`;let H=`URI: ${N}
Version: ${T}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(u&&(H+=`
Expiration Time: ${u.toISOString()}`),p&&(H+=`
Not Before: ${p.toISOString()}`),m&&(H+=`
Request ID: ${m}`),y){let K=`
Resources:`;for(const U of y){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);K+=`
- ${U}`}H+=K}return`${I}
${H}`}class Ye extends Error{constructor({message:n,code:s,cause:a,name:u}){var c;super(n,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=u??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Mo extends Ye{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function ug({error:i,options:n}){var s,a,u;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Ye({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const d=window.location.hostname;if(_d(d)){if(c.rp.id!==d)return new Ye({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function cg({error:i,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Ye({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const a=window.location.hostname;if(_d(a)){if(s.rpId!==a)return new Ye({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class hg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const dg=new hg;function fg(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:s,excludeCredentials:a}=i,u=zo(i,["challenge","user","excludeCredentials"]),c=js(n).buffer,d=Object.assign(Object.assign({},s),{id:js(s.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:c,user:d});if(a&&a.length>0){p.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const y=a[m];p.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:js(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function pg(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:s}=i,a=zo(i,["challenge","allowCredentials"]),u=js(n).buffer,c=Object.assign(Object.assign({},a),{challenge:u});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const p=s[d];c.allowCredentials[d]=Object.assign(Object.assign({},p),{id:js(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function mg(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i;return{id:i.id,rawId:i.id,response:{attestationObject:Br(new Uint8Array(i.response.attestationObject)),clientDataJSON:Br(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function gg(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i,a=i.getClientExtensionResults(),u=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Br(new Uint8Array(u.authenticatorData)),clientDataJSON:Br(new Uint8Array(u.clientDataJSON)),signature:Br(new Uint8Array(u.signature)),userHandle:u.userHandle?Br(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function _d(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Qh(){var i,n;return!!(dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function yg(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Mo("Browser returned unexpected credential type",n)}:{data:null,error:new Mo("Empty credential response",n)}}catch(n){return{data:null,error:ug({error:n,options:i})}}}async function vg(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Mo("Browser returned unexpected credential type",n)}:{data:null,error:new Mo("Empty credential response",n)}}catch(n){return{data:null,error:cg({error:n,options:i})}}}const wg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_g={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bo(...i){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of i)if(u)for(const c in u){const d=u[c];if(d!==void 0)if(Array.isArray(d))a[c]=d;else if(s(d))a[c]=d;else if(n(d)){const p=a[c];n(p)?a[c]=Bo(p,d):a[c]=Bo(d)}else a[c]=d}return a}function xg(i,n){return Bo(wg,i,n||{})}function Sg(i,n){return Bo(_g,i,n||{})}class bg{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:a,signal:u},c){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!d)return{data:null,error:p};const m=u??dg.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${a}`),y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=xg(d.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:x,error:N}=await yg({publicKey:y,signal:m});return x?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:N}}case"request":{const y=Sg(d.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:x,error:N}=await vg(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:m}));return x?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:N}}}}catch(d){return se(d)?{data:null,error:d}:{data:null,error:new Mr("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:a})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Si("rpId is required for WebAuthn authentication")};try{if(!Qh())return{data:null,error:new Mr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:a},signal:u},{request:c});if(!d)return{data:null,error:p};const{webauthn:m}=d;return this._verify({factorId:n,challengeId:d.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(d){return se(d)?{data:null,error:d}:{data:null,error:new Mr("Unexpected error in authenticate",d)}}}async _register({friendlyName:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Si("rpId is required for WebAuthn registration")};try{if(!Qh())return{data:null,error:new Mr("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:n});if(!d)return await this.client.mfa.listFactors().then(x=>{var N;return(N=x.data)===null||N===void 0?void 0:N.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===n&&T.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:p};const{data:m,error:y}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:u},{create:c});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(d){return se(d)?{data:null,error:d}:{data:null,error:new Mr("Unexpected error in register",d)}}}}ig();const kg={url:wm,storageKey:_m,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Yh(i,n,s){return await s()}const ks={};class bi{get jwks(){var n,s;return(s=(n=ks[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){ks[this.storageKey]=Object.assign(Object.assign({},ks[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=ks[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ks[this.storageKey]=Object.assign(Object.assign({},ks[this.storageKey]),{cachedAt:n})}constructor(n){var s,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},kg),n);if(this.storageKey=c.storageKey,this.instanceID=(s=bi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,bi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&dt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new ng({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=yd(c.fetch),this.lock=c.lock||Yh,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&dt()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=sg:this.lock=Yh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:gd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jh(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Jh(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${fd}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let s={},a="none";if(dt()&&(s=$m(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),dt()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Cm(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:d,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return se(s)?this._returnResult({error:s}):this._returnResult({error:new Mr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,a,u;try{const c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=n==null?void 0:n.options)===null||u===void 0?void 0:u.captchaToken}},xform:rn}),{data:d,error:p}=c;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(c){if(se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var s,a,u;try{let c;if("email"in n){const{email:x,password:N,options:T}=n;let C=null,j=null;this.flowType==="pkce"&&([C,j]=await xs(this.storage,this.storageKey)),c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:x,password:N,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:C,code_challenge_method:j},xform:rn})}else if("phone"in n){const{phone:x,password:N,options:T}=n;c=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:N,data:(a=T==null?void 0:T.data)!==null&&a!==void 0?a:{},channel:(u=T==null?void 0:T.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:rn})}else throw new $o("You must provide either an email or phone number and a password");const{data:d,error:p}=c;if(p||!d)return await ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(c){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let s;if("email"in n){const{email:c,password:d,options:p}=n;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Wh})}else if("phone"in n){const{phone:c,password:d,options:p}=n;s=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Wh})}else throw new $o("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const c=new _s;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(n){var s,a,u,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,a,u,c,d,p,m,y,x,N,T;let C,j;if("message"in n)C=n.message,j=n.signature;else{const{chain:P,wallet:I,statement:H,options:K}=n;let U;if(dt())if(typeof I=="object")U=I;else{const De=window;if("ethereum"in De&&typeof De.ethereum=="object"&&"request"in De.ethereum&&typeof De.ethereum.request=="function")U=De.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(K!=null&&K.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=I}const Y=new URL((s=K==null?void 0:K.url)!==null&&s!==void 0?s:window.location.href),xe=await U.request({method:"eth_requestAccounts"}).then(De=>De).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!xe||xe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const re=wd(xe[0]);let Q=(a=K==null?void 0:K.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!Q){const De=await U.request({method:"eth_chainId"});Q=og(De)}const Oe={domain:Y.host,address:re,statement:H,uri:Y.href,version:"1",chainId:Q,nonce:(u=K==null?void 0:K.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(d=(c=K==null?void 0:K.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=K==null?void 0:K.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=K==null?void 0:K.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=K==null?void 0:K.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(x=K==null?void 0:K.signInWithEthereum)===null||x===void 0?void 0:x.resources};C=lg(Oe),j=await U.request({method:"personal_sign",params:[ag(C),re]})}try{const{data:P,error:I}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:j},!((N=n.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:rn});if(I)throw I;if(!P||!P.session||!P.user){const H=new _s;return this._returnResult({data:{user:null,session:null},error:H})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:I})}catch(P){if(se(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(n){var s,a,u,c,d,p,m,y,x,N,T,C;let j,P;if("message"in n)j=n.message,P=n.signature;else{const{chain:I,wallet:H,statement:K,options:U}=n;let Y;if(dt())if(typeof H=="object")Y=H;else{const re=window;if("solana"in re&&typeof re.solana=="object"&&("signIn"in re.solana&&typeof re.solana.signIn=="function"||"signMessage"in re.solana&&typeof re.solana.signMessage=="function"))Y=re.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=H}const xe=new URL((s=U==null?void 0:U.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Y&&Y.signIn){const re=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:xe.host,uri:xe.href}),K?{statement:K}:null));let Q;if(Array.isArray(re)&&re[0]&&typeof re[0]=="object")Q=re[0];else if(re&&typeof re=="object"&&"signedMessage"in re&&"signature"in re)Q=re;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)j=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),P=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${xe.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${xe.href}`,`Issued At: ${(u=(a=U==null?void 0:U.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=U==null?void 0:U.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((d=U==null?void 0:U.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((p=U==null?void 0:U.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((y=U==null?void 0:U.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((N=(x=U==null?void 0:U.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||N===void 0)&&N.length?["Resources",...U.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const re=await Y.signMessage(new TextEncoder().encode(j),"utf8");if(!re||!(re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=re}}try{const{data:I,error:H}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Br(P)},!((T=n.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(C=n.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:rn});if(H)throw H;if(!I||!I.session||!I.user){const K=new _s;return this._returnResult({data:{user:null,session:null},error:K})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:H})}catch(I){if(se(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(n){const s=await $r(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Nm;const{data:c,error:d}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:rn});if(await ht(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const p=new _s;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:d})}catch(c){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:s,provider:a,token:u,access_token:c,nonce:d}=n,p=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rn}),{data:m,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const x=new _s;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(n){var s,a,u,c,d;try{if("email"in n){const{email:p,options:m}=n;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await xs(this.storage,this.storageKey));const{error:N}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in n){const{phone:p,options:m}=n,{data:y,error:x}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=m==null?void 0:m.data)!==null&&u!==void 0?u:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:x})}throw new $o("You must provide either an email or phone number.")}catch(p){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var s,a;try{let u,c;"options"in n&&(u=(s=n.options)===null||s===void 0?void 0:s.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:p}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:rn});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,y=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var s,a,u,c,d;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await xs(this.storage,this.storageKey));const y=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=n==null?void 0:n.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:Zm});return!((c=y.data)===null||c===void 0)&&c.url&&dt()&&!(!((d=n.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)throw a;if(!s)throw new $t;const{error:u}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:a,type:u,options:c}=n,{error:d}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in n){const{phone:a,type:u,options:c}=n,{data:d,error:p}=await ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p})}throw new $o("You must provide either an email or phone number and a type")}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<Il:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const d=await $r(this.userStorage,this.storageKey+"-user");d!=null&&d.user?n.user=d.user:n.user=Ul()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};n.user=Jm(n.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(n){try{return n?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:dr}):await this._useSession(async s=>{var a,u,c;const{data:d,error:p}=s;if(p)throw p;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:dr})})}catch(s){if(se(s))return Tm(s)&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async a=>{const{data:u,error:c}=a;if(c)throw c;if(!u.session)throw new $t;const d=u.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await xs(this.storage,this.storageKey));const{data:y,error:x}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:dr});if(x)throw x;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(a){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new $t;const s=Date.now()/1e3;let a=s,u=!0,c=null;const{payload:d}=$l(n.access_token);if(d.exp&&(a=d.exp,u=a<=s),u){const{data:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(se(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var a;if(!n){const{data:d,error:p}=s;if(p)throw p;n=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(n!=null&&n.refresh_token))throw new $t;const{data:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(se(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(n,s){try{if(!dt())throw new Uo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Uo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Bh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Bh("No code detected.");const{data:K,error:U}=await this._exchangeCodeForSession(n.code);if(U)throw U;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:c,refresh_token:d,expires_in:p,expires_at:m,token_type:y}=n;if(!c||!p||!d||!y)throw new Uo("No session defined in URL");const x=Math.round(Date.now()/1e3),N=parseInt(p);let T=x+N;m&&(T=parseInt(m));const C=T-x;C*1e3<=Ts&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${N}s`);const j=T-N;x-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,T,x):x-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,T,x);const{data:P,error:I}=await this._getUser(c);if(I)throw I;const H={provider_token:a,provider_refresh_token:u,access_token:c,expires_in:N,expires_at:T,refresh_token:d,token_type:y,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:n.type},error:null})}catch(a){if(se(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await $r(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({error:c});const d=(a=u.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:p}=await this.admin.signOut(d,n);if(p&&!(Em(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const s=Lm(),a={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async s=>{var a,u;try{const{data:{session:c},error:d}=s;if(d)throw d;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await xs(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:a,error:u}=await this._useSession(async c=>{var d,p,m,y,x;const{data:N,error:T}=c;if(T)throw T;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",C,{headers:this.headers,jwt:(x=(y=N.session)===null||y===void 0?void 0:y.access_token)!==null&&x!==void 0?x:void 0})});if(u)throw u;return dt()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:n.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(se(a))return this._returnResult({data:{provider:n.provider,url:null},error:a});throw a}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var a;try{const{error:u,data:{session:c}}=s;if(u)throw u;const{options:d,provider:p,token:m,access_token:y,nonce:x}=n,N=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c==null?void 0:c.access_token)!==null&&a!==void 0?a:void 0,body:{provider:p,id_token:m,access_token:y,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:rn}),{data:T,error:C}=N;return C?this._returnResult({data:{user:null,session:null},error:C}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new _s}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:C}))}catch(u){if(await ht(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var a,u;const{data:c,error:d}=s;if(d)throw d;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Mm(async u=>(u>0&&await Dm(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:rn})),(u,c)=>{const d=200*Math.pow(2,u);return c&&Ll(c)&&Date.now()+d-a<Ts})}catch(a){if(this._debug(s,"error",a),se(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",a),dt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await $r(this.storage,this.storageKey);if(u&&this.userStorage){let d=await $r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:u.user},await Cs(this.userStorage,this.storageKey+"-user",d)),u.user=(n=d==null?void 0:d.user)!==null&&n!==void 0?n:Ul()}else if(u&&!u.user&&!u.user){const d=await $r(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(u.user=d.user,await ht(this.storage,this.storageKey+"-user"),await Cs(this.storage,this.storageKey,u)):u.user=Ul()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Il;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Il}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:d}=await this._callRefreshToken(u.refresh_token);d&&(console.error(d),Ll(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(u.access_token);!p&&(d!=null&&d.user)?(u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var s,a;if(!n)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Ko;const{data:c,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!c.session)throw new $t;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),se(c)){const d={data:null,error:c};return Ll(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,s,a=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:s});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(m){c.push(m)}});if(await Promise.all(d),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await ht(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},n),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await Cs(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=Vh(u);await Cs(this.storage,this.storageKey,c)}else{const u=Vh(s);await Cs(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ht(this.storage,this.storageKey),await ht(this.storage,this.storageKey+"-code-verifier"),await ht(this.storage,this.storageKey+"-user"),this.userStorage&&await ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&dt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ts);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-n)/Ts);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Ts}ms, refresh threshold is ${Wl} ticks`),u<=Wl&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof vd)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await xs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});u.push(p.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);u.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;return c?this._returnResult({data:null,error:c}):await ce(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(n){try{return await this._useSession(async s=>{var a,u;const{data:c,error:d}=s;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:y}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(n.factorType==="totp"&&m.type==="totp"&&(!((u=m==null?void 0:m.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?mg(n.webauthn.credential_response):gg(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:m}=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:d,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:fg(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:pg(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(n){const{data:s,error:a}=await this._challenge({factorId:n.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=s==null?void 0:s.factors)!==null&&n!==void 0?n:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:a},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=$l(a.access_token);let d=null;c.aal&&(d=c.aal);let p=d;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=c.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new $t})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new $t});const d=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&dt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(se(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(n,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new $t});const d=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&dt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(se(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new $t})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $t})})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(n,s={keys:[]}){let a=s.keys.find(p=>p.kid===n);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+bm>u)return a;const{data:c,error:d}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,a=c.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,s={}){try{let a=n;if(!a){const{data:C,error:j}=await this.getSession();if(j||!C.session)return this._returnResult({data:null,error:j});a=C.session.access_token}const{header:u,payload:c,signature:d,raw:{header:p,payload:m}}=$l(a);s!=null&&s.allowExpired||qm(c.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!y){const{error:C}=await this.getUser(a);if(C)throw C;return{data:{claims:c,header:u,signature:d},error:null}}const x=Wm(u.alg),N=await crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!await crypto.subtle.verify(x,N,d,Am(`${p}.${m}`)))throw new Ql("Invalid JWT signature");return{data:{claims:c,header:u,signature:d},error:null}}catch(a){if(se(a))return this._returnResult({data:null,error:a});throw a}}}bi.nextInstanceID={};const Eg=bi,Tg="2.90.1";let gi="";typeof Deno<"u"?gi="deno":typeof document<"u"?gi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gi="react-native":gi="node";const Cg={"X-Client-Info":`supabase-js-${gi}/${Tg}`},Ng={headers:Cg},jg={schema:"public"},Pg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Og={};function ki(i){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ki(i)}function Rg(i,n){if(ki(i)!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var a=s.call(i,n);if(ki(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Ag(i){var n=Rg(i,"string");return ki(n)=="symbol"?n:n+""}function Ig(i,n,s){return(n=Ag(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function Xh(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),s.push.apply(s,a)}return s}function Ve(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Xh(Object(s),!0).forEach(function(a){Ig(i,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Xh(Object(s)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(s,a))})}return i}const Lg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),$g=()=>Headers,Ug=(i,n,s)=>{const a=Lg(s),u=$g();return async(c,d)=>{var p;const m=(p=await n())!==null&&p!==void 0?p:i;let y=new u(d==null?void 0:d.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),a(c,Ve(Ve({},d),{},{headers:y}))}};function Dg(i){return i.endsWith("/")?i:i+"/"}function Mg(i,n){var s,a;const{db:u,auth:c,realtime:d,global:p}=i,{db:m,auth:y,realtime:x,global:N}=n,T={db:Ve(Ve({},m),u),auth:Ve(Ve({},y),c),realtime:Ve(Ve({},x),d),storage:{},global:Ve(Ve(Ve({},N),p),{},{headers:Ve(Ve({},(s=N==null?void 0:N.headers)!==null&&s!==void 0?s:{}),(a=p==null?void 0:p.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return i.accessToken?T.accessToken=i.accessToken:delete T.accessToken,T}function Bg(i){const n=i==null?void 0:i.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dg(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var zg=class extends Eg{constructor(i){super(i)}},Hg=class{constructor(i,n,s){var a,u;this.supabaseUrl=i,this.supabaseKey=n;const c=Bg(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:jg,realtime:Og,auth:Ve(Ve({},Pg),{},{storageKey:d}),global:Ng},m=Mg(s??{},p);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=m.auth)!==null&&y!==void 0?y:{},this.headers,m.global.fetch)}this.fetch=Ug(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ve({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new xp(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new vm(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new gp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,s)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,s;if(i.accessToken)return await i.accessToken();const{data:a}=await i.auth.getSession();return(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:u,storageKey:c,flowType:d,lock:p,debug:m,throwOnError:y},x,N){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zg({url:this.authUrl.href,headers:Ve(Ve({},T),x),storageKey:c,autoRefreshToken:i,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:u,flowType:d,lock:p,debug:m,throwOnError:y,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Dp(this.realtimeUrl.href,Ve(Ve({},i),{},{params:Ve(Ve({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(i,n,s){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const xd=(i,n,s)=>new Hg(i,n,s);function Kg(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const s=n.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Kg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zh={"Lp Kh":{hp:100,mp:100,combat:10,lifespan:100,maxExp:100},"Trc C":{hp:500,mp:500,combat:100,lifespan:200,maxExp:200},"Kim an":{hp:2e3,mp:2e3,combat:500,lifespan:500,maxExp:500},"Nguyn Anh":{hp:1e4,mp:1e4,combat:2e3,lifespan:1e3,maxExp:1e3},"Ha Thn":{hp:5e4,mp:5e4,combat:1e4,lifespan:3e3,maxExp:2e3},"Hp Th":{hp:2e5,mp:2e5,combat:5e4,lifespan:5e3,maxExp:5e3}," Kip":{hp:1e6,mp:1e6,combat:2e5,lifespan:1e4,maxExp:1e4},"i Tha":{hp:5e6,mp:5e6,combat:1e6,lifespan:5e4,maxExp:5e4},"Tin Nhn":{hp:99999999,mp:99999999,combat:9999999,lifespan:999999,maxExp:999999}},Fg=["Lp Kh","Trc C","Kim an","Nguyn Anh","Ha Thn","Hp Th"," Kip","i Tha","Tin Nhn"],Yl=i=>Zh[i]||Zh["Lp Kh"],Vg={consumable:["an","dc","thuc","hi","linh tho","tu","ru"],skillbook:["kinh","php","quyt","b kp","b tch","cng php"],weapon:["kim","ao","thng","cn","cung","tin","ru","ba","v kh"],artifact:["bo","ngc","bi","linh kh","php kh","trn bn","linh ph"],material:["qung","","g","da","xng","lng","vy","nguyn liu"]},ed=["khng","khng c","khng c vt phm","trng","rng","none","empty","n/a","null","cha c","khng c g"],qg=["tn cng","nh","chin u","giao chin","xut chiu","u","git","tiu dit","cng kch","phn kch","chm","m","bn"],Wg=["thi trin","s dng","vn cng","phng","kch hot","dng chiu","xut chiu"],Gg=["liu","mo him","xng vo","lao vo","i u","chng li"],Jg=["dng","s dng","ung","n","trang b","kch hot","m","c","hc"],Qg=["dng","thi trin","s dng","xut chiu","vn cng","kch hot","pht ng"],mi=(i,n)=>{const s=i.toLowerCase();return n.some(a=>s.includes(a))},Yg=i=>{const n=i.toLowerCase();return{isCombat:mi(n,qg),isSkillUse:mi(n,Wg),isDangerous:mi(n,Gg),isItemUsage:mi(n,Jg),isTechniqueUsage:mi(n,Qg)}},vn=i=>{if(!i)return null;if(typeof i=="object"&&i.name){const n=i.name.trim();return ed.includes(n.toLowerCase())?null:{name:n,description:i.description||"",type:i.type||td(n),quantity:i.quantity||1,timesUsed:i.timesUsed||0,equipped:i.equipped||!1}}if(typeof i=="string"){const n=i.trim();return!n||n.length<2||ed.includes(n.toLowerCase())||n.toLowerCase().startsWith("khng")?null:{name:n,description:"",type:td(n),quantity:1,timesUsed:0,equipped:!1}}return null},td=i=>{const n=i.toLowerCase();for(const[s,a]of Object.entries(Vg))if(a.some(u=>n.includes(u)))return s;return"material"},Xg="https://ctuqdytsrbctfdprlhgc.supabase.co",Zg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0dXFkeXRzcmJjdGZkcHJsaGdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMDY5NjIsImV4cCI6MjA4MzU4Mjk2Mn0.e-RBlnMQ2qBUUDPSHCIcWX4RgQeLc7JiHU_a8ZybKx8";xd(Xg,Zg);const ey=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),ty=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{d:"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v14.25C1.5 20.16 2.339 21 3.375 21h17.25c1.035 0 1.875-.84 1.875-1.875V4.875C22.5 3.839 21.66 3 20.625 3H3.375Z"})}),ny=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.905 1.523L9.017 8.429a1.875 1.875 0 0 1-.445 1.035l-2.833 2.833a1.875 1.875 0 0 0 0 2.652l2.833 2.833c.28.28.626.445.994.445s.714-.165.994-.445l2.832-2.833a1.875 1.875 0 0 1 1.036-.445l4.906-.153c.94-.03 1.686-.786 1.686-1.727V9.28c0-.94-.747-1.697-1.686-1.727l-4.906-.153a1.875 1.875 0 0 1-1.036-.445l-2.832-2.833A1.875 1.875 0 0 0 11.078 2.25Z",clipRule:"evenodd"})}),ry=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-4.5a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75V4.5a.75.75 0 0 0-1.5 0v2.72a9 9 0 1 0-10.713 9.926.75.75 0 0 0 1.214-.882A7.474 7.474 0 0 1 5.353 10.5H4.755Z",clipRule:"evenodd"})}),nd=({className:i="w-4 h-4"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:i,children:g.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.39-3.423 3.11a.75.75 0 0 0 .44 1.316l4.861 1.214 1.83 4.401c.321.772 1.415.772 1.736 0l1.83-4.401 4.753-.39 3.423-3.11a.75.75 0 0 0-.44-1.316l-4.861-1.214-1.83-4.401Z",clipRule:"evenodd"})}),sy=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{fillRule:"evenodd",d:"M4.5 9.75a6 6 0 0 1 11.573-2.226 3.75 3.75 0 0 1 4.133 4.303A4.5 4.5 0 0 1 18 20.25H6.75a5.25 5.25 0 0 1-2.23-10.004 6.072 6.072 0 0 1-.02-.496Z",clipRule:"evenodd"})}),iy=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 mr-2",children:g.jsx("path",{d:"M12 3C6.5 3 2 5.5 2 8.5v7c0 3 4.5 5.5 10 5.5s10-2.5 10-5.5v-7c0-3-4.5-5.5-10-5.5zm0 2c4.7 0 8 1.8 8 3.5S16.7 12 12 12s-8-1.8-8-3.5S7.3 5 12 5zm0 12c-4.7 0-8-1.8-8-3.5v-2c1.8 1.2 4.7 2 8 2s6.2-.8 8-2v2c0 1.7-3.3 3.5-8 3.5z"})}),oy=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:g.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})}),ay=({setCurrentScreen:i,setShowLoadGameModal:n,savedGames:s,apiKeyStatus:a,storageMode:u,setStorageMode:c,setShowApiModal:d,supabase:p})=>g.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-[#f5e6d3] via-[#e8dcc8] to-[#d4c4ab] p-4",children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-6 max-w-2xl w-full",children:[g.jsx("h1",{className:"text-4xl font-bold text-[#1a0f0a] mb-6 text-center font-serif",children:" Nhp Vai A.I Simulator"}),g.jsxs("div",{className:"space-y-3 mb-4",children:[g.jsxs("button",{onClick:()=>i("setup"),className:"w-full flex items-center justify-center bg-gradient-to-r from-[#8b7355] to-[#6d5a47] hover:from-[#6d5a47] hover:to-[#5a4a3a] text-[#f9f3e9] font-semibold py-3 px-4 rounded-xl shadow-lg transition-all transform hover:scale-105 text-lg",children:[g.jsx(ey,{})," Bt u To Ni Dung"]}),g.jsxs("button",{onClick:()=>n(!0),disabled:s.length===0,className:"w-full flex items-center justify-center bg-gradient-to-r from-[#a0826d] to-[#8b7355] hover:from-[#8b7355] hover:to-[#6d5a47] text-[#f9f3e9] font-semibold py-2 px-4 rounded-xl shadow-md transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(ty,{})," Ti Game  Lu (",s.length,")"]}),g.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center bg-gradient-to-r from-[#6d5a47] to-[#5a4a3a] hover:from-[#5a4a3a] hover:to-[#4a3a2a] text-[#f9f3e9] font-semibold py-2 px-4 rounded-xl shadow-md transition-all transform hover:scale-105",children:[g.jsx(ny,{})," Thit Lp API Key"]})]}),g.jsxs("div",{className:"bg-[#e8dcc8] p-4 rounded-xl border-2 border-[#a0826d] mb-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"text-[#1a0f0a] font-semibold",children:"Ch  Lu Tr:"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>c("local"),className:`px-4 py-2 rounded-lg font-medium transition-all ${u==="local"?"bg-[#8b7355] text-[#f9f3e9] shadow-md":"bg-[#d4c4ab] text-[#4a3a2a] hover:bg-[#c4b49b]"}`,children:[g.jsx(iy,{})," Local"]}),g.jsxs("button",{onClick:()=>c("cloud"),disabled:!p,className:`px-4 py-2 rounded-lg font-medium transition-all ${u==="cloud"?"bg-[#8b7355] text-[#f9f3e9] shadow-md":"bg-[#d4c4ab] text-[#4a3a2a] hover:bg-[#c4b49b]"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[g.jsx(sy,{})," Cloud"]})]})]}),g.jsx("p",{className:"text-sm text-[#4a3a2a] mb-3",children:u==="local"?" Lu trn thit b ny":" Lu trn m my - T ng sync gia thit b"}),u==="cloud"&&g.jsx("div",{className:"pt-3 border-t border-[#a0826d]",children:g.jsx("p",{className:"text-xs text-[#4a3a2a] mb-2",children:" Mi thit b c ID ring.  sync d liu gia thit b, s dng cng browser/profile."})})]}),g.jsx("div",{className:"bg-[#e8dcc8] p-3 rounded-lg border border-[#a0826d]",children:g.jsxs("p",{className:`text-sm font-medium ${a.color||"text-[#4a3a2a]"}`,children:[a.status,": ",a.message]})})]})}),ly=({goHome:i,gameSettings:n,handleInputChange:s,initializeGame:a,isLoading:u,handleFetchSuggestions:c,isFetchingSuggestions:d,apiKey:p})=>g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f5e6d3] via-[#e8dcc8] to-[#d4c4ab] p-4",children:g.jsxs("div",{className:"max-w-3xl mx-auto bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-2xl font-bold text-[#1a0f0a] font-serif",children:" Thit Lp Game"}),g.jsx("button",{onClick:i,className:"bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors",children:" V Trang Ch"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",name:"theme",value:n.theme,onChange:s,placeholder:"Ch  (VD: Tin hip tu chn, Kinh d sinh tn...)",className:"flex-1 p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]"}),g.jsx("button",{onClick:()=>c("theme"),disabled:d||!p,className:"px-4 py-3 bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Gi  Ch ",children:g.jsx(nd,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",name:"setting",value:n.setting,onChange:s,placeholder:"Bi cnh (VD: Th gii tu tin, Thnh ph ma qui...)",className:"flex-1 p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]"}),g.jsx("button",{onClick:()=>c("setting"),disabled:d||!p,className:"px-4 py-3 bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Gi  Bi cnh",children:g.jsx(nd,{className:"w-5 h-5"})})]}),g.jsx("input",{type:"text",name:"characterName",value:n.characterName,onChange:s,placeholder:"Tn nhn vt",className:"w-full p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]"}),g.jsxs("select",{name:"characterGender",value:n.characterGender,onChange:s,className:"w-full p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]",children:[g.jsx("option",{value:"Nam",children:"Nam"}),g.jsx("option",{value:"N",children:"N"}),g.jsx("option",{value:"Khng xc nh",children:"Khng xc nh"})]}),g.jsxs("div",{className:"mt-6 p-4 bg-[#e8dcc8] rounded-lg border-2 border-[#a0826d]",children:[g.jsx("h3",{className:"text-lg font-semibold text-[#1a0f0a] mb-3",children:" Ty Chn Nng Cao"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:" kh:"}),g.jsxs("select",{name:"difficulty",value:n.difficulty,onChange:s,className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"easy",children:" D (Cnh bo ri ro, hu qu nh)"}),g.jsx("option",{value:"normal",children:" Bnh thng (Cn bng)"}),g.jsx("option",{value:"hard",children:" Kh (Khng cnh bo, hu qu nng)"}),g.jsx("option",{value:"nightmare",children:" c mng (Cht bt c lc no!)"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:" di cu chuyn:"}),g.jsxs("select",{name:"storyLength",value:n.storyLength,onChange:s,className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"short",children:" Ngn (50-100 ch mi on)"}),g.jsx("option",{value:"medium",children:" Trung bnh (100-200 ch)"}),g.jsx("option",{value:"long",children:" Di (200-300 ch)"}),g.jsx("option",{value:"epic",children:" Epic (300+ ch, chi tit ti a)"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:"Phong cch:"}),g.jsxs("select",{name:"tone",value:n.tone,onChange:s,className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"dark",children:" en ti (Bi kch, u m)"}),g.jsx("option",{value:"balanced",children:" Cn bng (Kch tnh va phi)"}),g.jsx("option",{value:"light",children:" Sng sa (Lc quan, hy vng)"}),g.jsx("option",{value:"comedic",children:" Hi hc (Vui v, hi)"})]})]})]})]}),g.jsx("textarea",{name:"characterBackstory",value:n.characterBackstory,onChange:s,placeholder:"Tiu s nhn vt (ty chn)",rows:4,className:"w-full p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]"}),g.jsx("button",{onClick:a,disabled:u||!n.theme||!n.setting||!n.characterName,className:"w-full bg-gradient-to-r from-[#8b7355] to-[#6d5a47] hover:from-[#6d5a47] hover:to-[#5a4a3a] text-[#f9f3e9] font-bold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?" ang khi to...":" Bt u Phiu Lu"})]})]})}),uy=({goHome:i,restartGame:n,storyHistory:s,isLoading:a,currentStory:u,choices:c,handleChoice:d,playerInput:p,setPlayerInput:m,handlePlayerInput:y,saveGame:x,isSaving:N,gameSettings:T,playerHP:C,playerMaxHP:j,playerAge:P,playerLifespan:I,cultivationLevel:H,spiritualPower:K,maxSpiritualPower:U,inventory:Y,experience:xe,maxExperience:re,currentPage:Q,setCurrentPage:Oe,showCharacterPanel:De,setShowCharacterPanel:jt,showInventoryPanel:Pt,setShowInventoryPanel:We,isAdminMode:ge,setIsAdminMode:Ge,setPlayerHP:lt,setPlayerMaxHP:Je,setSpiritualPower:Pe,setMaxSpiritualPower:B,setCultivationLevel:ie,setInventory:q,handleItemUse:S,getRandomItems:O,setShowSpawnItemModal:ye,normalizeInventoryItem:fe,physique:Ee,techniques:Se,bloodline:je,sect:Te,combatPower:Re,setCombatPower:st,setPlayerLifespan:wn,setExperience:Bn,setMaxExperience:_n})=>{const Xe=Math.max(1,s.length+(u?1:0)),xn=Q<=s.length?s[Q-1]:null,zn=Q===Xe&&u;return g.jsx("div",{className:"h-screen bg-gradient-to-br from-[#f5e6d3] via-[#e8dcc8] to-[#d4c4ab] p-4 flex flex-col",children:g.jsxs("div",{className:"max-w-6xl mx-auto w-full flex flex-col h-full gap-3",children:[g.jsx("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-4 flex-shrink-0",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h1",{className:"text-2xl font-bold text-[#1a0f0a] font-serif truncate flex-1",children:T.theme||"Cuc Phiu Lu"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>jt(!De),className:"bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors",children:" Nhn Vt"}),g.jsxs("button",{onClick:()=>We(!Pt),className:"bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors relative",children:[" Ti  ",Y.length>0&&g.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Y.length})]}),g.jsx("button",{onClick:x,disabled:N,className:"bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:N?"...":" Lu"}),g.jsx("button",{onClick:n,className:"bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors",children:g.jsx(ry,{})}),g.jsx("button",{onClick:i,className:"bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors",children:" Home"})]})]})}),g.jsxs("div",{className:"flex gap-3 flex-1 min-h-0",children:[De&&g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-4 w-80 flex-shrink-0 overflow-y-auto scrollbar-thin scrollbar-thumb-[#8b7355] scrollbar-track-[#e8dcc8]",children:[g.jsxs("h2",{className:"text-xl font-bold text-[#1a0f0a] mb-4 font-serif",children:[" Nhn Vt ",ge&&g.jsx("span",{className:"text-yellow-600",children:""})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[g.jsx("span",{className:"text-[#1a0f0a] font-semibold",children:" Sinh Lc"}),g.jsxs("span",{className:"text-[#4a3a2a]",children:[C,"/",j]})]}),g.jsx("div",{className:"w-full bg-[#d4c4ab] rounded-full h-3 border-2 border-[#a0826d]",children:g.jsx("div",{className:"bg-red-600 h-full rounded-full transition-all",style:{width:`${C/j*100}%`}})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[g.jsx("span",{className:"text-[#1a0f0a] font-semibold",children:" Linh Lc"}),g.jsxs("span",{className:"text-[#4a3a2a]",children:[K,"/",U]})]}),g.jsx("div",{className:"w-full bg-[#d4c4ab] rounded-full h-3 border-2 border-[#a0826d]",children:g.jsx("div",{className:"bg-blue-500 h-full rounded-full transition-all",style:{width:`${K/U*100}%`}})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[g.jsx("span",{className:"text-[#1a0f0a] font-semibold",children:" Kinh Nghim"}),g.jsxs("span",{className:"text-[#4a3a2a]",children:[xe,"/",re]})]}),g.jsx("div",{className:"w-full bg-[#d4c4ab] rounded-full h-3 border-2 border-[#a0826d]",children:g.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-full rounded-full transition-all",style:{width:`${xe/re*100}%`}})})]}),g.jsx("div",{className:"bg-[#e8dcc8] rounded-lg p-3 border-2 border-[#a0826d]",children:g.jsxs("div",{className:"space-y-2 text-sm",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Cnh Gii:"}),g.jsx("span",{className:"text-[#1a0f0a] font-bold",children:H})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Th Cht:"}),g.jsx("span",{className:"text-[#1a0f0a]",children:Ee})]}),je&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Huyt Mch:"}),g.jsx("span",{className:"text-purple-700 font-semibold",children:je})]}),Te&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Tng Mn:"}),g.jsx("span",{className:"text-[#1a0f0a]",children:Te})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Chin Lc:"}),g.jsx("span",{className:"text-orange-600 font-bold",children:Re})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-[#4a3a2a]",children:" Tui Th:"}),g.jsxs("span",{className:"text-[#1a0f0a]",children:[P,"/",I]})]})]})}),g.jsxs("div",{className:"bg-[#e8dcc8] rounded-lg p-3 border-2 border-[#a0826d]",children:[g.jsxs("h3",{className:"text-[#1a0f0a] font-semibold mb-2 text-sm",children:[" Cng Php (",Se.length,")"]}),Se.length>0?g.jsx("div",{className:"space-y-1",children:Se.map((ve,ft)=>g.jsxs("div",{className:"text-xs text-[#4a3a2a] bg-[#f9f3e9] p-1.5 rounded border border-[#d4c4ab]",children:[" ",ve]},ft))}):g.jsx("p",{className:"text-[#4a3a2a] text-xs text-center italic",children:"Cha hc cng php no"})]})]})]}),Pt&&g.jsx("div",{className:"fixed inset-0 bg-black/50 z-[150] flex items-center justify-center p-4",onClick:()=>We(!1),children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-4 w-full max-w-lg max-h-[80vh] flex flex-col",onClick:ve=>ve.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-[#d4c4ab]",children:[g.jsxs("h2",{className:"text-xl font-bold text-[#1a0f0a] font-serif",children:[" Ti  (",Y.length,")"]}),g.jsx("button",{onClick:()=>We(!1),className:"bg-[#a0826d] hover:bg-[#8b7355] text-white w-8 h-8 rounded-full flex items-center justify-center",children:""})]}),g.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-[#8b7355] scrollbar-track-[#e8dcc8]",children:Y.filter(ve=>fe(ve)!==null).length===0?g.jsxs("div",{className:"text-center py-10",children:[g.jsx("div",{className:"text-4xl mb-2",children:""}),g.jsx("p",{className:"text-[#4a3a2a]",children:"Cha c vt phm no"})]}):g.jsx("div",{className:"grid grid-cols-1 gap-2",children:Y.map((ve,ft)=>{const ke=fe(ve);if(!ke)return null;const Wt=ke.type==="consumable"?"":ke.type==="skillbook"?"":ke.type==="weapon"?"":ke.type==="artifact"?"":(ke.type==="material",""),Mt=ke.type==="consumable"?"an Dc (1 ln)":ke.type==="skillbook"?"Kinh Sch (Hc 1 ln)":ke.type==="weapon"?"V Kh":ke.type==="artifact"?"Php Bo":"Nguyn Liu",xt=ke.type==="material",ln=ke.description||(ke.type==="consumable"?"Vt phm tiu hao, dng 1 ln ri bin mt":ke.type==="skillbook"?"Kinh sch cng php, hc xong s thm vo k nng":ke.type==="weapon"?"V kh c th dng nhiu ln trong chin u":ke.type==="artifact"?"Php bo/Trang b c th dng li nhiu ln":"Nguyn liu dng  ch to, khng th dng trc tip");return g.jsx("div",{className:"bg-[#e8dcc8] rounded-lg p-3 border-2 border-[#a0826d] hover:border-[#8b7355] transition-all",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"text-lg",children:Wt}),g.jsx("span",{className:"font-bold text-[#1a0f0a]",children:ke.name}),g.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[#8b7355] text-white",children:Mt})]}),g.jsx("p",{className:"text-[#4a3a2a] text-xs leading-relaxed",children:ln}),ke.timesUsed>0&&g.jsxs("p",{className:"text-green-600 text-[10px] mt-1",children:["  s dng ",ke.timesUsed," ln"]})]}),g.jsx("button",{onClick:()=>{xt||(S(ve),We(!1))},disabled:xt,className:`ml-2 px-3 py-2 rounded-lg text-white text-sm font-bold transition-all ${xt?"bg-gray-400 cursor-not-allowed":ke.type==="skillbook"?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-green-600 hover:bg-green-700 hover:scale-105"}`,children:xt?"":ke.type==="skillbook"?" Hc":" Dng"})]})},ft)})})}),g.jsxs("div",{className:"mt-3 pt-3 border-t-2 border-[#d4c4ab] text-[10px] text-[#4a3a2a] flex flex-wrap gap-3 justify-center",children:[g.jsx("span",{children:" an Dc = 1 ln"}),g.jsx("span",{children:" V Kh = Nhiu ln"}),g.jsx("span",{children:" Php Bo = Nhiu ln"}),g.jsx("span",{children:" Nguyn Liu = Ch to"})]})]})}),ge?g.jsx("div",{className:"fixed top-2 right-2 z-[200]",children:g.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg shadow-xl border-2 border-yellow-400 overflow-hidden",children:[g.jsxs("button",{onClick:()=>document.getElementById("admin-panel").classList.toggle("hidden"),className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white text-xs font-bold py-1 px-3 flex items-center justify-between",children:[g.jsx("span",{children:" Admin"}),g.jsx("span",{className:"text-[10px]",children:""})]}),g.jsxs("div",{id:"admin-panel",className:"p-2 space-y-1 bg-[#1a0f0a]/90",children:[g.jsx("button",{onClick:()=>{const ve=Yl(H);lt(ve.hp),Je(ve.hp),Pe(ve.mp),B(ve.mp),st(ve.combat),wn(ve.lifespan),_n(ve.maxExp)},className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" Sync Stats"}),g.jsx("select",{value:H,onChange:ve=>{const ft=ve.target.value;ie(ft);const ke=Yl(ft);lt(ke.hp),Je(ke.hp),Pe(ke.mp),B(ke.mp),st(ke.combat),wn(ke.lifespan),Bn(0),_n(ke.maxExp)},className:"w-full bg-[#2a1f1a] text-yellow-300 text-[10px] py-1 px-2 rounded border border-yellow-500",children:Fg.map(ve=>g.jsx("option",{value:ve,children:ve},ve))}),g.jsx("button",{onClick:()=>{lt(j),Pe(U)},className:"w-full bg-green-600 hover:bg-green-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" Full HP/MP"}),g.jsx("button",{onClick:()=>{lt(Math.max(C*2,j)),Je(j*2)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" HP x2"}),g.jsx("button",{onClick:()=>{Pe(Math.max(K*2,U)),B(U*2)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" MP x2"}),g.jsx("button",{onClick:async()=>{const ve=await O();ve.length>0&&q([...Y,...ve])},className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" Random"}),g.jsx("button",{onClick:()=>ye(!0),className:"w-full bg-orange-600 hover:bg-orange-700 text-white text-[10px] py-1 px-2 rounded transition-colors",children:" Custom"}),g.jsx("button",{onClick:()=>Ge(!1),className:"w-full bg-red-600 hover:bg-red-700 text-white text-[10px] py-1 px-2 rounded transition-colors mt-1",children:" Tt"})]})]})}):g.jsx("button",{onClick:()=>{const ve=prompt("Nhp Admin Key:");ve==="Lys@031099"?Ge(!0):ve&&alert(" Sai Admin Key!")},className:"fixed top-2 right-2 z-[200] bg-gradient-to-r from-yellow-500/50 to-orange-500/50 hover:from-yellow-500 hover:to-orange-500 text-white/70 hover:text-white text-xs font-bold py-1 px-2 rounded-lg transition-all shadow-lg opacity-50 hover:opacity-100",title:"Bt Admin Mode",children:""}),g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl p-4 flex-1 flex flex-col min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-[#d4c4ab]",children:[g.jsxs("span",{className:"text-[#4a3a2a] text-sm font-semibold",children:["Trang ",Q," / ",Xe]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Oe(Math.max(1,Q-1)),disabled:Q===1,className:"bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] px-3 py-1 rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed text-sm",children:" Trc"}),g.jsx("button",{onClick:()=>Oe(Math.min(Xe,Q+1)),disabled:Q===Xe,className:"bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] px-3 py-1 rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed text-sm",children:"Sau "})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-[#8b7355] scrollbar-track-[#e8dcc8]",children:[xn&&g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"text-[#1a0f0a] leading-relaxed whitespace-pre-wrap mb-2 text-sm",children:xn.story}),xn.choice&&g.jsxs("div",{className:"mt-2 p-2 bg-[#e8dcc8] rounded-lg border-l-4 border-[#8b7355]",children:[g.jsx("span",{className:"text-xs font-semibold text-[#4a3a2a]",children:" Bn  chn: "}),g.jsx("span",{className:"text-[#1a0f0a] text-sm",children:xn.choice})]})]}),zn&&g.jsx("div",{className:"text-[#1a0f0a] leading-relaxed whitespace-pre-wrap mb-3 p-3 bg-[#fef8f0] rounded-lg border-2 border-[#a0826d] text-sm",children:u}),a&&g.jsxs("div",{className:"flex items-center justify-center p-8",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-[#8b7355] border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"ml-3 text-[#1a0f0a] font-medium",children:"ang to cu chuyn..."})]})]}),zn&&c.length>0&&g.jsxs("div",{className:"mt-3 space-y-2 pt-3 border-t-2 border-[#d4c4ab]",children:[g.jsx("p",{className:"text-[#1a0f0a] font-semibold mb-2 text-sm",children:"La chn ca bn:"}),c.map((ve,ft)=>g.jsx("button",{onClick:()=>d(ve),className:"w-full text-left p-2 bg-[#e8dcc8] hover:bg-[#d4c4ab] text-[#1a0f0a] rounded-lg border-2 border-[#a0826d] transition-all transform hover:scale-[1.02] text-sm",children:ve},ft))]}),!a&&c.length===0&&zn&&g.jsxs("div",{className:"mt-3 flex gap-2 pt-3 border-t-2 border-[#d4c4ab]",children:[g.jsx("input",{type:"text",value:p,onChange:ve=>m(ve.target.value),onKeyPress:ve=>ve.key==="Enter"&&y(),placeholder:"Nhp hnh ng ca bn...",className:"flex-1 p-2 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355] text-sm"}),g.jsx("button",{onClick:y,disabled:!p.trim(),className:"bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] px-4 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Gi"})]})]})]})]})})},cy=({show:i,savedGames:n,onLoadGame:s,onDeleteGame:a,onClose:u})=>i?g.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl w-full max-w-2xl p-6",children:[g.jsx("h2",{className:"text-3xl font-bold text-[#1a0f0a] mb-6 font-serif",children:" Game  Lu"}),g.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3 mb-6 scrollbar-thin scrollbar-thumb-[#8b7355] scrollbar-track-[#e8dcc8]",children:n.length===0?g.jsx("p",{className:"text-center text-[#4a3a2a] py-8",children:"Cha c game no c lu."}):n.map(c=>{var d;return g.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#e8dcc8] rounded-lg border-2 border-[#a0826d] hover:bg-[#d4c4ab] transition-colors",children:[g.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-[#1a0f0a] truncate",children:((d=c.settings)==null?void 0:d.theme)||"Game Cha C Tn"}),g.jsx("p",{className:"text-sm text-[#4a3a2a]",children:new Date(c.updatedAt||c.updated_at).toLocaleDateString("vi-VN")})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>s(c),className:"bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] px-4 py-2 rounded-lg transition-colors",children:"Ti"}),g.jsx("button",{onClick:()=>a(c.id),className:"bg-red-700 hover:bg-red-800 text-white p-2 rounded-lg transition-colors",children:g.jsx(oy,{})})]})]},c.id)})}),g.jsx("button",{onClick:u,className:"w-full bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] font-semibold py-3 px-6 rounded-lg transition-colors",children:"ng"})]})}):null,hy=({show:i,title:n,suggestions:s,isLoading:a,onSelect:u,onClose:c})=>i?g.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl w-full max-w-lg p-6",children:[g.jsx("h3",{className:"text-2xl font-bold text-[#1a0f0a] mb-4 font-serif",children:n}),a?g.jsxs("div",{className:"flex items-center justify-center py-8",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-[#8b7355] border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"ml-3 text-[#1a0f0a]",children:"ang to gi ..."})]}):g.jsx("div",{className:"space-y-2 mb-4 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-[#8b7355] scrollbar-track-[#e8dcc8]",children:s.length===0?g.jsx("p",{className:"text-center text-[#4a3a2a] py-4",children:"Khng c gi  no."}):s.map((d,p)=>g.jsx("button",{onClick:()=>{u(d),c()},className:"w-full text-left p-3 bg-[#e8dcc8] hover:bg-[#d4c4ab] text-[#1a0f0a] rounded-lg border-2 border-[#a0826d] transition-all",children:d},p))}),g.jsx("button",{onClick:c,className:"w-full bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] font-semibold py-2 px-4 rounded-lg transition-colors",children:"ng"})]})}):null,dy=({show:i,inputApiKey:n,setInputApiKey:s,saveApiKey:a,testApiKey:u,isLoading:c,onClose:d,apiKeyStatus:p,apiModel:m,setApiModel:y,apiTemperature:x,setApiTemperature:N,apiMaxTokens:T,setApiMaxTokens:C,adminKey:j,setAdminKey:P,isAdminMode:I,setIsAdminMode:H,setModalMessage:K,numberOfChoices:U,setNumberOfChoices:Y,autoSaveEnabled:xe,setAutoSaveEnabled:re})=>i?g.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center p-4 z-50 overflow-y-auto",children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-[#8b7355] rounded-2xl shadow-2xl w-full max-w-2xl p-6 my-8",children:[g.jsx("h2",{className:"text-3xl font-bold text-[#1a0f0a] mb-6 font-serif",children:" Thit Lp API & Settings"}),g.jsxs("div",{className:"mb-6 p-4 bg-[#e8dcc8] rounded-lg border-2 border-[#a0826d]",children:[g.jsx("h3",{className:"text-lg font-semibold text-[#1a0f0a] mb-3",children:" API Key"}),g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:"Gemini API Key:"}),g.jsx("input",{type:"password",value:n,onChange:Q=>s(Q.target.value),placeholder:"Nhp API Key ca bn...",className:"w-full p-3 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] focus:border-[#8b7355]"}),g.jsxs("p",{className:"text-xs text-[#4a3a2a] mt-2",children:["Ly API Key min ph ti: ",g.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-[#8b7355] hover:underline font-semibold",children:"Google AI Studio"})]}),g.jsx("div",{className:"bg-[#d4c4ab] p-3 rounded-lg border border-[#a0826d] mt-3",children:g.jsxs("p",{className:`text-sm ${p.color||"text-[#4a3a2a]"}`,children:[g.jsxs("strong",{children:[p.status,":"]})," ",p.message]})}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsx("button",{onClick:u,disabled:c||!n.trim(),className:"flex-1 bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?" ang kim tra...":" Kim Tra"}),g.jsx("button",{onClick:a,disabled:c||!n.trim(),className:"flex-1 bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"...":" Lu"})]})]}),g.jsxs("div",{className:"mb-6 p-4 bg-[#e8dcc8] rounded-lg border-2 border-[#a0826d]",children:[g.jsx("h3",{className:"text-lg font-semibold text-[#1a0f0a] mb-3",children:" Advanced API Settings"}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:"Model:"}),g.jsxs("select",{value:m,onChange:Q=>y(Q.target.value),className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"gemini-2.0-flash",children:"Gemini 2.0 Flash (Nhanh, R)"}),g.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro (Tt, t hn)"}),g.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash (Cn bng)"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:["Temperature: ",x.toFixed(1),g.jsx("span",{className:"text-xs text-[#4a3a2a] ml-2",children:"(Sng to: 0 = an ton, 2 = rt sng to)"})]}),g.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:x,onChange:Q=>N(parseFloat(Q.target.value)),className:"w-full"}),g.jsxs("div",{className:"flex justify-between text-xs text-[#4a3a2a] mt-1",children:[g.jsx("span",{children:"0.0 (Nhm chn)"}),g.jsx("span",{children:"1.0 (Cn bng)"}),g.jsx("span",{children:"2.0 (Bt ng)"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:["Max Tokens: ",T,g.jsx("span",{className:"text-xs text-[#4a3a2a] ml-2",children:"( di response)"})]}),g.jsxs("select",{value:T,onChange:Q=>C(parseInt(Q.target.value)),className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"1024",children:"1024 (Ngn)"}),g.jsx("option",{value:"2048",children:"2048 (Trung bnh)"}),g.jsx("option",{value:"4096",children:"4096 (Di)"}),g.jsx("option",{value:"8192",children:"8192 (Rt di)"})]})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:"Hng Dn AI V La Chn:"}),g.jsxs("select",{value:U,onChange:Q=>Y(parseInt(Q.target.value)),className:"w-full p-2 bg-[#f9f3e9] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]",children:[g.jsx("option",{value:"0",children:"T ng (AI quyt nh 2-5 la chn)"}),g.jsx("option",{value:"3",children:"u tin 3 la chn"}),g.jsx("option",{value:"4",children:"u tin 4 la chn"}),g.jsx("option",{value:"5",children:"u tin 5 la chn"}),g.jsx("option",{value:"999",children:"Nhiu la chn nht c th"})]}),g.jsx("p",{className:"text-xs text-[#4a3a2a] mt-1",children:' Ch  "T ng" cho AI linh hot da trn ng cnh cu chuyn'})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("label",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium text-[#1a0f0a]",children:" T ng Lu Sau Mi La Chn:"}),g.jsx("button",{onClick:()=>re(!xe),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${xe?"bg-green-600":"bg-gray-400"}`,children:g.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${xe?"translate-x-6":"translate-x-1"}`})})]}),g.jsx("p",{className:"text-xs text-[#4a3a2a] mt-1",children:xe?" Bt - Game t ng lu sau mi hnh ng":" Tt - Cn lu th cng"})]})]}),g.jsx("button",{onClick:d,className:"w-full bg-[#d4c4ab] hover:bg-[#c4b49b] text-[#1a0f0a] font-semibold py-3 px-4 rounded-lg transition-colors",children:"ng"})]})}):null,fy=({show:i,itemName:n,setItemName:s,itemEffect:a,setItemEffect:u,onSpawn:c,onClose:d})=>i?g.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-[#f9f3e9] border-4 border-yellow-600 rounded-2xl shadow-2xl w-full max-w-md p-6",children:[g.jsx("h3",{className:"text-2xl font-bold text-[#1a0f0a] mb-4 font-serif",children:" Spawn Custom Item"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:"Tn Vt Phm:"}),g.jsx("input",{type:"text",value:n,onChange:p=>s(p.target.value),placeholder:"VD: Kim Thn V Song",className:"w-full p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355]"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-[#1a0f0a] mb-2",children:["Tc Dng (Ty chn):",g.jsx("span",{className:"text-xs text-[#4a3a2a] ml-2",children:"M t ngn  AI hiu"})]}),g.jsx("textarea",{value:a,onChange:p=>u(p.target.value),placeholder:"VD: Tng 50% st thng, hi 1000 HP",rows:3,className:"w-full p-3 bg-[#e8dcc8] border-2 border-[#a0826d] rounded-lg text-[#1a0f0a] focus:ring-2 focus:ring-[#8b7355] resize-none"})]})]}),g.jsxs("div",{className:"flex gap-3 mt-6",children:[g.jsx("button",{onClick:d,className:"flex-1 bg-[#a0826d] hover:bg-[#8b7355] text-[#f9f3e9] font-semibold py-2 px-4 rounded-lg transition-colors",children:"Hy"}),g.jsx("button",{onClick:c,disabled:!n.trim(),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" Spawn"})]})]})}):null,py=({show:i,title:n,content:s,type:a,onClose:u})=>{if(!i)return null;const c={success:"border-green-600",error:"border-red-600",info:"border-blue-600"};return g.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:`bg-[#f9f3e9] border-4 ${c[a]||c.info} rounded-2xl shadow-2xl w-full max-w-md p-6`,children:[g.jsx("h3",{className:"text-2xl font-bold text-[#1a0f0a] mb-4 font-serif",children:n}),g.jsx("p",{className:"text-[#1a0f0a] mb-6 whitespace-pre-wrap",children:s}),g.jsx("button",{onClick:u,className:"w-full bg-[#8b7355] hover:bg-[#6d5a47] text-[#f9f3e9] font-semibold py-2 px-4 rounded-lg transition-colors",children:"ng"})]})})},my="https://ctuqdytsrbctfdprlhgc.supabase.co",gy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0dXFkeXRzcmJjdGZkcHJsaGdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMDY5NjIsImV4cCI6MjA4MzU4Mjk2Mn0.e-RBlnMQ2qBUUDPSHCIcWX4RgQeLc7JiHU_a8ZybKx8",an=xd(my,gy),Ml=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i==="x"?n:n&3|8).toString(16)}),rd=(i,n)=>{try{return localStorage.setItem(i,JSON.stringify(n)),!0}catch(s){return console.error("LocalStorage save error:",s),!1}},Sd=i=>{try{const n=localStorage.getItem(i);return n?JSON.parse(n):null}catch(n){return console.error("LocalStorage get error:",n),null}},yy=()=>{try{const i=[];for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);if(s&&(s.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)||s.startsWith("game_"))){const a=Sd(s);if(a){const u=s.startsWith("game_")?s.replace("game_",""):s;i.push({...a,id:u})}}}return i.sort((n,s)=>(s.updatedAt||0)-(n.updatedAt||0))}catch(i){return console.error("Error getting local games:",i),[]}},vy=async(i,n)=>{if(!an)return{success:!1,error:"Supabase cha c cu hnh"};try{let{data:{user:s}}=await an.auth.getUser();if(!s){const{data:c,error:d}=await an.auth.signInAnonymously();if(d||!(c!=null&&c.user))return{success:!1,error:"Khng th xc thc: "+((d==null?void 0:d.message)||"Unknown error")};s=c.user}const a={...n.settings,playerHP:n.playerHP,playerMaxHP:n.playerMaxHP,playerAge:n.playerAge,playerLifespan:n.playerLifespan,cultivationLevel:n.cultivationLevel,spiritualPower:n.spiritualPower,maxSpiritualPower:n.maxSpiritualPower,inventory:n.inventory,currentPage:n.currentPage},{error:u}=await an.from("game_saves").upsert({id:i,user_id:s.id,settings:a,story_history:n.storyHistory||[],chat_history:n.chatHistoryForGemini||[],knowledge:{},memories:[],world_knowledge:[],player_hp:n.playerHP||100,player_age:n.playerAge||18,game_day:1,game_time:0,updated_at:new Date().toISOString()});return u?{success:!1,error:u.message}:{success:!0}}catch(s){return console.error("saveToSupabase error:",s),{success:!1,error:s.message}}},wy=async()=>{if(!an)return{success:!1,error:"Supabase cha c cu hnh",data:[]};try{const{data:{user:i}}=await an.auth.getUser();if(!i)return{success:!1,error:"Cha xc thc",data:[]};const{data:n,error:s}=await an.from("game_saves").select("*").eq("user_id",i.id).order("updated_at",{ascending:!1});return s?{success:!1,error:s.message,data:[]}:{success:!0,data:(n||[]).map(u=>{const c=y=>{if(!y)return null;if(typeof y=="object")return y;try{return JSON.parse(y)}catch{return null}},d=c(u.settings)||{},p=c(u.story_history)||[],m=c(u.chat_history)||[];return{id:u.id,settings:d,storyHistory:p,currentStory:"",choices:[],chatHistoryForGemini:m,playerHP:d.playerHP||u.player_hp||100,playerMaxHP:d.playerMaxHP||u.player_hp||100,playerAge:d.playerAge||u.player_age||18,playerLifespan:d.playerLifespan||100,cultivationLevel:d.cultivationLevel||"Lp Kh",spiritualPower:d.spiritualPower||100,maxSpiritualPower:d.maxSpiritualPower||100,inventory:d.inventory||[],currentPage:d.currentPage||1,updatedAt:new Date(u.updated_at).getTime(),updated_at:u.updated_at}})}}catch(i){return console.error("loadFromSupabase error:",i),{success:!1,error:i.message,data:[]}}},_y=async i=>{if(!an)return{success:!1,error:"Supabase cha c cu hnh"};try{const{data:{user:n}}=await an.auth.getUser();if(!n)return{success:!1,error:"Cha xc thc"};const{error:s}=await an.from("game_saves").delete().eq("id",i).eq("user_id",n.id);return s?{success:!1,error:s.message}:{success:!0}}catch(n){return{success:!1,error:n.message}}},xy=()=>{const[i,n]=ue.useState("initial"),[s,a]=ue.useState(""),[u,c]=ue.useState({status:"Cha cu hnh",message:"",color:"text-[#4a3a2a]"}),[d,p]=ue.useState({theme:"",setting:"",characterName:"",characterGender:"Nam",characterBackstory:"",difficulty:"normal",storyLength:"medium",tone:"balanced"}),[m,y]=ue.useState([]),[x,N]=ue.useState(""),[T,C]=ue.useState([]),[j,P]=ue.useState(!1),[I,H]=ue.useState(!1),[K,U]=ue.useState([]),[Y,xe]=ue.useState(null),[re,Q]=ue.useState([]),[Oe,De]=ue.useState(""),[jt,Pt]=ue.useState(!1),[We,ge]=ue.useState({show:!1,title:"",content:"",type:"info"}),[Ge,lt]=ue.useState("local"),[Je,Pe]=ue.useState(!1),[B,ie]=ue.useState({show:!1,fieldType:null,suggestions:[],isLoading:!1}),[q,S]=ue.useState(!1),[O,ye]=ue.useState(""),[fe,Ee]=ue.useState("gemini-2.0-flash"),[Se,je]=ue.useState(1),[Te,Re]=ue.useState(2048),[st,wn]=ue.useState(""),[Bn,_n]=ue.useState(!0),[Xe,xn]=ue.useState(0),[zn,ve]=ue.useState(!1),[ft,ke]=ue.useState(""),[Wt,Mt]=ue.useState(""),[xt,ln]=ue.useState(100),[un,fr]=ue.useState(100),[zr,pr]=ue.useState(18),[Sn,mr]=ue.useState(100),[bn,cn]=ue.useState("Lp Kh"),[gr,Hn]=ue.useState(100),[hn,Hr]=ue.useState(100),[dn,pt]=ue.useState([]),[kn,En]=ue.useState(0),[Gt,Jt]=ue.useState(100),[fn,Ps]=ue.useState("Phm Th"),[Tn,Kr]=ue.useState([]),[Fr,Os]=ue.useState(""),[yr,Rs]=ue.useState(""),[Cn,vr]=ue.useState(10),[Kn,wr]=ue.useState(1),[_r,Vr]=ue.useState(!1),[qr,As]=ue.useState(!1),[Is,Ls]=ue.useState(!1);ue.useEffect(()=>{const M=Sd("apiKey");M?(a(M),ye(M),c({status:"ang dng Gemini AI",message:"API Key  c ti",color:"text-green-700"})):c({status:"Cha cu hnh",message:"Vui lng nhp API Key",color:"text-[#4a3a2a]"}),Wr()},[Ge]);const Fo=()=>{if(!O.trim()){ge({show:!0,title:"Li",content:"API Key khng c  trng",type:"error"});return}rd("apiKey",O.trim())?(a(O.trim()),c({status:" lu",message:"API Key  c lu thnh cng!",color:"text-green-700"}),ge({show:!0,title:"Thnh Cng",content:"API Key  c lu!",type:"success"}),S(!1)):ge({show:!0,title:"Li",content:"Khng th lu API Key",type:"error"})},Nn=async()=>{var F,X;if(!O.trim()){ge({show:!0,title:"Li",content:"Vui lng nhp API Key  kim tra",type:"error"});return}P(!0),c({status:"ang kim tra...",message:"Vui lng i",color:"text-blue-600"});const M={contents:[{role:"user",parts:[{text:"Xin cho! y l bi kim tra."}]}]},$=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${O.trim()}`;try{const ee=await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)}),oe=await ee.json();if(ee.ok&&((F=oe.candidates)!=null&&F[0]))c({status:"Thnh cng ",message:"API Key hp l!",color:"text-green-700"}),ge({show:!0,title:"Kim Tra Thnh Cng",content:"API Key hp l v kt ni thnh cng!",type:"success"});else{const we=((X=oe.error)==null?void 0:X.message)||`Li ${ee.status}`;c({status:"Tht bi ",message:we,color:"text-red-600"}),ge({show:!0,title:"Kim Tra Tht Bi",content:we,type:"error"})}}catch(ee){c({status:"Li Mng",message:ee.message,color:"text-red-600"}),ge({show:!0,title:"Li Kt Ni",content:`Khng th kt ni: ${ee.message}`,type:"error"})}P(!1)},Wr=async()=>{if(Ge==="local")U(yy());else{const M=await wy();M.success&&U(M.data)}},Ti=ue.useCallback(M=>{const{name:$,value:F}=M.target;p(X=>({...X,[$]:F}))},[]),Vo=async M=>{var X,ee,oe,we,de;if(!s)return ge({show:!0,title:"Li API Key",content:"Vui lng cu hnh API Key trc",type:"error"}),null;const $={contents:[{role:"user",parts:[{text:M}]}]},F=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${s}`;try{const G=await(await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)})).json();return(we=(oe=(ee=(X=G.candidates)==null?void 0:X[0])==null?void 0:ee.content)==null?void 0:oe.parts[0])!=null&&we.text?G.candidates[0].content.parts[0].text:(ge({show:!0,title:"Li AI",content:((de=G.error)==null?void 0:de.message)||"Khng th ly d liu",type:"error"}),null)}catch(W){return ge({show:!0,title:"Li Mng",content:W.message,type:"error"}),null}},Ci=async M=>{if(!s){ge({show:!0,title:"Thiu API Key",content:"Vui lng thit lp API Key",type:"error"});return}Pe(!0),ie({show:!0,fieldType:M,suggestions:[],isLoading:!0});const $={theme:"Gi  5 ch  c o cho game phiu lu vn bn theo phong cch tiu thuyt mng Trung Quc. Mi ch  1 dng, khng nh s.",setting:`Gi  5 bi cnh chi tit cho game c ch  '${d.theme||"phiu lu"}'. Mi bi cnh 1 dng, khng nh s.`},F=await Vo($[M]);if(F){const X=F.split(`
`).map(ee=>ee.trim()).filter(ee=>ee);ie({show:!0,fieldType:M,suggestions:X,isLoading:!1})}else ie({show:!0,fieldType:M,suggestions:[],isLoading:!1});Pe(!1)},Ni=async()=>{var M,$,F,X;if(!s)return[];try{const ee=`Da trn th loi "${d.theme}" v bi cnh "${d.setting}", hy to 2-3 vt phm ban u ph hp cho nhn vt ${d.characterName}.

QUY TC:
- Vt phm phi logic vi th loi (Tu Tin  an dc/php bo,  th  tin/th ATM/in thoi, Lch s  vng/v kh c, Sci-fi  laser/pin nng lng...)
- Mi vt phm gm: TN|LOI (consumable/weapon/artifact/material)
- V d: "Hi Kh an|consumable", "Kim St|weapon", "Nhn Ngc|artifact"
- Ch tr v danh sch, mi vt phm mt dng, KHNG gii thch thm

Format bt buc:
Tn Vt Phm 1|loi
Tn Vt Phm 2|loi
Tn Vt Phm 3|loi`,oe=`https://generativelanguage.googleapis.com/v1beta/models/${fe}:generateContent`,W=(X=(F=($=(M=(await(await fetch(`${oe}?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:ee}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:200}})})).json()).candidates)==null?void 0:M[0])==null?void 0:$.content)==null?void 0:F.parts[0])==null?void 0:X.text;if(!W)return[];const G=W.split(`
`).map(z=>z.trim()).filter(z=>z&&z.includes("|")).map(z=>{const[pe,Ke]=z.split("|").map(Ze=>Ze.trim().toLowerCase());return{name:z.split("|")[0].trim(),type:["consumable","weapon","artifact","material"].includes(Ke)?Ke:"other",timesUsed:0,equipped:!1}});return console.log(" AI generated starting items:",G),G.slice(0,3)}catch(ee){return console.error(" Failed to generate items:",ee),[]}},ji=async()=>{if(!d.theme||!d.setting||!d.characterName){ge({show:!0,title:"Thiu Thng Tin",content:"Vui lng in y  Ch , Bi cnh v Tn nhn vt",type:"error"});return}if(!s){ge({show:!0,title:"Thiu API Key",content:"Vui lng cu hnh API Key trong  Thit Lp API trc khi bt u game.",type:"error"});return}P(!0);const M=Ml();xe(M),ln(100),fr(100),pr(18),mr(100),cn("Lp Kh"),Hn(100),Hr(100),En(0),Jt(100),pt([]),wr(1);const $=await Ni();$&&$.length>0&&pt($);const F={easy:"D - Cnh bo ri ro, hu qu nh nhng",normal:"Bnh thng - Cn bng gia an ton v nguy him",hard:"Kh - Khng cnh bo, hu qu nghim trng",nightmare:"c mng - Nhn vt c th cht bt c lc no!"},X={short:"50-100 ch mi on",medium:"100-200 ch mi on",long:"200-300 ch mi on",epic:"300+ ch vi m t chi tit ti a"},ee={dark:"en ti - Bi kch, u m, tuyt vng",balanced:"Cn bng - Kch tnh va phi",light:"Sng sa - Lc quan, hy vng, tch cc",comedic:"Hi hc - Vui v, hi, khng qu nghim tc"},we=[{role:"user",parts:[{text:`Bn l AI k chuyn chuyn sng tc tiu thuyt mng Trung Quc th loi '${d.theme}'.

Ch : ${d.theme}
Bi cnh: ${d.setting}
Nhn vt chnh: ${d.characterName} (${d.characterGender})
${d.characterBackstory?`Tiu s: ${d.characterBackstory}`:""}

 QUAN TRNG - NGI CHI L NHN VT CHNH:
- Ngi chi ang iu khin nhn vt "${d.characterName}"
- K chuyn t gc nhn ca ${d.characterName} (ngi th nht hoc th ba tp trung vo nhn vt)
- Cc la chn phi l hnh ng M ${d.characterName} C TH LM, khng phi hnh ng quan st chnh mnh
- TUYT I KHNG to la chn kiu "Tm kim ${d.characterName}" hay "Quan st ${d.characterName}" - v  chnh l ngi chi!
- La chn phi t gc nhn ngi chi: "Tn cng k ch", "B chy", "Ni chuyn vi...", KHNG PHI "Tm ${d.characterName}"

 CI T GAME:
-  kh: ${F[d.difficulty]}
-  di: ${X[d.storyLength]}
- Phong cch: ${ee[d.tone]}

H THNG TU TIN:
- Cnh gii: Lp Kh < Ch C < Truyn C < Kim an < Nguyn Anh < Ha Thn < Hp Th <  Kip < i Thnh
- HP: Sc khe nhn vt (0-100) - LUN thay i theo hnh ng (chin u mt mu, ngh ngi hi phc)
- Tui th: Tui hin ti / Th nguyn ti a
- Linh lc: M lc tu luyn (0-100) - Tiu hao khi dng k nng, hi phc khi tu luyn
- Kinh nghim: im EXP (0/100) - Tng qua chin u, hon thnh nhim v, tu luyn.  100 EXP  Ln cnh gii
- Vt phm: Linh tho, php bo, an dc...

Nhim v: To on m u hp dn theo  di v phong cch  cu hnh. a ra s lng la chn hnh ng ph hp vi tnh hung ${Xe===0?"(thng 2-5 la chn)":Xe===999?"(nhiu la chn nht c th)":`(u tin ${Xe} la chn)`}, m bo ph hp vi  kh.

 QUY TC BT BUC:
1. BN PHI lun tr v y  5 phn: [STORY], [STATS], [ITEMS], [CHOICES]
2. PHN [CHOICES] L BT BUC - KHNG C THIU
3. Mi la chn phi nh s v c th
4. HP/MP PHI thay i logic: chin u mt mu, dng skill tn MP, ngh ngi hi phc
5. Kinh nghim tng qua hnh ng: +10-30 EXP chin u, +5-10 EXP tu luyn, +50 EXP hon thnh quest

Format tr v (BT BUC):

[STORY]
...ni dung cu chuyn...
[/STORY]

[STATS]
HP: 100/100
Tui: 18/100
Cnh gii: Lp Kh
Linh lc: 100/100
Kinh nghim: 0/100
[/STATS]

[ITEMS]
Vt phm 1, Vt phm 2
[/ITEMS]

[CHOICES]
1. La chn 1
2. La chn 2
3. La chn 3
[/CHOICES]

LU : BN PHI bao gm phn [CHOICES] trong mi response. Nu khng c choices, game s b li!`}]}];Q(we);const de=await xr(we);P(!1),de?(n("gameplay"),Gr(de)||await jn(de)):ge({show:!0,title:"Li Khi To",content:"Khng th to cu chuyn. Vui lng kim tra API Key trong  Thit Lp API.",type:"error"})},xr=async M=>{var X,ee,oe,we,de;if(!s)return console.error("No API key available"),null;const $={contents:M,generationConfig:{temperature:Se,maxOutputTokens:Te}},F=`https://generativelanguage.googleapis.com/v1beta/models/${fe}:generateContent?key=${s}`;try{console.log("Calling Gemini API...");const W=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});console.log("Response status:",W.status);const G=await W.json();if(console.log("Response result:",G),!W.ok){const pe=((X=G.error)==null?void 0:X.message)||`API Error: ${W.status}`;return ge({show:!0,title:"Li Gemini API",content:pe,type:"error"}),null}const z=(de=(we=(oe=(ee=G.candidates)==null?void 0:ee[0])==null?void 0:oe.content)==null?void 0:we.parts[0])==null?void 0:de.text;return z||(ge({show:!0,title:"Li Response",content:"AI khng tr v ni dung. Th li.",type:"error"}),null)}catch(W){return console.error("Fetch error:",W),ge({show:!0,title:"Li Mng",content:W.message,type:"error"}),null}},qo=async()=>{var M,$,F,X;if(console.log(" Getting random items via AI..."),!s)return console.log(" No API key, using fallback items"),[{name:"Vt Phm B n",type:"other",timesUsed:0,equipped:!1}];try{const ee=`Da trn th loi hin ti "${d.theme}", to 1-3 vt phm ngu nhin ph hp.

QUY TC:
- Vt phm phi logic vi th loi
- Format: Tn Vt Phm|loi (consumable/weapon/artifact/material)
- Ch tr v danh sch, mi dng mt vt phm

V d:
Hi Kh an|consumable
Thn Kim|weapon`,oe=`https://generativelanguage.googleapis.com/v1beta/models/${fe}:generateContent`,W=(X=(F=($=(M=(await(await fetch(`${oe}?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:ee}]}],generationConfig:{temperature:1,maxOutputTokens:150}})})).json()).candidates)==null?void 0:M[0])==null?void 0:$.content)==null?void 0:F.parts[0])==null?void 0:X.text;if(!W)return[];const G=W.split(`
`).map(z=>z.trim()).filter(z=>z&&z.includes("|")).map(z=>{const[pe,Ke]=z.split("|").map(Ze=>Ze.trim().toLowerCase());return{name:z.split("|")[0].trim(),type:["consumable","weapon","artifact","material"].includes(Ke)?Ke:"other",timesUsed:0,equipped:!1}}).slice(0,3);return console.log(" AI generated items:",G),G}catch(ee){return console.error(" AI item generation failed:",ee),[{name:"Vt Phm B n",type:"other",timesUsed:0,equipped:!1}]}},Wo=async()=>{var $,F,X,ee,oe;if(console.log(" Spawning custom item..."),!ft.trim()){console.log(" Item name is empty");return}const M=ft.trim();P(!0);try{const we=`Phn loi vt phm "${M}" trong game tu tin/fantasy.

 QUAN TRNG - PHN LOI CHNH XC:

1. consumable ( an Dc - dng 1 ln ri BIN MT):
   - an dc: Hi Kh an, Trc C an, Ty Ty an, c Dc
   - Thuc/Linh dch: Linh Dch, Huyt Sm Thy
   - Ph/Ba 1 ln: Truyn Tng Ph, Ha Cu Ph
   - Ht ging/Trng cy: Tm Ma Chng, Huyt Ma Chng

2. skillbook ( Kinh Sch - HC 1 LN ri bin mt, thm vo k nng):
   - Bt k th g c "Kinh"  cui: Ma Kinh, Bt Dit Kinh, Ph Hn Kinh
   - B kp/Cng php: Cu Dng Chn Kinh, Thi t Thn Cng
   - Sch dy skill: Tu Luyn B Lc, Luyn an Th Sch

3. weapon ( V Kh - dng nhiu ln  chin u):
   - Kim, ao, Thng, Kch, Cung, Cn

4. artifact ( Php Bo/Trang B - dng nhiu ln):
   - Nhn: Tr Vt Nhn, Khng Gian Nhn
   - Trang sc: H Tm Ngc, nh Hn Chu
   - o/Gip: H Th Bo Y
   - Linh trng nui: V ch Trng, Ph Hn Trng

5. material ( Nguyn Liu TH - khng dng c):
   - Tho dc th: Thin Sn Tuyt Lin (cy), Huyt Sm (c)
   - Khong: Huyn Thit, Linh Thch

Tr v NG 1 DNG theo format:
LOI|M T NGN

V d:
- "Bt Dit Kinh"  skillbook|Cng php bt dit, hc xong thn th bt hoi
- "Hc m Chi Nhn"  artifact|Nhn tng cng kch ma o +20%
- "Tm Ma Chng"  consumable|Ht ging tm ma, cy vo tng ma lc`,de=`https://generativelanguage.googleapis.com/v1beta/models/${fe}:generateContent`,z=((oe=(ee=(X=(F=($=(await(await fetch(`${de}?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:we}]}],generationConfig:{temperature:.3,maxOutputTokens:100}})})).json()).candidates)==null?void 0:$[0])==null?void 0:F.content)==null?void 0:X.parts[0])==null?void 0:ee.text)==null?void 0:oe.trim())||"";let pe="artifact",Ke=Wt.trim();if(z){const _e=z.split("|");if(_e.length>=2){const Ot=_e[0].toLowerCase().trim();["consumable","weapon","artifact","material","skillbook"].includes(Ot)&&(pe=Ot),Ke||(Ke=_e.slice(1).join("|").trim())}console.log(" AI classified:",z)}const Ze={name:M,type:pe,description:Ke,timesUsed:0,equipped:!1};console.log(" Custom item created:",Ze),pt([...dn,Ze]),ke(""),Mt(""),ve(!1),ge({show:!0,title:"  To Vt Phm",content:`${M} (${pe==="consumable"?" an Dc":pe==="weapon"?" V Kh":pe==="artifact"?" Php Bo":" Nguyn Liu"})
${Ke}`,type:"success"})}catch(we){console.error("Error classifying item:",we);const de=categorizeItemByName(M),W={name:M,type:de,description:Wt.trim()||"",timesUsed:0,equipped:!1};pt([...dn,W]),ke(""),Mt(""),ve(!1)}finally{P(!1)}},Le=()=>{const $=(()=>{const X={weapons:[],consumables:[],artifacts:[],materials:[]};return dn.forEach(ee=>{const oe=vn(ee),we=oe.timesUsed>0?` ( dng ${oe.timesUsed} ln)`:"",de=oe.equipped?" [angrang]":"",W=`${oe.name}${de}${we}`;oe.type==="weapon"?X.weapons.push(W):oe.type==="consumable"?X.consumables.push(W):oe.type==="artifact"?X.artifacts.push(W):oe.type==="material"&&X.materials.push(W)}),X})();let F="";return $.weapons.length>0&&(F+=`
   V Kh: ${$.weapons.join(", ")}`),$.consumables.length>0&&(F+=`
   an Dc (1 ln dng): ${$.consumables.join(", ")}`),$.artifacts.length>0&&(F+=`
   Php Bo: ${$.artifacts.join(", ")}`),$.materials.length>0&&(F+=`
   Nguyn Liu: ${$.materials.join(", ")}`),F===""&&(F="Khng c"),`
[TNH TRNG HIN TI CA NHN VT - BT BUC CP NHT NG]

 Cnh Gii: ${bn}
 Th Cht: ${fn}
 Huyt Mch: ${Fr||"Cha gic ng"}
 Tng Mn: ${yr||"T do"}
 Chin Lc: ${Cn}
 HP: ${xt}/${un} (Max = ${un})
 Linh Lc: ${gr}/${hn} (Max = ${hn})
 Kinh Nghim: ${kn}/${Gt} ( ${Gt} EXP  Ln cnh gii)
 Tui Th: ${zr}/${Sn}

 Cng Php  Hc: ${Tn.length>0?Tn.join(", "):"Cha c"}

 Vt Phm S Hu:${F}


 QUY TC STATS QUAN TRNG:
1. MAX HP v MAX MP gi nguyn (${un} v ${hn})
2. CHIN U: Tr HP khi b nh, tr Linh Lc khi dng chiu/k nng
3. NGH NGI/AN DC: Hi HP v Linh Lc
4. Tu luyn thnh cng: +EXP (cng 5-20 ty kt qu)

 V D CP NHT STATS:
- B tn cng: HP ${xt}${Math.max(0,xt-500)}
- Dng chiu: Linh lc ${gr}${Math.max(0,gr-100)}
- Tu luyn: EXP ${kn}${Math.min(Gt,kn+10)}

[FORMAT STATS BT BUC]
[STATS]
HP: X/${un}
Linh lc: X/${hn}
Cnh gii: ...
Th cht: ...
Huyt mch: ... (nu gic ng)
Tng mn: ... (nu gia nhp)
Chin lc: X
Tui: X/${Sn}
Kinh nghim: X/${Gt}
Cng php: skill1, skill2 (nu hc thm)
[/STATS]

[QUY TC S DNG VT PHM]
 AN DC: Dng 1 ln ri BIN MT (hi HP/MP, tng tu vi)
 V KH: Dng nhiu ln, cn trang b v linh lc
 PHP BO: Dng nhiu ln, cn tu vi  mnh
 NGUYN LIU: Khng dng trc tip, dng  ch to
 Ch c th dng vt phm ph hp vi cnh gii hin ti

[PHN BIT CNG PHP V VT PHM]
 CNG PHP (k nng  hc): C th thi trin BT C LC NO, KHNG tiu hao
 VT PHM: Ch dng c nu C TRONG TI   trn
 KHNG c  xut "s dng" vt phm khng c trong ti !
 Khi a ra la chn, ch  xut dng vt phm THT S C trong danh sch trn
`},Gr=M=>{console.log("=== PARSING AI RESPONSE ==="),console.log("Raw text:",M);let $=M.replace(/```[\s\S]*?```/g,"").replace(/```/g,"").trim();const F=$.match(/\[STORY\]([\s\S]*?)\[\/STORY\]/),X=$.match(/\[CHOICES\]([\s\S]*?)\[\/CHOICES\]/),ee=$.match(/\[STATS\]([\s\S]*?)\[\/STATS\]/),oe=$.match(/\[ITEMS\]([\s\S]*?)\[\/ITEMS\]/);console.log("Matches found:",{story:!!F,choices:!!X,stats:!!ee,items:!!oe});let we="";if(F?we=F[1].trim():we=$.replace(/\[STATS\][\s\S]*?\[\/STATS\]/g,"").replace(/\[ITEMS\][\s\S]*?\[\/ITEMS\]/g,"").replace(/\[CHOICES\][\s\S]*?\[\/CHOICES\]/g,"").replace(/\[STORY\]/g,"").replace(/\[\/STORY\]/g,"").replace(/\[\/STATS\]/g,"").replace(/\[\/ITEMS\]/g,"").replace(/\[\/CHOICES\]/g,"").trim(),N(we),console.log("Story set:",we.substring(0,100)+"..."),ee){console.log("Parsing stats from AI");const de=ee[1],W=de.match(/HP:\s*(\d+)\/(\d+)/),G=de.match(/Tui:\s*(\d+)\/(\d+)/),z=de.match(/Cnh gii:\s*([^\n]+)/i),pe=de.match(/Linh lc:\s*(\d+)\/(\d+)/),Ke=de.match(/Kinh nghim:\s*(\d+)\/(\d+)/),Ze=de.match(/Th cht:\s*([^\n]+)/i),_e=de.match(/Huyt mch:\s*([^\n]+)/i),Ot=de.match(/Tng mn:\s*([^\n]+)/i),Sr=de.match(/Chin lc:\s*(\d+)/i),Jr=de.match(/Cng php:\s*([^\n]+)/i);if(W&&(ln(parseInt(W[1])),fr(parseInt(W[2]))),G&&(pr(parseInt(G[1])),mr(parseInt(G[2]))),z&&cn(z[1].trim()),pe&&(Hn(parseInt(pe[1])),Hr(parseInt(pe[2]))),Ke&&(En(parseInt(Ke[1])),Jt(parseInt(Ke[2]))),Ze){const et=Ze[1].trim();et&&et!=="Phm Th"&&Ps(et)}if(_e){const et=_e[1].trim();et&&et!=="Cha gic ng"&&et!=="Khng"&&Os(et)}if(Ot){const et=Ot[1].trim();et&&et!=="T do"&&et!=="Khng"&&Rs(et)}if(Sr&&vr(parseInt(Sr[1])),Jr){const et=Jr[1].split(",").map(Qt=>Qt.trim()).filter(Qt=>Qt&&Qt!=="Cha c");et.length>0&&Kr(Qt=>{const Ri=new Set(Qt.map(Vn=>Vn.toLowerCase())),Qr=et.filter(Vn=>!Ri.has(Vn.toLowerCase()));return Qr.length>0?[...Qt,...Qr]:Qt})}}if(oe){const de=oe[1].trim(),W=["khng","khng c","khng c vt phm","trng","rng","none","empty","n/a","null","cha c","khng c g"];if(de&&!W.includes(de.toLowerCase())){const G=de.split(",").map(z=>z.trim()).filter(z=>{const pe=z.toLowerCase().replace(/^\d+\.\s*/,"").trim();return z&&z.length>2&&!W.includes(pe)&&!pe.startsWith("khng")});pt(z=>{const pe=z.map(Ze=>vn(Ze).name.toLowerCase()),Ke=G.filter(Ze=>{const _e=Ze.toLowerCase().replace(/^\d+\.\s*/,"").trim();return!pe.some(Ot=>Ot.includes(_e)||_e.includes(Ot))});return Ke.length>0?(console.log(" Thm items mi t AI:",Ke),[...z,...Ke]):z})}}if(X){console.log("Found CHOICES tag");const de=X[1].trim();console.log("Raw choices text:",de);const W=de.split(`
`).map(G=>G.trim().replace(/^\d+\.\s*/,"").replace(/^[-*]\s*/,"")).filter(G=>G&&G.length>3);console.log("Parsed choices array:",W),C(W.length>0?W:[]),console.log(" Choices set:",W)}else{console.log(" No CHOICES tag found, trying to extract from text");const de=/^\s*(\d+)[.\)]\s*(.+)/gm;let W=[...$.matchAll(de)];if(W.length>0){const z=W.map(pe=>pe[2].trim()).filter(pe=>pe.length>3);if(z.length>0){C(z),console.log(" Extracted numbered choices:",z);return}}const G=/^\s*[-*]\s*(.+)/gm;if(W=[...$.matchAll(G)],W.length>0){const z=W.map(pe=>pe[1].trim()).filter(pe=>pe.length>3);if(z.length>0){C(z),console.log(" Extracted bullet choices:",z);return}}return console.log(" No choices found - will generate from AI"),C([]),!1}return!0},$s=M=>{const $=M.toLowerCase(),F=["s dng","dng","ung","n","nut","kch hot","triu hi","trang b"];["thi trin","vn cng","s dng cng php","dng chiu"].some(ee=>$.includes(ee));for(const ee of Tn)if($.includes(ee.toLowerCase()))return console.log(" Technique usage detected (no consumption):",ee),null;for(const ee of dn){const oe=vn(ee),we=oe.name.toLowerCase();if($.includes(we)&&F.some(de=>$.includes(de)))return oe}return null},Pi=async M=>{const $=Yg(M);if($.isCombat||$.isDangerous){const G=Math.floor(un*(.05+Math.random()*.1));ln(z=>Math.max(1,z-G)),console.log(` Combat action - HP -${G}`)}if($.isSkillUse||$.isCombat&&Tn.length>0){const G=Math.floor(hn*(.03+Math.random()*.05));Hn(z=>Math.max(0,z-G)),console.log(` Skill used - MP -${G}`)}if($.isCombat){const G=Math.floor(2+Math.random()*4);En(z=>Math.min(Gt,z+G)),console.log(` Combat EXP +${G}`)}const F=$s(M);F&&(console.log(" Detected item usage in choice:",F.name),F.type==="consumable"?(pt(G=>G.filter(z=>vn(z).name!==F.name)),console.log(" Consumable removed:",F.name)):(F.type==="weapon"||F.type==="artifact")&&pt(G=>G.map(z=>{const pe=vn(z);return pe.name===F.name?{...pe,timesUsed:(pe.timesUsed||0)+1}:z}))),y(G=>[...G,{story:x,choice:M}]),N(""),C([]),P(!0),wr(G=>G+1);let X="";Xe===0?X="a ra s lng la chn ph hp (2-5 la chn) da trn tnh hung":Xe===999?X="a ra nhiu la chn a dng nht c th":X=`C gng a ra khong ${Xe} la chn nu ph hp vi tnh hung`;const ee=Le(),oe=d.characterName||"",we=oe?`
 NHC NH: Ngi chi ang iu khin "${oe}". 
- Cc la chn phi l hnh ng M NGI CHI c th lm
- KHNG c to la chn "Tm ${oe}", "Quan st ${oe}", "Theo di ${oe}" - v  chnh l ngi chi!
- La chn ng: "Tn cng", "B chy", "Ni chuyn vi X" (X l NPC khc)`:"",de=[...re,{role:"model",parts:[{text:x}]},{role:"user",parts:[{text:`${ee}

Ngi chi chn: "${M}". 

Tip tc cu chuyn da trn tnh trng hin ti. ${X}.
${we}

 BT BUC: Tr v NG format sau, KHNG c thiu phn [CHOICES]:

[STORY]
Ni dung cu chuyn tip theo...
[/STORY]

[STATS]
HP: X/Y
Tui: X/Y
Cnh gii: ...
Linh lc: X/Y
Kinh nghim: X/100
[/STATS]

[ITEMS]
Tn vt phm mi (nu c)
[/ITEMS]

[CHOICES]
1. La chn hnh ng 1
2. La chn hnh ng 2
3. La chn hnh ng 3
[/CHOICES]

LU : Phn [CHOICES] l BT BUC! La chn phi t gc nhn ngi chi!`}]}];Q(de);const W=await xr(de);P(!1),W&&(Gr(W)||await jn(W),Bn&&setTimeout(()=>Fn(!0),1e3))},jn=async M=>{var $,F,X,ee;if(s)try{const oe=`Da trn on truyn sau, hy a ra 3-4 la chn hnh ng hp l cho ngi chi:

"${M.substring(0,500)}..."

CH TR V DANH SCH LA CHN, mi dng mt la chn, nh s 1. 2. 3. 4.
V d:
1. Tin v pha trc
2. Quay li tm ng khc
3. n np quan st`,we=`https://generativelanguage.googleapis.com/v1beta/models/${fe}:generateContent`,G=(ee=(X=(F=($=(await(await fetch(`${we}?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:oe}]}],generationConfig:{temperature:.8,maxOutputTokens:200}})})).json()).candidates)==null?void 0:$[0])==null?void 0:F.content)==null?void 0:X.parts[0])==null?void 0:ee.text;if(G){const z=G.split(`
`).map(pe=>pe.trim().replace(/^\d+[.\)]\s*/,"")).filter(pe=>pe.length>5);z.length>0&&(C(z.slice(0,5)),console.log(" Generated choices from context:",z))}}catch(oe){console.error("Failed to generate choices:",oe)}},Go=async M=>{const $=vn(M);if($.type==="material"){ge({show:!0,title:" Khng Th Dng",content:`${$.name} l nguyn liu, ch dng  ch to. Khng th s dng trc tip!`,type:"error"});return}P(!0);let F="";Xe===0?F="a ra s lng la chn ph hp da trn tnh hung":Xe===999?F="a ra nhiu la chn nht c th":F=`C gng a ra khong ${Xe} la chn`;const X=Le(),ee=$.type==="consumable"?"an dc (dng 1 ln)":$.type==="weapon"?"v kh":$.type==="artifact"?"php bo":"vt phm",oe=[...re,{role:"model",parts:[{text:x}]},{role:"user",parts:[{text:`${X}

Ngi chi s dng ${ee}: "${$.name}". ${$.description?`Tc dng: ${$.description}. `:""}

M t hiu qu da trn tnh trng hin ti v tip tc cu chuyn. ${$.type==="consumable"?"LU : y l an dc/linh tho - sau khi dng s BIN MT khi ti !":""} ${F}.

 BT BUC: Tr v NG format sau, KHNG c thiu phn [CHOICES]:

[STORY]
Ni dung...
[/STORY]

[STATS]
HP: X/Y
Tui: X/Y
Cnh gii: ...
Linh lc: X/Y
Kinh nghim: X/100
[/STATS]

[ITEMS]
Vt phm hin c
[/ITEMS]

[CHOICES]
1. La chn 1
2. La chn 2
3. La chn 3
[/CHOICES]`}]}];Q(oe);const we=await xr(oe);if(P(!1),we){if($.type==="consumable")pt(W=>W.filter(G=>{const z=vn(G);return z&&z.name!==$.name})),y(W=>[...W,{story:x,choice:` S dng: ${$.name} ( bin mt)`}]);else if($.type==="skillbook"){const W=$.name.replace(/kinh$/i,"").replace(/cng php$/i,"").trim()||$.name;Kr(G=>G.some(z=>z.toLowerCase()===W.toLowerCase())?G:[...G,W]),pt(G=>G.filter(z=>{const pe=vn(z);return pe&&pe.name!==$.name})),y(G=>[...G,{story:x,choice:` Hc: ${$.name}  Lnh ng "${W}"`}]),ge({show:!0,title:" Hc c Cng Php!",content:`Bn  lnh ng "${W}" t ${$.name}!
Cng php ny  c thm vo danh sch k nng.`,type:"success"})}else pt(W=>W.map(G=>{const z=vn(G);return z&&z.name===$.name?{...z,timesUsed:(z.timesUsed||0)+1}:G})),y(W=>[...W,{story:x,choice:` S dng: ${$.name}`}]);wr(W=>W+1),Gr(we)||await jn(we),Bn&&setTimeout(()=>Fn(!0),1e3)}},Oi=async()=>{if(!Oe.trim())return;const M=Oe.trim();De(""),y(we=>[...we,{story:x,choice:M}]),N(""),P(!0);const $=Le(),F=d.characterName||"",X=F?`
 NHC NH: Ngi chi l "${F}". Khng to la chn quan st/tm chnh mnh!`:"",ee=[...re,{role:"model",parts:[{text:x}]},{role:"user",parts:[{text:`${$}
Ngi chi hnh ng: "${M}". Tip tc cu chuyn da trn tnh trng hin ti.${X}`}]}];Q(ee);const oe=await xr(ee);P(!1),oe&&(Gr(oe)||await jn(oe))},Fn=async(M=!1)=>{if(!Y){const X=Ml();xe(X)}const $=Y||Ml();Pt(!0);const F={settings:d,storyHistory:m,currentStory:x,choices:T,chatHistoryForGemini:re,playerHP:xt,playerMaxHP:un,playerAge:zr,playerLifespan:Sn,cultivationLevel:bn,spiritualPower:gr,maxSpiritualPower:hn,inventory:dn,experience:kn,maxExperience:Gt,isAdminMode:Is,physique:fn,techniques:Tn,bloodline:Fr,sect:yr,combatPower:Cn,currentPage:Kn,updatedAt:Date.now()};if(Ge==="local"){const X=rd($,F);M||ge({show:!0,title:X?" Lu":"Li",content:X?"Game  c lu thnh cng!":"Khng th lu game",type:X?"success":"error"})}else{const X=await vy($,F);M||ge({show:!0,title:X.success?" Lu":"Li",content:X.success?"Game  c lu ln Cloud!":X.error,type:X.success?"success":"error"})}Pt(!1),Wr()},Bt=M=>{p(M.settings||{}),y(M.storyHistory||[]),N(M.currentStory||""),C(M.choices||[]),Q(M.chatHistoryForGemini||[]);const $=M.cultivationLevel||"Lp Kh",F=Yl($),X=M.playerHP||100,ee=M.playerMaxHP||100,oe=M.spiritualPower||100,we=M.maxSpiritualPower||100,de=M.combatPower||10,W=M.playerLifespan||100,G=M.maxExperience||100,z=Math.max(ee,F.hp),pe=Math.max(we,F.mp),Ke=Math.max(de,F.combat),Ze=Math.max(W,F.lifespan),_e=Math.max(G,F.maxExp),Ot=ee>0?X/ee:1,Sr=we>0?oe/we:1;ln(Math.round(z*Ot)),fr(z),Hn(Math.round(pe*Sr)),Hr(pe),vr(Ke),mr(Ze),Jt(_e),pr(M.playerAge||18),cn($),pt(M.inventory||[]),En(M.experience||0),Ls(M.isAdminMode||!1),Ps(M.physique||"Phm Th"),Kr(M.techniques||[]),Os(M.bloodline||""),Rs(M.sect||""),wr(M.currentPage||1),xe(M.id),n("gameplay"),H(!1),ge({show:!0,title:"Thnh Cng",content:"Game  c ti!",type:"success"})},Jo=async M=>{if(Ge==="local")localStorage.removeItem(M),ge({show:!0,title:" Xa",content:"Game  c xa",type:"success"});else{const $=await _y(M);ge({show:!0,title:$.success?" Xa":"Li",content:$.success?"Game  c xa khi Cloud":$.error,type:$.success?"success":"error"})}Wr()},St=()=>{n("initial"),y([]),N(""),C([]),xe(null)},Qo=()=>{y([]),N(""),C([]),Q([]),n("setup")};return g.jsxs("div",{className:"min-h-screen",children:[i==="initial"&&g.jsx(ay,{setCurrentScreen:n,setShowLoadGameModal:H,savedGames:K,apiKeyStatus:u,storageMode:Ge,setStorageMode:lt,setShowApiModal:S,supabase:an}),i==="setup"&&g.jsx(ly,{goHome:St,gameSettings:d,handleInputChange:Ti,initializeGame:ji,isLoading:j,handleFetchSuggestions:Ci,isFetchingSuggestions:Je,apiKey:s}),i==="gameplay"&&g.jsx(uy,{goHome:St,restartGame:Qo,storyHistory:m,isLoading:j,currentStory:x,choices:T,handleChoice:Pi,playerInput:Oe,setPlayerInput:De,handlePlayerInput:Oi,saveGame:Fn,isSaving:jt,gameSettings:d,playerHP:xt,playerMaxHP:un,playerAge:zr,playerLifespan:Sn,cultivationLevel:bn,spiritualPower:gr,maxSpiritualPower:hn,inventory:dn,experience:kn,maxExperience:Gt,currentPage:Kn,setCurrentPage:wr,showCharacterPanel:_r,setShowCharacterPanel:Vr,showInventoryPanel:qr,setShowInventoryPanel:As,isAdminMode:Is,setIsAdminMode:Ls,setPlayerHP:ln,setPlayerMaxHP:fr,setSpiritualPower:Hn,setMaxSpiritualPower:Hr,setCultivationLevel:cn,setInventory:pt,handleItemUse:Go,getRandomItems:qo,setShowSpawnItemModal:ve,normalizeInventoryItem:vn,physique:fn,techniques:Tn,bloodline:Fr,sect:yr,combatPower:Cn,setCombatPower:vr,setPlayerLifespan:mr,setExperience:En,setMaxExperience:Jt}),g.jsx(dy,{show:q,inputApiKey:O,setInputApiKey:ye,saveApiKey:Fo,testApiKey:Nn,isLoading:j,onClose:()=>S(!1),apiKeyStatus:u,apiModel:fe,setApiModel:Ee,apiTemperature:Se,setApiTemperature:je,apiMaxTokens:Te,setApiMaxTokens:Re,adminKey:st,setAdminKey:wn,isAdminMode:Is,setIsAdminMode:Ls,setModalMessage:ge,numberOfChoices:Xe,setNumberOfChoices:xn,autoSaveEnabled:Bn,setAutoSaveEnabled:_n}),g.jsx(cy,{show:I,savedGames:K,onLoadGame:Bt,onDeleteGame:Jo,onClose:()=>H(!1)}),g.jsx(hy,{show:B.show,title:B.fieldType==="theme"?" Gi  Ch ":" Gi  Bi Cnh",suggestions:B.suggestions,isLoading:B.isLoading,onSelect:M=>{p($=>({...$,[B.fieldType]:M}))},onClose:()=>ie({show:!1,fieldType:null,suggestions:[],isLoading:!1})}),g.jsx(fy,{show:zn,itemName:ft,setItemName:ke,itemEffect:Wt,setItemEffect:Mt,onSpawn:Wo,onClose:()=>ve(!1)}),g.jsx(py,{show:We.show,title:We.title,content:We.content,type:We.type,onClose:()=>ge({show:!1,title:"",content:"",type:"info"})})]})};class Sy extends op.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("React Error:",n,s)}render(){var n;return this.state.hasError?g.jsxs("div",{style:{padding:"20px",color:"white",backgroundColor:"#000"},children:[g.jsx("h1",{children:"Li ti ng dng"}),g.jsx("pre",{style:{color:"red"},children:(n=this.state.error)==null?void 0:n.toString()}),g.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",marginTop:"10px"},children:"Ti li trang"})]}):this.props.children}}console.log("App starting...",{basePath:"/anhnvt-ai/"});try{dp.createRoot(document.getElementById("root")).render(g.jsx(ue.StrictMode,{children:g.jsx(Sy,{children:g.jsx(xy,{})})})),console.log("App rendered successfully")}catch(i){console.error("Failed to render app:",i),document.body.innerHTML=`
    <div style="padding: 20px; color: white; background: #000;">
      <h1>Li khi ng</h1>
      <pre style="color: red;">${i.toString()}</pre>
    </div>
  `}
